{
  final ChangeSet changeSet=new ChangeSet();
  final DartFileBasedSource source=myFileToSourceMap.get(annotatedFile);
  if (source != null) {
    handleDeletedAndOutOfDateSources(changeSet,source);
  }
  handleDeletedAndOutOfDateSources(changeSet,context.getLibrarySources());
  handleDeletedAndOutOfDateSources(changeSet,context.getHtmlSources());
synchronized (myCreatedFiles) {
    for (    VirtualFile file : myCreatedFiles) {
      changeSet.addedSource(DartFileBasedSource.getSource(myProject,file));
    }
  }
  context.applyChanges(changeSet);
}
