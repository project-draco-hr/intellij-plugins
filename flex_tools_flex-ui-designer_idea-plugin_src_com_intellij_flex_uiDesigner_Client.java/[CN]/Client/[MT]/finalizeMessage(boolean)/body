{
  if (hasError) {
    blockOut.rollback();
  }
 else {
    blockOut.end();
  }
  out.resetAfterMessage();
}
