{
  try {
    beginMessage(ClientMethod.updateDocumentFactory);
    out.writeShort(factoryId);
    final ProblemsHolder problemsHolder=new ProblemsHolder();
    writeDocumentFactory(DocumentFactoryManager.getInstance().getInfo(factoryId),module,psiFile,problemsHolder);
    if (!problemsHolder.isEmpty()) {
      DocumentProblemManager.getInstance().report(module.getProject(),problemsHolder);
    }
    beginMessage(ClientMethod.renderDocumentAndDependents);
    writeId(module);
    out.writeShort(factoryId);
    return true;
  }
 catch (  Throwable e) {
    LogMessageUtil.processInternalError(e,psiFile.getVirtualFile());
  }
  blockOut.rollback();
  return false;
}
