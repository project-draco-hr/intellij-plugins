{
  try {
    beginMessage(ClientMethod.updateDocumentFactory);
    writeId(module);
    out.writeShort(factoryId);
    RequiredAssetsInfo requiredAssetsInfo=new RequiredAssetsInfo();
    ProblemsHolder problemsHolder=new ProblemsHolder();
    writeDocumentFactory(module,psiFile,problemsHolder,requiredAssetsInfo);
    if (!problemsHolder.isEmpty()) {
      DocumentProblemManager.getInstance().report(module.getProject(),problemsHolder);
    }
    beginMessage(ClientMethod.updateDocuments);
    writeId(module);
    out.writeShort(factoryId);
    return true;
  }
 catch (  Throwable e) {
    LogMessageUtil.processInternalError(e,psiFile.getVirtualFile());
  }
  blockOut.rollback();
  return false;
}
