{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return createTestAdlRunConfiguration();
  }
  String adlPath;
  String runtime=findInstalledRuntime();
  for (  Sdk sdk : ProjectJdkTable.getInstance().getAllJdks()) {
    SdkType sdkType=sdk.getSdkType();
    if (!(sdkType instanceof IFlexSdkType)) {
      continue;
    }
    String version=sdk.getVersionString();
    if (version == null || !(version.length() >= 3 && (version.charAt(0) > '4' || (version.charAt(0) == '4' && version.charAt(2) >= '5')))) {
      continue;
    }
    adlPath=FlexSdkUtils.getAdlPath(sdk);
    if (StringUtil.isEmpty(adlPath) || !new File(adlPath).exists()) {
      continue;
    }
    if (runtime == null) {
      runtime=FlexSdkUtils.getAirRuntimePath(sdk);
      if (!checkRuntime(runtime)) {
        runtime=null;
        continue;
      }
    }
    return new AdlRunConfiguration(adlPath,runtime);
  }
  return null;
}
