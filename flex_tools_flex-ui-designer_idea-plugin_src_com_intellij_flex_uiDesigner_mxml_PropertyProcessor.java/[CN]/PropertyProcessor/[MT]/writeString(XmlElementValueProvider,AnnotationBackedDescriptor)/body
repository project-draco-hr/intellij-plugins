{
  if (descriptor != null && descriptor.isEnumerated()) {
    writer.writeStringReference(valueProvider.getTrimmed());
  }
 else {
    CharSequence v=writeIfEmpty(valueProvider);
    if (v != null) {
      writer.writeString(v);
    }
  }
}
