{
  String className=valueProvider.getTrimmed();
  int reference=classFactoryMap.get(className);
  if (reference == -1) {
    reference=writer.getRootScope().referenceCounter++;
    classFactoryMap.put(className,reference);
    writer.writeConstructorHeader("mx.core.ClassFactory",reference);
    writer.writeClass(className);
  }
 else {
    writer.writeObjectReference(reference);
  }
}
