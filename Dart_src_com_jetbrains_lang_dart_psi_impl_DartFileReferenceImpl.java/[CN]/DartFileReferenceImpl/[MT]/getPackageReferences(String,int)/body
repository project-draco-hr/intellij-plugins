{
  final VirtualFile file=DartResolveUtil.getRealVirtualFile(getContainingFile());
  final VirtualFile parentFile=file == null ? null : file.getParent();
  final VirtualFile packagesFolder=file == null ? null : PubspecYamlUtil.getDartPackagesFolder(getProject(),file);
  if (packagesFolder == null || parentFile == null) {
    return PsiReference.EMPTY_ARRAY;
  }
  String prefix=FileUtil.getRelativePath(parentFile.getPath(),packagesFolder.getPath(),'/');
  if (prefix == null) {
    return PsiReference.EMPTY_ARRAY;
  }
  prefix+="/";
  int shift=startIndex - prefix.length();
  final FileReferenceSet referenceSet=new FileReferenceSet(prefix + path,this,0,null,false,true);
  FileReference[] references=referenceSet.getAllReferences();
  int nestedLevel=StringUtil.countChars(prefix,'/');
  return references.length < nestedLevel ? PsiReference.EMPTY_ARRAY : shiftReferences(Arrays.copyOfRange(references,nestedLevel,references.length),shift);
}
