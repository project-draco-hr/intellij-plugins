{
  if (project == null || file == null)   return null;
  final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  VirtualFile parent=file;
  while ((parent=parent.getParent()) != null && fileIndex.isInContent(parent)) {
    if (parent.findChild(PUBSPEC_FILENAME) != null) {
      return getPackagesDir(parent);
    }
  }
  return null;
}
