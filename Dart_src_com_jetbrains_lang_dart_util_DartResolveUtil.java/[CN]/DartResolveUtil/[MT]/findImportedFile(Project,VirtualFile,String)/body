{
  if (importText.startsWith(PACKAGE_PREFIX)) {
    final VirtualFile pubspecYamlFile=PubspecYamlUtil.getPubspecYamlFile(project,contextFile);
    final String pubspecName=pubspecYamlFile == null ? null : PubspecYamlUtil.getPubspecName(pubspecYamlFile);
    final String prefix=pubspecName == null ? null : PACKAGE_PREFIX + pubspecName + "/";
    if (prefix != null && importText.startsWith(prefix)) {
      final String relativePath=importText.substring(prefix.length());
      final VirtualFile libFolder=pubspecYamlFile.getParent().findChild("lib");
      return libFolder == null ? null : VfsUtilCore.findRelativeFile(relativePath,libFolder);
    }
    final VirtualFile packagesFolder=PubspecYamlUtil.getDartPackagesFolder(project,contextFile);
    final String relativePath=importText.substring(PACKAGE_PREFIX.length());
    return packagesFolder == null ? null : VfsUtilCore.findRelativeFile(relativePath,packagesFolder);
  }
  final VirtualFile parent=contextFile.getParent();
  return parent == null ? null : VfsUtilCore.findRelativeFile(importText,parent);
}
