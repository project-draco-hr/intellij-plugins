{
  ProcessingItem[] items=ApplicationManager.getApplication().runReadAction(new Computable<ProcessingItem[]>(){
    public ProcessingItem[] compute(){
      try {
        final Collection<Pair<Module,FlexBuildConfiguration>> modulesAndBCs=FlexCompiler.getModulesAndBCsToCompile(context.getCompileScope());
        final Collection<FlexResourceProcessingItem> result=new ArrayList<FlexResourceProcessingItem>();
        final Collection<Module> modules=new THashSet<Module>();
        for (        Pair<Module,FlexBuildConfiguration> bc : modulesAndBCs) {
          final Module module=bc.first;
          if (modules.add(module)) {
            appendItemsForModule(result,module);
          }
        }
        return result.toArray(new ProcessingItem[result.size()]);
      }
 catch (      ConfigurationException e) {
        return ProcessingItem.EMPTY_ARRAY;
      }
    }
  }
);
  if (items.length == 0 && CompilerPathsEx.CLEAR_ALL_OUTPUTS_KEY.get(context.getCompileScope()) == Boolean.TRUE) {
    return new ProcessingItem[]{new FakeProcessingItem(context.getProject().getBaseDir())};
  }
  return items;
}
