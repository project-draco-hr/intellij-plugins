{
  final Semaphore semaphore=new Semaphore(1);
  semaphore.tryAcquire();
  UIUtil.invokeLater(new Runnable(){
    public void run(){
      ToolWindow window=myToolWindowManager.getToolWindow(getToolWindowId());
      if (window != null) {
        window.show(new Runnable(){
          public void run(){
            semaphore.release();
          }
        }
);
      }
 else {
        semaphore.release();
      }
    }
  }
);
  waitForOpen(semaphore);
}
