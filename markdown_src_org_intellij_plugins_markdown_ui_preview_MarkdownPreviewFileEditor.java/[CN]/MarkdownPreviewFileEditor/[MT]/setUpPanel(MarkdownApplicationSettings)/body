{
  final MarkdownHtmlPanelProvider newPanelProvider=retrievePanelProvider(settings);
  if (newPanelProvider == null) {
    return;
  }
  mySwingAlarm.addRequest(new Runnable(){
    @Override public void run(){
      final MarkdownHtmlPanel newPanel=newPanelProvider.createHtmlPanel();
      if (myPanel != null) {
        myHtmlPanelWrapper.remove(myPanel.getComponent());
        Disposer.dispose(myPanel);
      }
      myPanel=newPanel;
      myHtmlPanelWrapper.add(myPanel.getComponent(),BorderLayout.CENTER);
      myPanel.setHtml(myLastRenderedHtml);
      myHtmlPanelWrapper.repaint();
    }
  }
,0,ModalityState.stateForComponent(myHtmlPanelWrapper));
}
