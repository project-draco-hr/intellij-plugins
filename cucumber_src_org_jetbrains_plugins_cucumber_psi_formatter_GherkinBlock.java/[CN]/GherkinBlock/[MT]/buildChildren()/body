{
  final ASTNode[] children=myNode.getChildren(null);
  if (children.length == 0) {
    return Collections.emptyList();
  }
  List<Block> result=new ArrayList<Block>();
  for (  ASTNode child : children) {
    if (child.getElementType() == TokenType.WHITE_SPACE) {
      continue;
    }
    Indent indent=BLOCKS_TO_INDENT.contains(child.getElementType()) ? Indent.getNormalIndent() : Indent.getNoneIndent();
    if (child.getElementType() == GherkinElementTypes.TABLE_CELL) {
      if (child.getChildren(null).length == 0) {
        continue;
      }
    }
    if (child.getElementType() == GherkinTokenTypes.COMMENT) {
      final ASTNode previous=child.getTreePrev();
      if (previous != null && previous.getText().contains("\n")) {
        final String whiteSpaceText=previous.getText();
        final int lineBreakIndex=whiteSpaceText.lastIndexOf("\n");
        indent=Indent.getSpaceIndent(whiteSpaceText.length() - lineBreakIndex - 1);
      }
    }
    result.add(new GherkinBlock(child,indent));
  }
  return result;
}
