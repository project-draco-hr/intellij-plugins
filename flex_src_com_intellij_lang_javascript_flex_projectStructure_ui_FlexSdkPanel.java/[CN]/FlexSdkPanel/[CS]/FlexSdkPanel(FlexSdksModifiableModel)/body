{
  myModifiableModel=modifiableModel;
  myEventDispatcher=EventDispatcher.create(ChangeListener.class);
  mySdkLabel.setLabelFor(myCombo.getComboBox());
  myInfoLabel.setIcon(UIUtil.getBalloonWarningIcon());
  myModifiableModel.addSdkListListener(new ChangeListener(){
    @Override public void stateChanged(    ChangeEvent e){
      rebuildComboModel();
    }
  }
,this);
  myCombo.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      SdkConfigurationUtil.selectSdkHome(FlexIdeUtils.getSdkType(),new Consumer<String>(){
        @Override public void consume(        String homePath){
          FlexSdk sdk=myModifiableModel.findOrCreateSdk(homePath);
          setCurrentSdk(new SdkEntry(sdk.getLibraryId(),sdk.getHomePath()));
          myEventDispatcher.getMulticaster().stateChanged(new ChangeEvent(FlexSdkPanel.this));
        }
      }
);
    }
  }
);
  myCombo.getChildComponent().addItemListener(new ItemListener(){
    @Override public void itemStateChanged(    ItemEvent e){
      Object selectedItem=myCombo.getComboBox().getSelectedItem();
      myModifiableModel.setUsed(FlexSdkPanel.this,selectedItem instanceof Library ? (Library)selectedItem : null);
      if (myMute) {
        return;
      }
      comboItemChanged();
    }
  }
);
  myCombo.getChildComponent().setRenderer(new ListCellRendererWrapper(myCombo.getChildComponent().getRenderer()){
    @Override public void customize(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      if (value != null) {
        String homePath=value instanceof Library ? FlexSdk.getHomePath((Library)value) : ((Pair<String,String>)value).second;
        setText(FileUtil.toSystemDependentName(homePath));
      }
 else {
        setText("(none)");
      }
    }
  }
);
  myEditButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      editSdk();
    }
  }
);
}
