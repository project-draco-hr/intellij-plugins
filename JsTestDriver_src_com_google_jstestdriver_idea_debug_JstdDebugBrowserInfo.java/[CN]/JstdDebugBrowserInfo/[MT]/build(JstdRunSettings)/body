{
  JstdServerState jstdServerState=JstdServerState.getInstance();
  CapturedBrowsers browsers=jstdServerState.getCaptured();
  if (browsers == null) {
    return null;
  }
  List<JstdDebugBrowserInfo> debugBrowserInfos=new SmartList<JstdDebugBrowserInfo>();
  for (  SlaveBrowser slaveBrowser : browsers.getSlaveBrowsers()) {
    Pair<JSDebugEngine,WebBrowser> engine=JSDebugEngine.findByBrowserName(slaveBrowser.getBrowserInfo().getName());
    if (engine != null) {
      debugBrowserInfos.add(new JstdDebugBrowserInfo(engine,slaveBrowser.getCaptureUrl(),slaveBrowser));
    }
  }
  if (debugBrowserInfos.size() == 1) {
    return debugBrowserInfos.get(0);
  }
  if (debugBrowserInfos.size() > 1) {
    WebBrowser preferredBrowser=settings.getPreferredDebugBrowser();
    for (    JstdDebugBrowserInfo info : debugBrowserInfos) {
      if (preferredBrowser.equals(info.getBrowser())) {
        return info;
      }
    }
  }
  return null;
}
