{
  Map<String,Set<ManifestHolder>> sets=new HashMap<String,Set<ManifestHolder>>();
  for (  ManifestHolder holder : manifestHolders) {
    try {
      BundleManifest manifest=holder.getBundleManifest();
      if (manifest != null) {
        String bundleSymbolicName=manifest.getBundleSymbolicName();
        Set<ManifestHolder> set;
        if (sets.containsKey(bundleSymbolicName)) {
          set=sets.get(bundleSymbolicName);
        }
 else {
          set=new HashSet<ManifestHolder>();
          sets.put(bundleSymbolicName,set);
        }
        set.add(holder);
      }
    }
 catch (    ManifestHolderDisposedException e) {
    }
  }
  Set<ManifestHolder> result=new HashSet<ManifestHolder>();
  for (  Set<ManifestHolder> holders : sets.values()) {
    ManifestHolder candidateWithHighestVersion=getCandidateWithHighestVersion(holders);
    if (candidateWithHighestVersion != null) {
      result.add(candidateWithHighestVersion);
    }
  }
  return result;
}
