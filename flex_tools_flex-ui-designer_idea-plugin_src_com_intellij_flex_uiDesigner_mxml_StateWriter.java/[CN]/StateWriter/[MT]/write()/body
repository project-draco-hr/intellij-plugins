{
  final PrimitiveAmfOutputStream out=writer.getOut();
  out.write(states.size());
  if (states.isEmpty()) {
    return;
  }
  for (  State state : states) {
    writer.getBlockOut().allocate(2);
    writer.writeProperty(NAME,state.name);
    OverrideBase override=state.overrides.getFirst();
    if (override != null) {
      out.writeUInt29(OVERRIDES);
      out.write(PropertyClassifier.PROPERTY);
      out.write(AmfExtendedTypes.MXML_ARRAY);
      out.writeShort(0);
      out.writeShort(state.overrides.size());
      do {
        override.write(writer,this);
      }
 while ((override=override.next) != null);
    }
    writer.endObject();
  }
  reset();
}
