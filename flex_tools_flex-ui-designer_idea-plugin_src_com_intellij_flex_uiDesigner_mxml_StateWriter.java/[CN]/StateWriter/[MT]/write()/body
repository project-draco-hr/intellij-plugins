{
  final PrimitiveAmfOutputStream out=writer.getOut();
  out.write(states.size());
  if (states.isEmpty()) {
    return;
  }
  for (  State state : states) {
    out.allocateClearShort();
    writer.writeProperty(NAME,state.name);
    if (!state.overrides.isEmpty()) {
      out.writeUInt29(OVERRIDES);
      out.write(PropertyClassifier.PROPERTY);
      out.write(AmfExtendedTypes.MXML_ARRAY);
      out.writeShort(0);
      out.writeShort(state.overrides.size());
      for (      OverrideBase override : state.overrides) {
        override.write(writer,this);
      }
    }
    writer.endObject();
  }
  reset();
}
