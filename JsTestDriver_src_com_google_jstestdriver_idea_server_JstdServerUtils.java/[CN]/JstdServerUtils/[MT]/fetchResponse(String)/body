{
  HttpURLConnection connection=null;
  try {
    final int status;
    try {
      connection=(HttpURLConnection)new URL(url).openConnection();
      connection.connect();
      status=connection.getResponseCode();
    }
 catch (    Exception e) {
      return Response.error(Response.Error.CONNECTION_FAILED);
    }
    try {
      String content=readAsString(connection);
      return Response.fromContent(status,content);
    }
 catch (    IOException e) {
      return Response.error(Response.Error.READ_FAILED);
    }
  }
  finally {
    if (connection != null) {
      connection.disconnect();
    }
  }
}
