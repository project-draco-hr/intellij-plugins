{
  int totalNumStarts=1;
  int lookFrom=afterStartIdx;
  while (totalNumStarts > 0) {
    --totalNumStarts;
    int nextEndIdx=text.indexOf(endSymbol,lookFrom);
    if (nextEndIdx == -1)     return -1;
    final int numStarts=getOccurrenceCount(text,lookFrom,nextEndIdx,shortStartSymbol);
    final int numEnds=getOccurrenceCount(text,lookFrom,nextEndIdx,shortEndSymbol);
    totalNumStarts+=numStarts - numEnds;
    lookFrom=nextEndIdx + 1;
    if (totalNumStarts <= 0)     return nextEndIdx;
  }
  return -1;
}
