{
  updateWatchPatterns();
  if ("name".equals(event.getPropertyName())) {
    VirtualFile parent=event.getParent();
    if (parent != null) {
      String oldPath=join(parent.getPath(),event.getOldValue().toString());
      String newPath=join(parent.getPath(),event.getNewValue().toString());
      if (insideRoots(parent)) {
        myChangedFilesManager.onFileRemoved(oldPath);
        myChangedFilesManager.onFileAdded(newPath);
      }
    }
  }
}
