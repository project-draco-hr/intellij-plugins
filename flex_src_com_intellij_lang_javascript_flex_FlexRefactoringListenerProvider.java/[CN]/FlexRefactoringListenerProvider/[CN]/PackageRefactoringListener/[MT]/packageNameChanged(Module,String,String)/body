{
  final String oldPackageWithDot=oldPackageName + ".";
  for (  FlexIdeBuildConfiguration bc : FlexBuildConfigurationManager.getInstance(module).getBuildConfigurations()) {
    if (bc.getOutputType() == OutputType.Application && bc.getMainClass().startsWith(oldPackageWithDot)) {
      final String mainClass=(newPackageName.isEmpty() ? "" : (newPackageName + ".")) + bc.getMainClass().substring(oldPackageWithDot.length());
      FlexProjectConfigurationEditor.makeNonStructuralModification(bc,new Consumer<NonStructuralModifiableBuildConfiguration>(){
        @Override public void consume(        final NonStructuralModifiableBuildConfiguration configuration){
          configuration.setMainClass(mainClass);
        }
      }
);
    }
  }
}
