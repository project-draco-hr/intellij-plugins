{
  return ApplicationManager.getApplication().runWriteAction(new Computable<ScriptingLibraryModel>(){
    @Override public ScriptingLibraryModel compute(){
      ScriptingLibraryModel scriptingLibraryModel=libraryManager.createLibrary(libraryName,sourceFiles,VirtualFile.EMPTY_ARRAY,new String[]{});
      libraryManager.commitChanges();
      return scriptingLibraryModel;
    }
  }
);
}
