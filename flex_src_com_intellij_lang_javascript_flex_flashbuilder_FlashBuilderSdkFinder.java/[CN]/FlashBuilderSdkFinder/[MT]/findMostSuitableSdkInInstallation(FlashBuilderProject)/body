{
  final String sdkName=flashBuilderProject.getSdkName();
  if ("".equals(sdkName) && !mySdkRootsFromFBInstallation.isEmpty()) {
    VirtualFile latestSdkRoot=mySdkRootsFromFBInstallation.iterator().next();
    for (    VirtualFile nextSdkRoot : mySdkRootsFromFBInstallation) {
      if (StringUtil.compareVersionNumbers(nextSdkRoot.getName(),latestSdkRoot.getName()) > 0) {
        latestSdkRoot=nextSdkRoot;
      }
    }
    return latestSdkRoot.getPath();
  }
  if (sdkName.startsWith(COMMON_SDK_NAME_BEGINNING)) {
    final String sdkVersion=sdkName.substring(COMMON_SDK_NAME_BEGINNING.length());
    for (    VirtualFile sdkRoot : mySdkRootsFromFBInstallation) {
      if (sdkRoot.getName().startsWith(sdkVersion)) {
        return sdkRoot.getPath();
      }
    }
  }
  return mySdkRootsFromFBInstallation.isEmpty() ? null : mySdkRootsFromFBInstallation.iterator().next().getPath();
}
