{
  final VirtualFile installFolder=LocalFileSystem.getInstance().findFileByPath(frameworkInstanceDefinition.getBaseFolder());
  if (installFolder == null || !installFolder.isDirectory()) {
    LOG.warn(frameworkInstanceDefinition.getBaseFolder() + " is not a folder");
    return;
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      installFolder.refresh(false,true);
      VirtualFile pluginsFolder=installFolder.findChild("plugins");
      if (pluginsFolder == null || !pluginsFolder.isDirectory()) {
        LOG.warn("Looks like there is no plugins folder below the Equinox root folder. Ignoring this.");
        return;
      }
      collector.collectFrameworkLibraries(new EquinoxSourceFinder(),Collections.singletonList(pluginsFolder));
    }
  }
);
}
