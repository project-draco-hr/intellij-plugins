{
  final boolean allowIncludeInExludeFrom=hasStates && isListItem && parentContext != null;
  if (JSCommonTypeNames.ARRAY_CLASS_NAME.equals(descriptor.getQualifiedName())) {
    out.write(AmfExtendedTypes.MXML_ARRAY);
    processTagChildren(tag,processIdAttributeOfBuiltInTypeLanguageTag(tag,parentContext,allowIncludeInExludeFrom),parentContext,false,PropertyKind.ARRAY,false);
    return true;
  }
 else   if (CodeContext.AS3_VEC_VECTOR_QUALIFIED_NAME.equals(descriptor.getQualifiedName())) {
    return processMxmlVector(tag,parentContext,allowIncludeInExludeFrom);
  }
  try {
    if (propertyProcessor.writeIfPrimitive(createValueProvider(tag),descriptor.getQualifiedName(),out,parentContext,allowIncludeInExludeFrom) != null) {
      return true;
    }
  }
 catch (  InvalidPropertyException e) {
    problemsHolder.add(e);
    return false;
  }
  final int projectComponentFactoryId;
  try {
    projectComponentFactoryId=InjectionUtil.getProjectComponentFactoryId(descriptor.getQualifiedName(),descriptor.getDeclaration(),propertyProcessor.getUnregisteredDocumentFactories());
  }
 catch (  InvalidPropertyException e) {
    problemsHolder.add(e);
    return false;
  }
  final int childDataPosition=out.size();
  if (projectComponentFactoryId != -1) {
    if (!isListItem) {
      writer.getBlockOut().setPosition(writer.getBlockOut().size() - 1);
    }
    writer.documentReference(projectComponentFactoryId);
  }
 else {
    if (isListItem) {
      out.write(Amf3Types.OBJECT);
    }
    writer.classOrPropertyName(descriptor.getQualifiedName());
  }
  return processElements(tag,parentContext,allowIncludeInExludeFrom,childDataPosition,out.allocateClearShort());
}
