{
  if (psiFile == null) {
    createStepDefinitionFile(step);
  }
 else {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        new WriteCommandAction.Simple(step.getProject()){
          @Override protected void run() throws Throwable {
            createStepDefinition(step,psiFile);
          }
        }
.execute();
      }
    }
);
  }
}
