{
  if (resolveResult instanceof JSFunction) {
    resolveResult=resolveResult.getParent();
  }
  String psiElementType=parent instanceof JSReferenceExpression || JSResolveUtil.isExprInStrictTypeContext(expression) || PsiTreeUtil.getChildOfType(expression,JSE4XNamespaceReference.class) != null || parent instanceof JSCallExpression ? ((JSClass)resolveResult).getQualifiedName() : "Class";
  JSTypeSource source=JSTypeSourceFactory.createTypeSource(expression);
  JSType type=JSNamedType.createType(psiElementType,source,JSContext.UNKNOWN);
  if (JSTypeUtils.isActionScriptVectorType(type)) {
    type=JSTypeUtils.createType(JSImportHandlingUtil.resolveTypeName(expression.getText(),expression),source);
  }
  final JSElement peek=myJSElementsToApply.peek();
  if (peek instanceof JSCallExpression)   myJSElementsToApply.pop();
  addType(type,resolveResult);
  if (peek instanceof JSCallExpression)   myJSElementsToApply.push(peek);
}
