{
  final TextComponentAccessor<JTextField> textComponentAccessor=new TextComponentAccessor<JTextField>(){
    @Override public String getText(    final JTextField component){
      return component.getText();
    }
    @Override public void setText(    final JTextField component,    @NotNull String text){
      if (!text.isEmpty() && !isDartSdkHome(text)) {
        final String probablySdkPath=text + "/dart-sdk";
        if (isDartSdkHome(probablySdkPath)) {
          component.setText(FileUtilRt.toSystemDependentName(probablySdkPath));
          return;
        }
      }
      component.setText(FileUtilRt.toSystemDependentName(text));
    }
  }
;
  final ComponentWithBrowseButton.BrowseFolderActionListener<JTextField> browseFolderListener=new ComponentWithBrowseButton.BrowseFolderActionListener<JTextField>("Select Dart SDK path",null,dartSdkPathComponent,project,FileChooserDescriptorFactory.createSingleFolderDescriptor(),textComponentAccessor);
  dartSdkPathComponent.addBrowseFolderListener(project,browseFolderListener);
  if (versionLabel != null) {
    dartSdkPathComponent.getTextField().getDocument().addDocumentListener(new DocumentAdapter(){
      @Override protected void textChanged(      final DocumentEvent e){
        final String sdkHomePath=dartSdkPathComponent.getText().trim();
        versionLabel.setText(sdkHomePath.isEmpty() ? "" : getSdkVersion(sdkHomePath));
      }
    }
);
  }
}
