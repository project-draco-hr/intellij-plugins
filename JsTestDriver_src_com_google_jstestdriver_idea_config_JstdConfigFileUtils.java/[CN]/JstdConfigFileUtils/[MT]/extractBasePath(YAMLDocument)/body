{
  VirtualFile configVF=document.getContainingFile().getOriginalFile().getVirtualFile();
  VirtualFile defaultBasePathVF=null;
  if (configVF != null) {
    defaultBasePathVF=configVF.getParent();
  }
  List<YAMLPsiElement> children=document.getYAMLElements();
  for (  YAMLPsiElement child : children) {
    if (child instanceof YAMLKeyValue) {
      YAMLKeyValue keyValue=(YAMLKeyValue)child;
      if (BASE_PATH.equals(keyValue.getKeyText())) {
        String basePath=keyValue.getValueText();
        if (defaultBasePathVF != null) {
          VirtualFile vf=defaultBasePathVF.findFileByRelativePath(basePath);
          if (vf != null) {
            return vf;
          }
        }
        File file=new File(basePath);
        if (file.exists()) {
          VirtualFile vf=LocalFileSystem.getInstance().findFileByIoFile(file);
          if (vf != null) {
            return vf;
          }
        }
      }
    }
  }
  return defaultBasePathVF;
}
