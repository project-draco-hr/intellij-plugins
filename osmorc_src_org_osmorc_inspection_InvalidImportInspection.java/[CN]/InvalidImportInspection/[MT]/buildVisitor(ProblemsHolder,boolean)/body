{
  return new JavaElementVisitor(){
    @Override public void visitReferenceExpression(    PsiReferenceExpression expression){
    }
    @Override public void visitNewExpression(    PsiNewExpression expression){
      if (OsmorcFacet.hasOsmorcFacet(expression) && OsmorcFacet.getInstance(expression).getConfiguration().isManifestManuallyEdited()) {
        PsiJavaCodeReferenceElement classReference=expression.getClassReference();
        if (classReference != null && isInvalid(classReference.resolve(),ModuleUtil.findModuleForPsiElement(expression))) {
          holder.registerProblem(expression,"Invalid import",ProblemHighlightType.LIKE_UNKNOWN_SYMBOL);
        }
      }
    }
    @Override public void visitVariable(    PsiVariable variable){
      if (OsmorcFacet.hasOsmorcFacet(variable) && OsmorcFacet.getInstance(variable).getConfiguration().isManifestManuallyEdited()) {
        PsiClass psiClass=null;
        PsiType psiType=variable.getType();
        if (psiType instanceof PsiClassType) {
          psiClass=((PsiClassType)psiType).resolve();
        }
        if (isInvalid(psiClass,ModuleUtil.findModuleForPsiElement(variable))) {
          holder.registerProblem(variable,"Invalid import",ProblemHighlightType.LIKE_UNKNOWN_SYMBOL);
        }
      }
    }
    @Override public void visitImportStatement(    PsiImportStatement statement){
      if (OsmorcFacet.hasOsmorcFacet(statement) && OsmorcFacet.getInstance(statement).getConfiguration().isManifestManuallyEdited()) {
        PsiElement element=statement.resolve();
        if (element == null) {
          PsiJavaCodeReferenceElement importReference=statement.getImportReference();
          if (importReference != null) {
            String importText=importReference.getText();
            if (importText.endsWith(";")) {
              importText=importText.substring(0,importText.length() - 1);
            }
            if (importText.endsWith(".*")) {
              importText=importText.substring(0,importText.length() - 2);
            }
            PsiReference reference=importReference.findReferenceAt(importText.length() - 1);
            if (reference != null) {
              element=reference.resolve();
            }
          }
        }
        if (isInvalid(element,ModuleUtil.findModuleForPsiElement(statement))) {
          holder.registerProblem(statement,"Invalid import",ProblemHighlightType.LIKE_UNKNOWN_SYMBOL);
        }
      }
    }
  }
;
}
