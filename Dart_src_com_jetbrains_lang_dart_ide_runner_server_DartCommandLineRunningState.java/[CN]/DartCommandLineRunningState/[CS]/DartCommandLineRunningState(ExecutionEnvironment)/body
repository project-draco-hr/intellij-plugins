{
  super(env);
  myRunnerParameters=((DartRunConfigurationBase)env.getRunProfile()).getRunnerParameters().clone();
  try {
    myRunnerParameters.check(env.getProject());
  }
 catch (  RuntimeConfigurationError e) {
    throw new ExecutionException(e);
  }
  final TextConsoleBuilder builder=getConsoleBuilder();
  if (builder instanceof TextConsoleBuilderImpl) {
    ((TextConsoleBuilderImpl)builder).setUsePredefinedMessageFilter(false);
  }
  try {
    builder.addFilter(new DartConsoleFilter(env.getProject(),myRunnerParameters.getDartFile()));
    final String workingDir=StringUtil.isEmptyOrSpaces(myRunnerParameters.getWorkingDirectory()) ? myRunnerParameters.getDartFile().getParent().getPath() : myRunnerParameters.getWorkingDirectory();
    builder.addFilter(new DartRelativePathsConsoleFilter(env.getProject(),workingDir));
    builder.addFilter(new UrlFilter());
  }
 catch (  RuntimeConfigurationError e) {
    builder.addFilter(new DartConsoleFilter(env.getProject(),null));
  }
}
