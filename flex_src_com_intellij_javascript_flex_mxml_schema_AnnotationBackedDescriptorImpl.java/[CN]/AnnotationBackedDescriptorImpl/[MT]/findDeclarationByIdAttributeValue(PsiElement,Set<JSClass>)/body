{
  final Ref<XmlAttributeValue> resultRef=new Ref<XmlAttributeValue>(null);
  if (descriptorDeclaration instanceof XmlFile) {
    final XmlDocument document=((XmlFile)descriptorDeclaration).getDocument();
    final XmlTag rootTag=document == null ? null : document.getRootTag();
    if (rootTag != null) {
      ClassBackedElementDescriptor.processClassBackedTagsWithIdAttribute(rootTag,new Processor<Pair<XmlAttribute,String>>(){
        @Override public boolean process(        final Pair<XmlAttribute,String> idAttributeAndItsType){
          final XmlAttributeValue xmlAttributeValue=idAttributeAndItsType.first.getValueElement();
          if (xmlAttributeValue != null && xmlAttributeValue.getValue().equals(AnnotationBackedDescriptorImpl.this.name)) {
            resultRef.set(xmlAttributeValue);
            return false;
          }
          return true;
        }
      }
);
    }
    if (resultRef.isNull()) {
      final JSClass jsClass=XmlBackedJSClassFactory.getXmlBackedClass((XmlFile)descriptorDeclaration);
      if (jsClass != null) {
        return findDeclarationByIdAttributeValueInSuperClass(jsClass,visited);
      }
    }
  }
 else   if (descriptorDeclaration instanceof JSClass) {
    return findDeclarationByIdAttributeValueInSuperClass((JSClass)descriptorDeclaration,visited);
  }
  return resultRef.get();
}
