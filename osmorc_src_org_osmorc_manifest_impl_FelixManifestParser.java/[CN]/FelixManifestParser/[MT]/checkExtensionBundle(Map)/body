{
  Object extension=parseExtensionBundleHeader((String)headerMap.get(Constants.FRAGMENT_HOST));
  if (extension != null) {
    if (!(Constants.EXTENSION_FRAMEWORK.equals(extension) || Constants.EXTENSION_BOOTCLASSPATH.equals(extension))) {
      throw new BundleException("Extension bundle must have either 'extension:=framework' or 'extension:=bootclasspath'");
    }
    if (headerMap.containsKey(Constants.IMPORT_PACKAGE) || headerMap.containsKey(Constants.REQUIRE_BUNDLE) || headerMap.containsKey(Constants.BUNDLE_NATIVECODE)|| headerMap.containsKey(Constants.DYNAMICIMPORT_PACKAGE)|| headerMap.containsKey(Constants.BUNDLE_ACTIVATOR)) {
      throw new BundleException("Invalid extension bundle manifest");
    }
    return true;
  }
  return false;
}
