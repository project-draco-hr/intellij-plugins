{
  AvailabilityCheckResult result=new AvailabilityCheckResult();
  if (element != null) {
    if (element instanceof PsiPackage) {
      PsiDirectory[] directories=((PsiPackage)element).getDirectories();
      for (      PsiDirectory directory : directories) {
        result=checkDirectory(directory,usingModule);
        if (!result.isOk()) {
          break;
        }
      }
    }
 else {
      final PsiFile containingFile=element.getContainingFile();
      if (containingFile != null) {
        final PsiDirectory folder=containingFile.getContainingDirectory();
        if (folder != null) {
          result=checkDirectory(folder,usingModule);
        }
      }
    }
  }
  return result;
}
