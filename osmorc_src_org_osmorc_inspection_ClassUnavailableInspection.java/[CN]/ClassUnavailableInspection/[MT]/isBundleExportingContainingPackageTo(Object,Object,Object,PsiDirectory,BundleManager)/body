{
  PsiPackage containingPackage=JavaDirectoryService.getInstance().getPackage(folder);
  BundleDescription exporterDescription=bundleManager.getBundleDescription(exportingBundle);
  BundleDescription containerDescription=bundleManager.getBundleDescription(containingBundle);
  BundleDescription importerDescription=bundleManager.getBundleDescription(importingBundle);
  if (importerDescription != null && containingPackage != null) {
    if (containerDescription == null || isDirectImportExport(containingPackage,exporterDescription,importerDescription,bundleManager)) {
      return new AvailabilityCheckResult();
    }
    boolean containerExports=isContainerExportingPackage(containingPackage,containerDescription);
    boolean recursiveRequired=isRecursiveRequired(importerDescription,containerDescription,bundleManager);
    if (!containerExports) {
      return new AvailabilityCheckResult(AvailabilityCheckResult.ResultType.SymbolIsNotExported,"Bundle '" + bundleManager.getDisplayName(exportingBundle) + "' contains package '"+ containingPackage.getQualifiedName()+ "' but does not export it.");
    }
    if (!recursiveRequired) {
      return new AvailabilityCheckResult(AvailabilityCheckResult.ResultType.SymbolIsNotImported,"The package  '" + containingPackage.getQualifiedName() + "' is not imported in the manifest.");
    }
    return new AvailabilityCheckResult();
  }
 else {
    return new AvailabilityCheckResult();
  }
}
