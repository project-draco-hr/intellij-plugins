{
  final String title=FlexBundle.message("select.flash.builder.workspace.or.project.dir");
  final FileChooserDescriptor descriptor=new FileChooserDescriptor(true,true,false,false,false,false){
    public boolean isFileVisible(    final VirtualFile file,    final boolean showHiddenFiles){
      return (super.isFileVisible(file,showHiddenFiles) && (file.isDirectory() || FlashBuilderProjectFinder.isFlashBuilderProject(file)));
    }
    public Icon getOpenIcon(    final VirtualFile virtualFile){
      if (FlashBuilderProjectFinder.isFlashBuilderProject(virtualFile)) {
        return getBuilder().getIcon();
      }
      return super.getOpenIcon(virtualFile);
    }
    public Icon getClosedIcon(    final VirtualFile virtualFile){
      if (FlashBuilderProjectFinder.isFlashBuilderProject(virtualFile)) {
        return getBuilder().getIcon();
      }
      return super.getClosedIcon(virtualFile);
    }
  }
;
  myWorkspaceOrDirWithProjectsComponent.getComponent().addBrowseFolderListener(title,null,getWizardContext().getProject(),descriptor,new TextComponentAccessor<JTextField>(){
    public String getText(    final JTextField component){
      return component.getText();
    }
    public void setText(    final JTextField component,    String text){
      if (FileUtil.toSystemIndependentName(text).endsWith("/" + FlashBuilderImporter.DOT_PROJECT)) {
        text=text.substring(0,text.length() - ("/" + FlashBuilderImporter.DOT_PROJECT).length());
      }
      component.setText(text);
    }
  }
);
}
