{
  final PsiFile probableGherkinFile=sourceStep.getContainingFile();
  if (!(probableGherkinFile instanceof GherkinFile)) {
    return;
  }
  final GherkinFile gherkinFile=(GherkinFile)probableGherkinFile;
  for (  GherkinFeature feature : gherkinFile.getFeatures()) {
    for (    GherkinStepsHolder stepsHolder : feature.getScenarios()) {
      for (      GherkinStep step : stepsHolder.getSteps()) {
        final PsiReference[] references=step.getReferences();
        for (        PsiReference reference : references) {
          if (!(reference instanceof CucumberStepReference))           continue;
          final AbstractStepDefinition definition=((CucumberStepReference)reference).resolveToDefinition();
          if (definition == null) {
            createFileOrStepDefinition(step,file);
          }
        }
      }
    }
  }
}
