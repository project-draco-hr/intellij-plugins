{
  final DartSdk sdk=DartSdk.getGlobalDartSdk();
  if (sdk == null)   return false;
  final BooleanValueHolder result=new BooleanValueHolder(true);
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    public void run(){
      new Task.Modal(configuration.getProject(),DartBundle.message("dart2js.title"),false){
        public void run(        @NotNull ProgressIndicator indicator){
          indicator.setIndeterminate(true);
          indicator.setText(DartBundle.message("dart2js.task.description",VfsUtil.extractFileName(task.getInputFilePath())));
          final GeneralCommandLine command=Dart2JSAction.getCommandLine(DartSdkUtil.getDart2jsPath(sdk),task.getInputFilePath(),task.getOutputFilePath(),task.isCheckedMode(),task.isMinifyMode());
          try {
            final String output=ScriptRunnerUtil.getProcessOutput(command);
            final boolean isOK=StringUtil.isEmpty(output);
            result.setValue(isOK);
            if (!isOK) {
              LOG.info(output);
            }
            final VirtualFile outputFile=VirtualFileManager.getInstance().refreshAndFindFileByUrl(VfsUtilCore.pathToUrl(task.getOutputFilePath()));
            if (outputFile != null) {
              outputFile.getParent().refresh(true,true);
            }
          }
 catch (          ExecutionException e) {
            LOG.warn(e);
          }
        }
      }
.queue();
    }
  }
);
  return result.getValue();
}
