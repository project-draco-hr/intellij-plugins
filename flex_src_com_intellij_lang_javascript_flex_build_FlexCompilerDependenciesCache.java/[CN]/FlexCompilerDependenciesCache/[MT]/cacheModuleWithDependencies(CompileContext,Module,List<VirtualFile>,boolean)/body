{
  clearDirtyModules();
  final VirtualFile outputFile=getOutputFile(context.getMessages(CompilerMessageCategory.INFORMATION),configFiles);
  if (outputFile != null) {
    final HashSet<VirtualFile> fileDependencies=new HashSet<VirtualFile>();
    fileDependencies.add(outputFile);
    final Sdk sdk=FlexUtils.getFlexSdkForFlexModuleOrItsFlexFacets(module);
    if (sdk != null) {
      fileDependencies.add(sdk.getHomeDirectory());
    }
    for (    VirtualFile configFile : configFiles) {
      fileDependencies.add(configFile);
      fileDependencies.addAll(getDependenciesExceptSourceRootsFromConfigFile(module,configFile));
    }
    appendCssAndRespectiveSwfFiles(fileDependencies,module);
    if (append) {
      final ModuleDependencies dependencies=myModuleToDependenciesCache.get(module);
      if (dependencies == null) {
        myModuleToDependenciesCache.put(module,ModuleDependencies.create(module,fileDependencies));
      }
 else {
        dependencies.myFiles.addAll(fileDependencies);
      }
    }
 else {
      myModuleToDependenciesCache.put(module,ModuleDependencies.create(module,fileDependencies));
    }
  }
}
