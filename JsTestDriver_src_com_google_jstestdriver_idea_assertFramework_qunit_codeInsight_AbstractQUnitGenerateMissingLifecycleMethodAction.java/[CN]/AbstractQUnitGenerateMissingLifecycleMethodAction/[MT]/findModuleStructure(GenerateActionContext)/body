{
  QUnitFileStructureBuilder builder=QUnitFileStructureBuilder.getInstance();
  QUnitFileStructure fileStructure=builder.fetchCachedTestFileStructure(context.getJsFile());
  if (fileStructure.hasQUnitSymbols()) {
    QUnitTestMethodStructure testMethodStructure=fileStructure.findTestMethodStructureContainingOffset(context.getDocumentCaretOffset());
    if (testMethodStructure != null) {
      AbstractQUnitModuleStructure ms=testMethodStructure.getModuleStructure();
      if (ms instanceof QUnitModuleStructure) {
        return (QUnitModuleStructure)ms;
      }
    }
    QUnitModuleStructure moduleStructure=fileStructure.findModuleStructureContainingOffset(context.getDocumentCaretOffset());
    if (moduleStructure != null) {
      return moduleStructure;
    }
  }
  return null;
}
