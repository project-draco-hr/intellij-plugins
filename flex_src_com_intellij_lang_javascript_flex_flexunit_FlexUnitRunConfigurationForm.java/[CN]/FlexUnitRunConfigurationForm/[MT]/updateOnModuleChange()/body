{
  try {
    final Pair<Module,FlexUnitSupport> moduleAndSupport=FlexUnitRunConfiguration.getFlexUnitSupport(myProject,getSelectedModuleName());
    final GlobalSearchScope scope=GlobalSearchScope.moduleScope(moduleAndSupport.first);
    myClassField.setScope(scope);
    myMainClassFilter.setSupport(moduleAndSupport.second);
    myClassField.setChooserBlockingMessage(null);
    myPackageField.setScope(scope);
    myPackageField.setChooserBlockingMessage(null);
  }
 catch (  RuntimeConfigurationError error) {
    myClassField.setScope(GlobalSearchScope.EMPTY_SCOPE);
    myMainClassFilter.setSupport(null);
    myClassField.setChooserBlockingMessage(error.getMessage());
    myPackageField.setScope(GlobalSearchScope.EMPTY_SCOPE);
    myPackageField.setChooserBlockingMessage(error.getMessage());
  }
}
