{
  if (StringUtil.isEmpty(myClassField.getText())) {
    Messages.showInfoMessage(getProject(),ExecutionBundle.message("set.class.name.message"),ExecutionBundle.message("choose.test.method.dialog.title"));
    return null;
  }
  final Pair<Module,FlexUnitSupport> supportForModule;
  try {
    supportForModule=FlexUnitRunConfiguration.getFlexUnitSupport(myProject,getSelectedModuleName());
  }
 catch (  RuntimeConfigurationError e) {
    Messages.showErrorDialog(getProject(),e.getMessage(),ExecutionBundle.message("choose.test.method.dialog.title"));
    return null;
  }
  final PsiElement clazz=JSResolveUtil.findClassByQName(myClassField.getText(),GlobalSearchScope.moduleScope(supportForModule.first));
  if (!(clazz instanceof JSClass)) {
    Messages.showErrorDialog(getProject(),FlexBundle.message("class.not.found",myClassField.getText()),ExecutionBundle.message("choose.test.method.dialog.title"));
    return null;
  }
  FlexMethodChooserDialog dialog=new FlexMethodChooserDialog((JSClass)clazz,new Condition<JSFunction>(){
    public boolean value(    JSFunction jsFunction){
      return supportForModule.second.isTestMethod(jsFunction);
    }
  }
,getComponent(),myMethodField.getText());
  dialog.show();
  if (dialog.isOK()) {
    final JSFunction method=dialog.getSelectedMethod();
    return method != null ? method.getName() : null;
  }
 else {
    return null;
  }
}
