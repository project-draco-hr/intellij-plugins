{
  final SdkEntry currentSdk=mySdkPanel.getCurrentSdk();
  final String sdkHome=currentSdk == null ? null : currentSdk.getHomePath();
  final String playerFolderPath=sdkHome == null ? null : sdkHome + "/frameworks/libs/player";
  if (playerFolderPath != null) {
    final VirtualFile playerFolder=ApplicationManager.getApplication().runWriteAction(new NullableComputable<VirtualFile>(){
      public VirtualFile compute(){
        final VirtualFile playerFolder=LocalFileSystem.getInstance().refreshAndFindFileByPath(playerFolderPath);
        if (playerFolder != null && playerFolder.isDirectory()) {
          playerFolder.refresh(false,true);
          return playerFolder;
        }
        return null;
      }
    }
);
    if (playerFolder != null) {
      final Collection<String> availablePlayers=new ArrayList<String>(2);
      for (      final VirtualFile subDir : playerFolder.getChildren()) {
        if (subDir.isDirectory() && subDir.findChild("playerglobal.swc") != null && PLAYER_FOLDER_PATTERN.matcher(subDir.getName()).matches()) {
          availablePlayers.add(subDir.getName());
        }
      }
      final Object selectedItem=myTargetPlayerCombo.getSelectedItem();
      myTargetPlayerCombo.setModel(new DefaultComboBoxModel(availablePlayers.toArray(new String[availablePlayers.size()])));
      if (selectedItem != null) {
        myTargetPlayerCombo.setSelectedItem(selectedItem);
      }
    }
  }
}
