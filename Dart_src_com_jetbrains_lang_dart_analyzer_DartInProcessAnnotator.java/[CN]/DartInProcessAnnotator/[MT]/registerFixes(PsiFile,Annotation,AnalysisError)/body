{
  final ErrorCode errorCode=error.getErrorCode();
  final String errorMessage=error.getMessage();
  final ErrorSeverity errorSeverity=errorCode.getErrorSeverity();
  if (!errorSeverity.equals(ErrorSeverity.WARNING))   return;
  List<? extends IntentionAction> fixes=Collections.emptyList();
  final DartWarningCode resolverErrorCode=DartWarningCode.findError(errorCode.toString());
  if (resolverErrorCode != null) {
    fixes=resolverErrorCode.getFixes(psiFile,error.getOffset(),errorMessage);
  }
  if (!fixes.isEmpty()) {
    PsiElement element=psiFile.findElementAt(error.getOffset() + error.getLength() / 2);
    while (element != null && ((annotation.getStartOffset() < element.getTextOffset()) || annotation.getEndOffset() > element.getTextRange().getEndOffset())) {
      element=element.getParent();
    }
    if (element != null && (annotation.getStartOffset() != element.getTextRange().getStartOffset() || annotation.getEndOffset() != element.getTextRange().getEndOffset())) {
      element=null;
    }
    for (    IntentionAction intentionAction : fixes) {
      if (intentionAction instanceof FixAndIntentionAction) {
        ((FixAndIntentionAction)intentionAction).setElement(element);
      }
      annotation.registerFix(intentionAction);
    }
  }
}
