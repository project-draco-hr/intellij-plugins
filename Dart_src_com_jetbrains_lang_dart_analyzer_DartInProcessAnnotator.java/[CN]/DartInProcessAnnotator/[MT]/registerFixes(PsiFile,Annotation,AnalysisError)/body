{
  List<? extends IntentionAction> fixes=Collections.emptyList();
  final ErrorCode errorCode=error.getErrorCode();
  final String errorMessage=error.getMessage();
switch (errorCode.getType()) {
case STATIC_WARNING:
    final DartResolverErrorCode resolverErrorCode=DartResolverErrorCode.findError(errorCode.toString());
  if (resolverErrorCode != null) {
    fixes=resolverErrorCode.getFixes(psiFile,error.getOffset(),errorMessage);
  }
break;
case STATIC_TYPE_WARNING:
case COMPILE_TIME_ERROR:
final DartTypeErrorCode typeErrorCode=DartTypeErrorCode.findError(errorCode.toString());
if (typeErrorCode != null) {
fixes=typeErrorCode.getFixes(psiFile,error.getOffset(),errorMessage);
}
break;
}
if (!fixes.isEmpty()) {
PsiElement element=psiFile.findElementAt(error.getOffset() + error.getLength() / 2);
while (element != null && ((annotation.getStartOffset() < element.getTextOffset()) || annotation.getEndOffset() > element.getTextRange().getEndOffset())) {
element=element.getParent();
}
if (element != null && (annotation.getStartOffset() != element.getTextRange().getStartOffset() || annotation.getEndOffset() != element.getTextRange().getEndOffset())) {
element=null;
}
for (IntentionAction intentionAction : fixes) {
if (intentionAction instanceof FixAndIntentionAction) {
((FixAndIntentionAction)intentionAction).setElement(element);
}
annotation.registerFix(intentionAction);
}
}
}
