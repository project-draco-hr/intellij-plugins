{
  final String replacementText=sourceEdit.getReplacement();
  final int initialOffset=sourceEdit.getOffset();
  final List<SuggestionInfo> suggestions=extractSuggestions(linkedEditGroups);
  int currentInsertOffset=0;
  for (  SuggestionInfo suggestion : suggestions) {
    final String text=replacementText.substring(currentInsertOffset,suggestion.getOffset() - initialOffset);
    template.addTextSegment(text);
    template.addVariable(new DartLookupExpression(suggestion),true);
    currentInsertOffset+=text.length() + suggestion.getDefaultValue().length();
  }
  if (currentInsertOffset < replacementText.length()) {
    final String text=replacementText.substring(currentInsertOffset);
    template.addTextSegment(text);
  }
}
