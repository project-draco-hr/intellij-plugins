{
  return new StreamEventHandler(){
    @NotNull @Override public String getEventType(){
      return "configFilePatterns";
    }
    @Override public void handle(    @NotNull JsonElement eventBody){
      JsonArray patterns=eventBody.getAsJsonArray();
      final List<String> paths=ContainerUtil.newArrayListWithCapacity(patterns.size());
      for (      JsonElement pattern : patterns) {
        JsonPrimitive p=pattern.getAsJsonPrimitive();
        paths.add(p.getAsString());
      }
      ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
        @Override public void run(){
          mySession=new KarmaWatchSession(myServer,paths);
        }
      }
);
    }
  }
;
}
