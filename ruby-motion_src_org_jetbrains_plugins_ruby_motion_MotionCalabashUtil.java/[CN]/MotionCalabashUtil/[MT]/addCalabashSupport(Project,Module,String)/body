{
  AppUIUtil.invokeLaterIfProjectAlive(project,new Runnable(){
    public void run(){
      try {
        final boolean hadGemfile=addToGemfile(applicationHomePath);
        if (!hadGemfile) {
          addToRakefile(applicationHomePath);
        }
        ModuleGemInfrastructure.getInstance(module).updateModuleGemset();
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
);
}
