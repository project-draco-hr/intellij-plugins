{
  if (document == null)   return;
  for (  XmlTag tag : PsiTreeUtil.getChildrenOfTypeAsList(document,XmlTag.class)) {
    new XmlBackedJSClassImpl.InjectedScriptsVisitor(tag,null,true,true,visitor,true){
      @Override public boolean execute(      @NotNull PsiElement element){
        if (element instanceof HtmlEmbeddedContentImpl) {
          processDocument(visitor,PsiTreeUtil.findChildOfType(element,XmlDocument.class));
        }
        return super.execute(element);
      }
    }
.go();
  }
}
