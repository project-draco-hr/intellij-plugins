{
  final Object selectedItem=myFlexSdkComboBox.getSelectedItem();
  if (selectedItem != myLastCommittedFlexSdk) {
    if (selectedItem instanceof Sdk) {
      final ModifiableRootModel modifiableRootModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
      setFlexSdk((Sdk)selectedItem,modifiableRootModel);
      modifiableRootModel.commit();
      applyAutogeneratedLibraryAndUpdateUI();
    }
 else {
      myFlexSdk=null;
      myFlexSdkName=selectedItem == null ? "" : selectedItem.toString();
    }
  }
  if (!myLastCommittedTargetPlayerVersion.equals(myFlexBuildConfiguration.TARGET_PLAYER_VERSION)) {
    if (TargetPlayerUtils.needToChangeSdk(myFlexSdk,myFlexBuildConfiguration.TARGET_PLAYER_VERSION)) {
      final Sdk newSdk=TargetPlayerUtils.findOrCreateProperSdk(myModule.getProject(),myFlexSdk,myFlexBuildConfiguration.TARGET_PLAYER_VERSION);
      if (newSdk != null) {
        final ModifiableRootModel modifiableRootModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
        setFlexSdk(newSdk,modifiableRootModel);
        modifiableRootModel.commit();
        applyAutogeneratedLibraryAndUpdateUI();
      }
    }
  }
}
