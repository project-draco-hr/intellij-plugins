{
  super(false,true);
  final StatusBar statusBar=new StatusBar(MessageBundle.getBundle());
  final CapturedBrowsersPanel capturedBrowsersPanel=new CapturedBrowsersPanel();
  myCaptureUrlTextField=createCaptureUrlTextField();
  ActionToolbar actionToolbar=createActionToolbar();
  setToolbar(actionToolbar.getComponent());
  final Pair<JPanel,ActionToolbar> captureUrlInfo=createCaptureUrlInfo(myCaptureUrlTextField);
  List<ServerListener> myServerListeners=Arrays.asList(statusBar,capturedBrowsersPanel,new LocalManager(new ActionToolbar[]{actionToolbar,captureUrlInfo.second},myCaptureUrlTextField));
  for (  ServerListener serverListener : myServerListeners) {
    if (SHARED_STATE.isServerRunning()) {
      serverListener.serverStarted();
      for (      BrowserInfo browserInfo : SHARED_STATE.getCapturedBrowsers()) {
        serverListener.browserCaptured(browserInfo);
      }
    }
 else {
      serverListener.serverStopped();
    }
    SHARED_STATE.addServerListener(serverListener);
  }
  setBackground(UIUtil.getTreeTextBackground());
  JPanel content=new JPanel(){
{
      setLayout(new BoxLayout(this,BoxLayout.Y_AXIS));
      statusBar.setBorder(BorderFactory.createLineBorder(Color.GRAY));
      add(statusBar);
      JPanel captureUrlPanel=captureUrlInfo.first;
      captureUrlPanel.setBorder(BorderFactory.createEmptyBorder(0,5,10,0));
      add(captureUrlPanel);
      add(capturedBrowsersPanel);
    }
  }
;
  setContent(minimizeHeight(content));
}
