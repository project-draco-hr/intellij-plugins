{
  final boolean[] result=new boolean[]{false};
  final Set<VirtualFile> configured=new HashSet<VirtualFile>();
  TreeUtil.traverse((TreeNode)getModel().getRoot(),new TreeUtil.Traverse(){
    public boolean accept(    final Object node){
      final CheckedTreeNode checkedTreeNode=(CheckedTreeNode)node;
      if (!checkedTreeNode.isChecked()) {
        return true;
      }
      final Object object=checkedTreeNode.getUserObject();
      VirtualFile virtualFile=null;
      if (object instanceof XmlFile) {
        virtualFile=((XmlFile)object).getVirtualFile();
      }
 else       if (object instanceof VirtualFile) {
        virtualFile=(VirtualFile)object;
      }
      if (virtualFile != null) {
        if (!fileSet.hasFile(virtualFile)) {
          result[0]=true;
          fileSet.addFile(virtualFile);
        }
        configured.add(virtualFile);
      }
      return true;
    }
  }
);
  for (Iterator<VirtualFilePointer> i=fileSet.getFiles().iterator(); i.hasNext(); ) {
    final VirtualFilePointer pointer=i.next();
    final VirtualFile file=pointer.getFile();
    if (file == null || !configured.contains(file)) {
      result[0]=true;
      i.remove();
    }
  }
}
