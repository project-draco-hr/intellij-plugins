{
  while (true) {
    int tagCodeAndLength=buffer.getShort();
    int type=tagCodeAndLength >> 6;
    int length=tagCodeAndLength & 0x3F;
    if (length == 63) {
      length=buffer.getInt();
    }
switch (type) {
case TagTypes.End:
      return;
case TagTypes.DoABC2:
    String name=readAbcName(buffer.position() + 4);
  if (abcNameFilter.accept(name)) {
    buffer.position(buffer.position() - 6);
    buffer.limit(buffer.position() + length + 6);
    outputFileChannel.write(buffer);
    buffer.limit(buffer.capacity());
    continue;
  }
default :
buffer.position(buffer.position() + length);
}
}
}
