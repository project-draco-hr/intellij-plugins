{
  DartSdk sdk=DartSdk.getDartSdk(getEnvironment().getProject());
  if (sdk == null) {
    throw new ExecutionException(DartBundle.message("dart.sdk.is.not.configured"));
  }
  FlutterRunnerParameters params=(FlutterRunnerParameters)myRunnerParameters;
  String flutterSdkPath=params.getFlutterSdkPath();
  flutterSdkPath=verifyFlutterSdk(flutterSdkPath);
  VirtualFile projectDir=flutterProjectDir(params.getFilePath());
  String workingDir=projectDir.getCanonicalPath();
  String flutterExec=pathToFlutter(flutterSdkPath);
  final GeneralCommandLine commandLine=new GeneralCommandLine().withWorkDirectory(workingDir);
  commandLine.setCharset(CharsetToolkit.UTF8_CHARSET);
  commandLine.setExePath(FileUtil.toSystemDependentName(flutterExec));
  commandLine.getEnvironment().putAll(myRunnerParameters.getEnvs());
  commandLine.withParentEnvironmentType(myRunnerParameters.isIncludeParentEnvs() ? GeneralCommandLine.ParentEnvironmentType.CONSOLE : GeneralCommandLine.ParentEnvironmentType.NONE);
  commandLine.addParameter("logs");
  commandLine.addParameter("--clear");
  return commandLine;
}
