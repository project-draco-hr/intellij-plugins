{
  this.indicator=indicator;
  try {
    Throwable error=null;
    File startupErrorFile=new File(DesignerApplicationManager.APP_DIR,"startup-error.txt");
    if (startupErrorFile.exists()) {
      startupErrorFile.delete();
    }
    try {
      doRun(indicator);
    }
 catch (    Throwable e) {
      error=e;
    }
    if (error != null || indicator.isCanceled()) {
      if (!DesignerApplicationManager.getInstance().isApplicationClosed()) {
        DesignerApplicationManager.getInstance().disposeApplication();
      }
      if (initializeThread != null) {
        initializeThread.cancel(true);
        initializeThread=null;
      }
      semaphore.up();
    }
    if (error != null && !(error instanceof ProcessCanceledException)) {
      LOG.error(error);
    }
  }
  finally {
    postTask.end();
  }
}
