{
  builder.setTitle(IdeBundle.message("action.create.new.class"));
  for (  FileTemplate fileTemplate : DartFileTemplateUtil.getApplicableTemplates()) {
    final String templateName=fileTemplate.getName();
    final String shortName=DartFileTemplateUtil.getTemplateShortName(templateName);
    final Icon icon=DartFileTemplateUtil.getTemplateIcon(templateName);
    builder.addKind(shortName,icon,templateName);
  }
  builder.setValidator(new InputValidatorEx(){
    @Override public String getErrorText(    String inputString){
      if (inputString.length() > 0 && !StringUtil.isJavaIdentifier(inputString)) {
        return "This is not a valid Dart name";
      }
      return null;
    }
    @Override public boolean checkInput(    String inputString){
      return true;
    }
    @Override public boolean canClose(    String inputString){
      return !StringUtil.isEmptyOrSpaces(inputString) && getErrorText(inputString) == null;
    }
  }
);
}
