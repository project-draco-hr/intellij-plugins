{
  if (StringUtil.isEmpty(moduleName)) {
    throw new RuntimeConfigurationError(FlexBundle.message("module.not.specified"));
  }
  final Module module=ModuleManager.getInstance(project).findModuleByName(moduleName);
  if (module == null) {
    throw new RuntimeConfigurationError(FlexBundle.message("module.not.found",moduleName));
  }
  if (ModuleType.get(module) != FlexModuleType.getInstance()) {
    throw new RuntimeConfigurationError(FlexBundle.message("not.flex.module.no.flex.facet",module.getName()));
  }
  if (FlexUtils.getSdkForActiveBC(module) == null) {
    final String s=(ModuleType.get(module) instanceof FlexModuleType ? "module " : "Flex facet(s) of module ") + module.getName();
    throw new RuntimeConfigurationError(FlexBundle.message("flex.sdk.not.set.for",s));
  }
  return module;
}
