{
  final Module module2=doCreateRealModuleIn("module2",myProject,FlexModuleType.getInstance());
  final Sdk sdk45=FlexTestUtils.createSdk(FlexTestUtils.getPathToCompleteFlexSdk("4.5"),null,false);
  final Sdk sdk46=FlexTestUtils.createSdk(FlexTestUtils.getPathToCompleteFlexSdk("4.6"),null,false);
  FlexTestUtils.modifyConfigs(myProject,new Consumer<FlexProjectConfigurationEditor>(){
    @Override public void consume(    final FlexProjectConfigurationEditor e){
      ModifiableFlexBuildConfiguration bc1=e.getConfigurations(myModule)[0];
      FlexTestUtils.setSdk(bc1,sdk46);
      ModifiableFlexBuildConfiguration bc2=e.getConfigurations(module2)[0];
      bc2.setOutputType(OutputType.Library);
      FlexTestUtils.setSdk(bc2,sdk45);
      bc1.getDependencies().getModifiableEntries().add(e.createBcEntry(bc1.getDependencies(),bc2,null));
    }
  }
);
  myAfterCommitRunnable=new Runnable(){
    @Override public void run(){
      copyFileToModule(module2,getTestDataPath() + BASE_PATH + getTestName(false)+ "_2.js2");
    }
  }
;
  doTestFor(true,getTestName(false) + ".js2");
}
