{
  JSReferenceExpression refExpr=PsiTreeUtil.getParentOfType(at,JSReferenceExpression.class);
  final PsiElement resolve=refExpr != null ? refExpr.resolve() : at.getParent();
  assertNotNull(resolve);
  final CommonProcessors.CollectUniquesProcessor<PsiElement> processor=new CommonProcessors.CollectUniquesProcessor<PsiElement>();
  DefinitionsScopedSearch.INSTANCE.createQuery(new DefinitionsScopedSearch.SearchParameters(resolve)).forEach(processor);
  assertEquals(status,TargetElementUtil.getInstance().includeSelfInGotoImplementation(resolve));
  assertEquals(num,processor.getResults().size());
  if (num == 0)   return null;
  final PsiElement element=processor.getResults().iterator().next();
  assertTrue(destinationClazz.isInstance(element));
  return element;
}
