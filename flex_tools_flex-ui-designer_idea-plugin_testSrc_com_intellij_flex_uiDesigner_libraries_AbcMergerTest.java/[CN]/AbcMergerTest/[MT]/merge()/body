{
  final THashMap<CharSequence,Definition> definitionMap=new THashMap<CharSequence,Definition>(AbcTranscoder.HASHING_STRATEGY);
  final Set<CharSequence> globalDefinitions=LibraryUtil.getDefinitions(LibraryUtil.getTestGlobalLibrary(false));
  final AbcMerger abcMerger=new AbcMerger(definitionMap,out,null);
  final Pair<CharArrayReader,ByteArrayInputStream> data=LibraryUtil.openSwc(new File(DesignerTests.getTestDataPath(),"lib/MinimalComps_0_9_10.swc"));
  NanoXmlUtil.parse(data.first,new CatalogXmlBuilder(definitionMap,new Condition<String>(){
    @Override public boolean value(    String name){
      return globalDefinitions.contains(name);
    }
  }
));
  abcMerger.process(data.second);
  abcMerger.close();
}
