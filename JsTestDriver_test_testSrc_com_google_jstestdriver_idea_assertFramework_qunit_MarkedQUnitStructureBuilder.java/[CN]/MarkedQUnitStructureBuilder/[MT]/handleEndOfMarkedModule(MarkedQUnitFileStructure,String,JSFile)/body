{
  Matcher moduleEndMatcher=MODULE_END_PATTERN.matcher(fileText);
  while (moduleEndMatcher.find()) {
    Annotation endAnnotation=Annotation.fromMatcher(moduleEndMatcher);
    int moduleId=endAnnotation.getPositiveIntId();
    MarkedQUnitModuleStructure markedQUnitModuleStructure=markedQUnitFileStructure.findById(moduleId);
    if (markedQUnitModuleStructure == null) {
      throw new RuntimeException("'" + moduleEndMatcher.group() + "' references undefined module");
    }
    markedQUnitModuleStructure.endAnnotationEncountered(TextRange.create(moduleEndMatcher.start(),moduleEndMatcher.end()),jsFile);
  }
}
