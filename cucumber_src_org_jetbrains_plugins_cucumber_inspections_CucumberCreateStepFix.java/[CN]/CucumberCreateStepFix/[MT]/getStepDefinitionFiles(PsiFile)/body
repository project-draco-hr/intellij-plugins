{
  final List<PsiDirectory> stepDefsRoots=new ArrayList<PsiDirectory>();
  PsiDirectory dir=findStepDefinitionDirectory(featureFile);
  if (dir != null) {
    stepDefsRoots.add(dir);
  }
  CucumberStepsIndex.getInstance(featureFile.getProject()).findRelatedStepDefsRoots(featureFile,stepDefsRoots,false);
  final List<PsiFile> stepDefs=new ArrayList<PsiFile>();
  for (  PsiDirectory root : stepDefsRoots) {
    stepDefs.addAll(CucumberStepsIndex.getInstance(featureFile.getProject()).gatherStepDefinitionsFilesFromDirectory(root));
  }
  return !stepDefs.isEmpty() ? stepDefs : Collections.<PsiFile>emptyList();
}
