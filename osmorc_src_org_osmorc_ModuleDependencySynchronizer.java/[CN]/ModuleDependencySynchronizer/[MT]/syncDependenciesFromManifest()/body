{
  OsmorcFacet facet=OsmorcFacet.getInstance(myModule);
  if (facet != null && facet.getConfiguration().isManifestManuallyEdited()) {
    myApplication.invokeAndWait(new Runnable(){
      public void run(){
        final ModifiableRootModel model=myModuleRootManager.getModifiableModel();
        Set<Object> newDependencies=myBundleManager.resolveDependenciesOf(myModule);
        List<OrderEntry> oldOrderEntries=determineOldModuleDependencies(model);
        List<OrderEntry> obsoleteOrderEntries=determineObsoleteModuleDependencies(oldOrderEntries,newDependencies);
        boolean commitNeeded=false;
        commitNeeded|=removeDependenciesFrom(model,obsoleteOrderEntries);
        commitNeeded|=addNewModuleDependencies(model,newDependencies);
        commitNeeded|=checkAndSetReexport(model,newDependencies);
        if (commitNeeded) {
          myApplication.runWriteAction(new Runnable(){
            @Override public void run(){
              model.commit();
            }
          }
);
        }
 else {
          model.dispose();
        }
      }
    }
,ModalityState.NON_MODAL);
  }
}
