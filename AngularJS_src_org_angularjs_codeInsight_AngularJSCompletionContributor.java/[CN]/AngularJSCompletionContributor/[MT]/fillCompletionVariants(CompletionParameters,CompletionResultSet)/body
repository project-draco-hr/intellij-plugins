{
  if (!getElementLanguage(parameters).is(AngularJSLanguage.INSTANCE))   return;
  PsiReference ref=parameters.getPosition().getContainingFile().findReferenceAt(parameters.getOffset());
  if (ref instanceof JSReferenceExpressionImpl) {
    final JavaScriptCompletionData.JSInsertHandler insertHandler=new JavaScriptCompletionData.JSInsertHandler();
    AngularJSProcessor.process(parameters.getPosition(),new Consumer<JSNamedElement>(){
      @Override public void consume(      JSNamedElement element){
        result.consume(LookupElementBuilder.createWithIcon(element).withInsertHandler(insertHandler));
      }
    }
);
  }
}
