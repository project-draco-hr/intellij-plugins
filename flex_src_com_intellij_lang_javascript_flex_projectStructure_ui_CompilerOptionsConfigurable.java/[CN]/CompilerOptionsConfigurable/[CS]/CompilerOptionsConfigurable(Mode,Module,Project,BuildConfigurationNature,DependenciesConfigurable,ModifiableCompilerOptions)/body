{
  myMode=mode;
  myModule=module;
  myProject=project;
  myNature=nature;
  myDependenciesConfigurable=dependenciesConfigurable;
  myName=myMode == Mode.BC ? FlexBundle.message("compiler.options.title") : myMode == Mode.Module ? FlexBundle.message("default.compiler.options.for.module.title",module.getName()) : FlexBundle.message("default.compiler.options.for.project.title",project.getName());
  myBCManager=myMode == Mode.BC ? FlexBuildConfigurationManager.getInstance(module) : null;
  myProjectLevelOptionsHolder=FlexProjectLevelCompilerOptionsHolder.getInstance(project);
  myModel=model;
  myCurrentOptions=new THashMap<String,String>();
  myFilesToIncludeInSWC=Collections.emptyList();
  myShowAllOptionsCheckBox.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      updateTreeTable();
    }
  }
);
  myInheritModuleDefaultsLegend.setVisible(myMode == Mode.BC);
  myInheritProjectDefaultsLegend.setVisible(myMode == Mode.BC || myMode == Mode.Module);
  myResourcesPanel.setVisible(myMode == Mode.BC && BCUtils.canHaveResourceFiles(myNature));
  myCopyResourceFilesCheckBox.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      updateResourcesControls();
    }
  }
);
  myResourcePatternsHyperlink.addHyperlinkListener(new HyperlinkAdapter(){
    protected void hyperlinkActivated(    final HyperlinkEvent e){
      ShowSettingsUtil.getInstance().editConfigurable(project,new CompilerUIConfigurable(module.getProject()));
    }
  }
);
  myIncludeInSWCPanel.setVisible(myMode == Mode.BC && myNature.isLib());
  myIncludeInSWCField.getTextField().setEditable(false);
  myIncludeInSWCField.setButtonIcon(PlatformIcons.OPEN_EDIT_DIALOG_ICON);
  myIncludeInSWCField.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      final List<StringBuilder> value=new ArrayList<StringBuilder>();
      for (      String path : myFilesToIncludeInSWC) {
        value.add(new StringBuilder(path));
      }
      final RepeatableValueDialog dialog=new RepeatableValueDialog(module.getProject(),FlexBundle.message("items.to.include.in.swc.dialog.title"),value,CompilerOptionInfo.INCLUDE_FILE_INFO_FOR_UI);
      dialog.show();
      if (dialog.isOK()) {
        final List<StringBuilder> newValue=dialog.getCurrentList();
        myFilesToIncludeInSWC=new ArrayList<String>(newValue.size());
        for (        StringBuilder path : newValue) {
          myFilesToIncludeInSWC.add(path.toString());
        }
        updateFilesToIncludeInSWCText();
      }
    }
  }
);
  initButtonsAndAdditionalOptions();
  myShowAllOptionsCheckBox.setSelected(true);
  myShowAllOptionsCheckBox.setVisible(false);
}
