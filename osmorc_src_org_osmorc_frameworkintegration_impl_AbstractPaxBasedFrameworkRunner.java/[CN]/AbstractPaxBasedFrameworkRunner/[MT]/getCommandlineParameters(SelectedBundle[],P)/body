{
  List<String> params=new ArrayList<String>();
  params.add("--p=" + getOsgiFrameworkName().toLowerCase());
  for (  SelectedBundle bundle : bundlesToInstall) {
    if (bundle.isStartAfterInstallation() && !CachingBundleInfoProvider.isFragmentBundle(bundle.getBundleUrl())) {
      params.add(bundle.getBundleUrl() + "@" + bundle.getStartLevel());
    }
 else {
      params.add(bundle.getBundleUrl());
    }
  }
  String bootDelegation=runProperties.getBootDelegation();
  if (bootDelegation != null && !(bootDelegation.trim().length() == 0)) {
    params.add("--bd");
    params.add(bootDelegation);
  }
  String systemPackages=runProperties.getSystemPackages();
  if (systemPackages != null && !(systemPackages.trim().length() == 0)) {
    params.add("--sp");
    params.add(systemPackages);
  }
  if (runProperties.isDebugMode()) {
    params.add("--log=DEBUG");
  }
  if (runProperties.isStartConsole()) {
    params.add("--console");
  }
 else {
    params.add("--noConsole");
  }
  return ArrayUtil.toStringArray(params);
}
