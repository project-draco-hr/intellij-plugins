{
  CompileContext context=session.getContext();
  final BuildDataPaths dataPaths=context.getProjectDescriptor().dataManager.getDataPaths();
  final MavenProjectConfiguration projectConfig=JpsMavenExtensionService.getInstance().getMavenProjectConfiguration(dataPaths);
  final Properties result=new Properties();
  session.getExtension().processAffectedModules(new Consumer<JpsModule>(){
    @Override public void consume(    JpsModule module){
      MavenModuleResourceConfiguration moduleConfig=projectConfig.moduleConfigurations.get(module.getName());
      if (moduleConfig != null) {
        result.putAll(moduleConfig.properties);
      }
    }
  }
);
  return result;
}
