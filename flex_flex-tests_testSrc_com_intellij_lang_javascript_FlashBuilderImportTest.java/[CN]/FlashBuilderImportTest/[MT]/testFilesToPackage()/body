{
  myFlashBuilderProjectDir.createChildDirectory(this,"src");
  final VirtualFile src2=myFlashBuilderProjectDir.createChildDirectory(this,"src2");
  FlexUtils.addFileWithContent("Main.as","",src2);
  FlexUtils.addFileWithContent("Main-app.xml","",src2);
  FlexUtils.addFileWithContent("excluded1.xml","",src2);
  FlexUtils.addFileWithContent("Main.xml","",src2);
  final VirtualFile sub1=src2.createChildDirectory(this,"sub1");
  FlexUtils.addFileWithContent("Foo.mxml","",sub1);
  FlexUtils.addFileWithContent("bar.properties","",sub1);
  FlexUtils.addFileWithContent("excluded2.txt","",sub1);
  final VirtualFile excludedFolder=sub1.createChildDirectory(this,"excluded_folder");
  FlexUtils.addFileWithContent("x.jpeg","",excludedFolder);
  final VirtualFile sub2=sub1.createChildDirectory(this,"sub2");
  sub2.createChildDirectory(this,".svn");
  FlexUtils.addFileWithContent("a.png","",sub2);
  final VirtualFile sub3=sub2.createChildDirectory(this,"sub3");
  FlexUtils.addFileWithContent("b.js","",sub3);
  final VirtualFile sub4=sub3.createChildDirectory(this,"sub4");
  FlexUtils.addFileWithContent("c.html","",sub4);
  final VirtualFile src3=myFlashBuilderProjectDir.createChildDirectory(this,"src3");
  final VirtualFile fooDir=src3.createChildDirectory(this,"foo");
  FlexUtils.addFileWithContent("bar.txt","",fooDir);
  importProject("<actionScriptProperties mainApplicationPath=\"Main.as\">\n" + "  <compiler sourceFolderPath=\"src\">" + "    <compilerSourcePath>\n"+ "      <compilerSourcePathEntry kind=\"1\" linkType=\"1\" path=\"src2\"/>\n"+ "      <compilerSourcePathEntry kind=\"1\" linkType=\"1\" path=\"src3\"/>\n"+ "    </compilerSourcePath>\n"+ "  </compiler>"+ "  <buildTargets>\n"+ "    <buildTarget buildTargetName='device' platformId=\"com.adobe.flexide.multiplatform.android.platform\">\n"+ "      <multiPlatformSettings enabled=\"true\"/>"+ "      <airSettings airCertificatePath=\"\" airTimestamp=\"true\" anePathSet=\"true\" version=\"1\">\n"+ "        <airExcludes>\n"+ "          <pathEntry path=\"excluded1.xml\"/>\n"+ "          <pathEntry path=\"sub1/excluded2.txt\"/>\n"+ "          <pathEntry path=\"sub1/excluded_folder\"/>\n"+ "        </airExcludes>\n"+ "      </airSettings>\n"+ "    </buildTarget>\n"+ "    <buildTarget buildTargetName=\"device\">\n"+ "      <multiPlatformSettings enabled=\"true\" platformID=\"com.adobe.flexide.multiplatform.ios.platform\"/>"+ "    </buildTarget>\n"+ "  </buildTargets>\n"+ "</actionScriptProperties>",myFlashBuilderProjectDir.getPath() + "/Flash_Builder_workspace");
  final FlexBuildConfiguration bc=getBC("Main",1);
  final List<AirPackagingOptions.FilePathAndPathInPackage> expectedAndroid=getExpectedPaths("src","src2/Main.xml","src2/sub1/sub2/a.png","src2/sub1/sub2/sub3","src3");
  final List<AirPackagingOptions.FilePathAndPathInPackage> expectedIos=getExpectedPaths("src","src2/Main.xml","src2/excluded1.xml","src2/sub1/excluded2.txt","src2/sub1/excluded_folder","src2/sub1/sub2/a.png","src2/sub1/sub2/sub3","src3");
  assertSameElements(bc.getAndroidPackagingOptions().getFilesToPackage(),expectedAndroid);
  assertSameElements(bc.getIosPackagingOptions().getFilesToPackage(),expectedIos);
}
