{
  createChildDirectory(myFlashBuilderProjectDir,"src");
  final VirtualFile src2=createChildDirectory(myFlashBuilderProjectDir,"src2");
  addFileWithContent("Main.as","",src2);
  addFileWithContent("Main-app.xml","",src2);
  addFileWithContent("excluded1.xml","",src2);
  addFileWithContent("Main.xml","",src2);
  final VirtualFile sub1=createChildDirectory(src2,"sub1");
  addFileWithContent("Foo.mxml","",sub1);
  addFileWithContent("bar.properties","",sub1);
  addFileWithContent("excluded2.txt","",sub1);
  final VirtualFile excludedFolder=createChildDirectory(sub1,"excluded_folder");
  addFileWithContent("x.jpeg","",excludedFolder);
  final VirtualFile sub2=createChildDirectory(sub1,"sub2");
  createChildDirectory(sub2,".svn");
  addFileWithContent("a.png","",sub2);
  final VirtualFile sub3=createChildDirectory(sub2,"sub3");
  addFileWithContent("b.js","",sub3);
  final VirtualFile sub4=createChildDirectory(sub3,"sub4");
  addFileWithContent("c.html","",sub4);
  final VirtualFile src3=createChildDirectory(myFlashBuilderProjectDir,"src3");
  final VirtualFile fooDir=createChildDirectory(src3,"foo");
  addFileWithContent("bar.txt","",fooDir);
  importProject("<actionScriptProperties mainApplicationPath=\"Main.as\">\n" + "  <compiler sourceFolderPath=\"src\">" + "    <compilerSourcePath>\n"+ "      <compilerSourcePathEntry kind=\"1\" linkType=\"1\" path=\"src2\"/>\n"+ "      <compilerSourcePathEntry kind=\"1\" linkType=\"1\" path=\"src3\"/>\n"+ "    </compilerSourcePath>\n"+ "  </compiler>"+ "  <buildTargets>\n"+ "    <buildTarget buildTargetName='device' platformId=\"com.adobe.flexide.multiplatform.android.platform\">\n"+ "      <multiPlatformSettings enabled=\"true\"/>"+ "      <airSettings airCertificatePath=\"\" airTimestamp=\"true\" anePathSet=\"true\" version=\"1\">\n"+ "        <airExcludes>\n"+ "          <pathEntry path=\"excluded1.xml\"/>\n"+ "          <pathEntry path=\"sub1/excluded2.txt\"/>\n"+ "          <pathEntry path=\"sub1/excluded_folder\"/>\n"+ "        </airExcludes>\n"+ "      </airSettings>\n"+ "    </buildTarget>\n"+ "    <buildTarget buildTargetName=\"device\">\n"+ "      <multiPlatformSettings enabled=\"true\" platformID=\"com.adobe.flexide.multiplatform.ios.platform\"/>"+ "    </buildTarget>\n"+ "  </buildTargets>\n"+ "</actionScriptProperties>",myFlashBuilderProjectDir.getPath() + "/Flash_Builder_workspace");
  final FlexBuildConfiguration bc=getBC("Main",1);
  final List<AirPackagingOptions.FilePathAndPathInPackage> expectedAndroid=getExpectedPaths("src","src2/Main.xml","src2/sub1/sub2/a.png","src2/sub1/sub2/sub3","src3");
  final List<AirPackagingOptions.FilePathAndPathInPackage> expectedIos=getExpectedPaths("src","src2/Main.xml","src2/excluded1.xml","src2/sub1/excluded2.txt","src2/sub1/excluded_folder","src2/sub1/sub2/a.png","src2/sub1/sub2/sub3","src3");
  assertSameElements(bc.getAndroidPackagingOptions().getFilesToPackage(),expectedAndroid);
  assertSameElements(bc.getIosPackagingOptions().getFilesToPackage(),expectedIos);
}
