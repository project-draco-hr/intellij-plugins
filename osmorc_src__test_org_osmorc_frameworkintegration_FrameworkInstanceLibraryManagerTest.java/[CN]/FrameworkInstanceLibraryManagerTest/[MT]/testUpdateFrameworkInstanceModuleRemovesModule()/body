{
  expect(osmorcFacetUtil.hasOsmorcFacet(EasyMock.not(same(module)))).andReturn(false).anyTimes();
  expect(osmorcFacetUtil.hasOsmorcFacet(same(module))).andReturn(true).once();
  expect(osmorcFacetUtil.hasOsmorcFacet(same(module))).andReturn(false).once();
  replay(osmorcFacetUtil);
  projectSettings.setCreateFrameworkInstanceModule(true);
  projectSettings.setFrameworkInstanceName("an Instance");
  myTestObject.updateFrameworkInstanceLibraries();
  module=ModuleManager.getInstance(project).findModuleByName(FrameworkInstanceLibraryManager.OsmorcControlledLibrariesPrefix);
  assertThat(module,notNullValue());
  myTestObject.updateFrameworkInstanceLibraries();
  Module module=ModuleManager.getInstance(project).findModuleByName(FrameworkInstanceLibraryManager.OsmorcControlledLibrariesPrefix);
  assertThat(module,nullValue());
  verify(osmorcFacetUtil);
}
