{
  MavenProject project=session.getCurrentProject();
  String packaging=project.getPackaging();
  if (!Utils.isFlashProject(project)) {
    return;
  }
  MojoExecution flexmojosMojoExecution=null;
  MojoExecution flexmojosGeneratorMojoExecution=null;
  for (  Plugin plugin : project.getBuildPlugins()) {
    if (plugin.getGroupId().equals("org.sonatype.flexmojos")) {
      if (flexmojosMojoExecution == null && plugin.getArtifactId().equals("flexmojos-maven-plugin")) {
        flexmojosMojoExecution=createMojoExecution(plugin,"compile-" + packaging,project);
      }
 else       if (flexmojosGeneratorMojoExecution == null && plugin.getArtifactId().equals("flexmojos-generator-mojo")) {
        flexmojosGeneratorMojoExecution=createMojoExecution(plugin,"generate",project);
      }
      if (flexmojosMojoExecution != null && flexmojosGeneratorMojoExecution != null) {
        break;
      }
    }
  }
  if (flexmojosGeneratorMojoExecution == null) {
    return;
  }
  final ClassRealm flexmojosPluginRealm;
  Mojo mojo=null;
  try {
    flexmojosPluginRealm=pluginManager.getPluginRealm(session,flexmojosMojoExecution.getMojoDescriptor().getPluginDescriptor());
    mojo=mavenPluginManager.getConfiguredMojo(Mojo.class,session,flexmojosMojoExecution);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
 finally {
    if (mojo != null) {
      mavenPluginManager.releaseMojo(mojo,mojoExecution);
    }
  }
  MethodComparator.class.getName();
  try {
    List<IdeaConfigurator> configurators=new ArrayList<IdeaConfigurator>(2);
    if (generateNonShareable) {
      configurators.add(new IdeaConfigurator(useOldLocation));
    }
    if (generateShareable) {
      configurators.add(new ShareableFlexConfigGenerator());
    }
    modifyOurClassRealm(flexmojosPluginRealm);
    for (    IdeaConfigurator configurator : configurators) {
      configurator.init(session,project,getClassifier(mojo,flexmojosPluginRealm),flexmojosGeneratorMojoExecution);
      if ("swc".equals(packaging)) {
        configurator.buildConfiguration(mojo,flexmojosPluginRealm.loadClass("org.sonatype.flexmojos.compiler.ICompcConfiguration"));
      }
 else {
        configurator.buildConfiguration(mojo,getSourceFileForSwf(mojo,flexmojosPluginRealm),flexmojosPluginRealm.loadClass("org.sonatype.flexmojos.compiler.ICommandLineConfiguration"));
      }
    }
  }
 catch (  Exception e) {
    throw new MojoExecutionException("Failed to execute configurator: " + e.getMessage(),e);
  }
}
