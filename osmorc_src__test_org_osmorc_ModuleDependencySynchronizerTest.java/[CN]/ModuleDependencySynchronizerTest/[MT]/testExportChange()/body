{
  ModuleManager moduleManager=ModuleManager.getInstance(fixture.getProject());
  final Module t7=moduleManager.findModuleByName("t7");
  final Module t8=moduleManager.findModuleByName("t8");
  assertThat(ModuleRootManager.getInstance(t7).getDependencies().length,equalTo(0));
  assertThat(ModuleRootManager.getInstance(t8).getDependencies().length,equalTo(0));
  replaceExportPackage(t8,"t8");
  Thread.sleep(100);
  assertThat(ModuleRootManager.getInstance(t7).getDependencies().length,equalTo(1));
  assertThat(Arrays.asList(ModuleRootManager.getInstance(t7).getDependencies()),hasItem(t8));
  assertThat(TestUtil.getOrderEntry(t8,t7).isExported(),equalTo(false));
  replaceExportPackage(t8,"t8.sub");
  Thread.sleep(100);
  assertThat(ModuleRootManager.getInstance(t7).getDependencies().length,equalTo(0));
}
