{
  List<String> params=new ArrayList<String>();
  params.add("-init");
  params.add("-launch");
  int level=1;
  for (  SelectedBundle bundle : bundlesToInstall) {
    int startLevel=bundle.getStartLevel();
    if (startLevel > level) {
      level=startLevel;
      params.add("-initlevel");
      params.add(String.valueOf(level));
    }
    params.add("-install");
    params.add(bundle.getBundleUrl());
    if (bundle.isStartAfterInstallation() && !CachingBundleInfoProvider.isFragmentBundle(bundle.getBundleUrl())) {
      params.add("-start");
      params.add(bundle.getBundleUrl());
    }
  }
  params.add("-startlevel");
  params.add(String.valueOf(level));
  return ArrayUtil.toStringArray(params);
}
