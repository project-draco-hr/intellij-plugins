{
  myProject=project;
  final Alarm myAlarm=new Alarm(Alarm.ThreadToUse.OWN_THREAD,myProject);
  messageBus.connect().subscribe(MyBundleManager.BUNDLE_INDEX_CHANGE_TOPIC,new BundleModificationListener(){
    @Override public void bundlesChanged(){
      if (isAtLeastOneModuleManuallyEdited()) {
        myAlarm.cancelAllRequests();
        myAlarm.addRequest(new Runnable(){
          @Override public void run(){
            final ProjectSettings settings=ProjectSettings.getInstance(myProject);
            if (settings.getManifestSynchronizationType() == ProjectSettings.ManifestSynchronizationType.ManuallySynchronize) {
              myNeedsResync.set(true);
              EditorNotifications.getInstance(myProject).updateAllNotifications();
            }
            if (settings.getManifestSynchronizationType() == ProjectSettings.ManifestSynchronizationType.AutomaticallySynchronize) {
              myNeedsResync.set(false);
              EditorNotifications.getInstance(myProject).updateAllNotifications();
              ModuleDependencySynchronizer.resynchronizeAll(myProject);
            }
          }
        }
,500);
      }
    }
  }
);
}
