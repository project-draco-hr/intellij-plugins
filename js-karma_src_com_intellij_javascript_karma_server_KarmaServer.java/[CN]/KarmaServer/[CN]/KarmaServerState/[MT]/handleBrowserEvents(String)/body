{
  Matcher matcherConnected=BROWSER_CONNECTED_LINE_PATTERN.matcher(text);
  if (matcherConnected.find()) {
    String browserName=matcherConnected.group(1);
    Integer cnt=myCapturedBrowsers.get(browserName);
    if (cnt == null) {
      cnt=0;
    }
    myCapturedBrowsers.put(browserName,cnt + 1);
    myKarmaServer.fireOnBrowserConnected(browserName);
  }
 else {
    Matcher matcherDisconnected=BROWSER_DISCONNECTED_LINE_PATTERN.matcher(text);
    if (matcherDisconnected.find()) {
      String browserName=matcherDisconnected.group(1);
      Integer cnt=myCapturedBrowsers.get(browserName);
      if (cnt == null) {
        LOG.warn("Too many disconnections for '" + browserName + "'");
      }
 else {
        cnt--;
        if (cnt == 0) {
          myCapturedBrowsers.remove(browserName);
        }
 else {
          myCapturedBrowsers.put(browserName,cnt);
        }
        myKarmaServer.fireOnBrowserDisconnected(browserName);
      }
    }
  }
}
