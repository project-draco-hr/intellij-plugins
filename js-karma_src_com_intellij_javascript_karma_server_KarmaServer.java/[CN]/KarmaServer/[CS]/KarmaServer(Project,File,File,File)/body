{
  myNodeInterpreter=nodeInterpreter;
  myKarmaPackageDir=karmaPackageDir;
  myKarmaJsSourcesLocator=new KarmaJsSourcesLocator(karmaPackageDir);
  KillableColoredProcessHandler processHandler=startServer(nodeInterpreter,configurationFile);
  myProcessHashCode=System.identityHashCode(processHandler.getProcess());
  myState=new KarmaServerState(this,processHandler,configurationFile);
  myProcessOutputArchive=new ProcessOutputArchive(processHandler);
  myWatcher=new KarmaWatcher(this);
  registerStreamEventHandlers();
  myProcessOutputArchive.startNotify();
  myDisposable=new MyDisposable();
  Disposer.register(project,myDisposable);
  myRestarter=new KarmaServerRestarter(configurationFile,myDisposable);
}
