{
  final PsiElement[] children=context.getChildren();
  final Set<DartComponentName> result=DartControlFlowUtil.getSimpleDeclarations(children,lastParent,context instanceof DartStatements);
  for (  PsiElement child : children) {
    if (child instanceof DartFormalParameterList) {
      final DartFormalParameterList formalParameterList=(DartFormalParameterList)child;
      final List<DartNormalFormalParameter> normalFormalParameterList=formalParameterList.getNormalFormalParameterList();
      final DartNamedFormalParameters namedFormalParameters=formalParameterList.getNamedFormalParameters();
      if (namedFormalParameters != null) {
        normalFormalParameterList.addAll(ContainerUtil.map(namedFormalParameters.getDefaultFormalNamedParameterList(),new Function<DartDefaultFormalNamedParameter,DartNormalFormalParameter>(){
          @Override public DartNormalFormalParameter fun(          DartDefaultFormalNamedParameter parameter){
            return parameter.getNormalFormalParameter();
          }
        }
));
      }
      for (      DartNormalFormalParameter parameter : normalFormalParameterList) {
        final DartComponentName componentName=parameter.findComponentName();
        if (componentName != null) {
          result.add(componentName);
        }
      }
    }
    if (child instanceof DartTypeParameters) {
      for (      DartTypeParameter typeParameter : ((DartTypeParameters)child).getTypeParameterList()) {
        result.add(typeParameter.getComponentName());
      }
    }
    if (child instanceof DartImportStatement) {
      ContainerUtil.addIfNotNull(result,((DartImportStatement)child).getImportPrefix());
    }
    if (child instanceof DartCatchPart) {
      result.addAll(((DartCatchPart)child).getComponentNameList());
    }
  }
  if (context instanceof DartForStatement) {
    final DartForLoopPartsInBraces loopPartsInBraces=((DartForStatement)context).getForLoopPartsInBraces();
    final DartForLoopParts loopParts=loopPartsInBraces == null ? null : loopPartsInBraces.getForLoopParts();
    final DartForInPart forInPart=loopParts == null ? null : loopParts.getForInPart();
    final DartComponentName componentName=forInPart == null ? null : forInPart.getComponentName();
    if (componentName != null) {
      result.add(componentName);
    }
    final DartVarAccessDeclaration varDeclaration=forInPart == null ? null : forInPart.getVarAccessDeclaration();
    if (varDeclaration != null) {
      result.add(varDeclaration.getComponentName());
    }
    final DartVarDeclarationList varDeclarationList=loopParts == null ? null : loopParts.getVarDeclarationList();
    if (varDeclarationList != null) {
      DartControlFlowUtil.addFromVarDeclarationList(result,varDeclarationList);
    }
  }
  return result;
}
