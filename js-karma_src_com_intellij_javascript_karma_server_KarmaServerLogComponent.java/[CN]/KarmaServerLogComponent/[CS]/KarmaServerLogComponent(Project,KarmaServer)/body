{
  myKarmaServer=karmaServer;
  myProcessEventStore=karmaServer.getProcessEventStore();
  GlobalSearchScope scope=GlobalSearchScope.allScope(project);
  TextConsoleBuilderImpl builder=new TextConsoleBuilderImpl(project,scope);
  builder.setUsePredefinedMessageFilter(false);
  myConsole=builder.getConsole();
  if (myConsole == null) {
    throw new RuntimeException("Console shouldn't be null!");
  }
  ProcessAdapter processListener=new ProcessAdapter(){
    @Override public void onTextAvailable(    ProcessEvent event,    Key outputType){
      myConsole.print(event.getText(),ConsoleViewContentType.getConsoleViewType(outputType));
    }
  }
;
  myProcessEventStore.addProcessListener(processListener);
}
