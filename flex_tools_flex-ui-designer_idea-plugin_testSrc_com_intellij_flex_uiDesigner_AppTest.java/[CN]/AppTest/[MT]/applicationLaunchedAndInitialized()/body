{
  ((MySocketInputHandler)SocketInputHandler.getInstance()).fail=fail;
  ((MySocketInputHandler)SocketInputHandler.getInstance()).semaphore=semaphore;
  MessageBusConnection connection=ApplicationManager.getApplication().getMessageBus().connect(myModule);
  connection.subscribe(SocketInputHandler.MESSAGE_TOPIC,new SocketInputHandler.DocumentRenderedListener(){
    @Override public void documentRenderedOnAutoSave(    DocumentInfo info){
      semaphore.up();
    }
    @Override public void errorOccured(){
      fail.set(true);
      semaphore.up();
    }
  }
);
}
