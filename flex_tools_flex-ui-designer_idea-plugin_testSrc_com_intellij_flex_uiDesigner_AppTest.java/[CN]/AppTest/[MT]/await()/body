{
  semaphore.waitForUnsafe();
  if (fail.get()) {
    fail();
  }
}
