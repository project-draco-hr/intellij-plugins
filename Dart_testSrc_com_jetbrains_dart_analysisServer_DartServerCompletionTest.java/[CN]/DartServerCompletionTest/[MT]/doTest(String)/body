{
  myFixture.configureByFile(getTestName(false) + ".dart");
  myFixture.complete(CompletionType.BASIC);
  if (lookupToSelect != null) {
    final LookupEx activeLookup=LookupManager.getActiveLookup(getEditor());
    assertNotNull(activeLookup);
    final LookupElement lookup=ContainerUtil.find(activeLookup.getItems(),new Condition<LookupElement>(){
      @Override public boolean value(      LookupElement element){
        return lookupToSelect.equals(element.getLookupString());
      }
    }
);
    assertNotNull(lookupToSelect + " is not in the completion list",lookup);
    activeLookup.setCurrentItem(lookup);
    myFixture.finishLookup(Lookup.NORMAL_SELECT_CHAR);
  }
  myFixture.checkResultByFile(getTestName(false) + ".after.dart");
}
