{
{
    final RefactoringStatus finalStatus=myRefactoring.checkFinalConditions();
    if (finalStatus == null) {
      return;
    }
    if (finalStatus.hasError()) {
      Messages.showErrorDialog(myProject,finalStatus.getMessage(),"Error");
      return;
    }
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      AssistUtils.applySourceChange(myProject,myRefactoring.getChange());
      close(DialogWrapper.OK_EXIT_CODE);
    }
  }
);
}
