{
  final Element rootManagerElement=moduleSettings.getComponentElement(ModuleSettings.MODULE_ROOT_MANAGER_COMPONENT);
  if (rootManagerElement != null) {
    final boolean inheritOutput="true".equals(rootManagerElement.getAttributeValue("inherit-compiler-output"));
    if (!inheritOutput) {
      final Element outputElement=rootManagerElement.getChild("output");
      final String outputUrl=outputElement == null ? null : outputElement.getAttributeValue("url");
      if (outputUrl != null) {
        return PathUtil.getCanonicalPath(VfsUtil.urlToPath(moduleSettings.expandPath(outputUrl)));
      }
    }
  }
  final String projectOutputUrl=moduleSettings.getProjectOutputUrl();
  return projectOutputUrl == null ? "" : PathUtil.getCanonicalPath(VfsUtil.urlToPath(moduleSettings.expandPath(projectOutputUrl))) + "/" + CompilerModuleExtension.PRODUCTION+ "/"+ moduleSettings.getModuleName();
}
