{
  if (module.getModuleType() instanceof FlexModuleType) {
    final Sdk sdk=ModuleRootManager.getInstance(module).getSdk();
    if (sdk != null && sdk.getSdkType() instanceof IFlexSdkType) {
      return sdk;
    }
  }
 else {
    final FlexFacet flexFacet=FacetManager.getInstance(module).getFacetByType(FlexFacet.ID);
    if (flexFacet != null) {
      return flexFacet.getConfiguration().getFlexSdk();
    }
  }
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    final Sdk sdk=ModuleRootManager.getInstance(module).getSdk();
    if (sdk != null && sdk.getSdkType() instanceof IFlexSdkType) {
      return sdk;
    }
  }
  return null;
}
