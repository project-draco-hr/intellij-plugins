{
  StartupManager.getInstance(module.getProject()).runWhenProjectIsInitialized(new Runnable(){
    @Override public void run(){
      Runnable runnable=new Runnable(){
        public void run(){
          final FileEditorManager manager=FileEditorManager.getInstance(module.getProject());
          for (          VirtualFile file : files) {
            manager.openFile(file,true);
            if (PubspecYamlUtil.PUBSPEC_YAML.equals(file.getName())) {
              final AnAction pubGetAction=ActionManager.getInstance().getAction("Dart.pub.get");
              if (pubGetAction instanceof DartPubGetAction) {
                ((DartPubGetAction)pubGetAction).performPubAction(module,file,false);
              }
            }
          }
        }
      }
;
      if (ApplicationManager.getApplication().getCurrentModalityState() == ModalityState.NON_MODAL) {
        runnable.run();
      }
 else {
        ApplicationManager.getApplication().invokeLater(runnable,ModalityState.NON_MODAL,new Condition(){
          @Override public boolean value(          final Object o){
            return module.isDisposed();
          }
        }
);
      }
    }
  }
);
}
