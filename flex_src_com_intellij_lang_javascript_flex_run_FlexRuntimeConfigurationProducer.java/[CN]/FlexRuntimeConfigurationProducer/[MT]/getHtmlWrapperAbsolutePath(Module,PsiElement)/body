{
  final PsiFile psiFile=PsiTreeUtil.getNonStrictParentOfType(context,PsiFile.class);
  final VirtualFile vFile=psiFile == null ? null : psiFile.getVirtualFile();
  if (psiFile != null && vFile != null && FlexUtils.isHtmlExtension(FileUtil.getExtension(psiFile.getName())) && FlexUtils.htmlFileLooksLikeSwfWrapper(vFile)) {
    final VirtualFile sourceRoot=ProjectRootManager.getInstance(module.getProject()).getFileIndex().getSourceRootForFile(vFile);
    final Collection<FlexBuildConfiguration> configs=FlexBuildConfiguration.getConfigForFlexModuleOrItsFlexFacets(module);
    return configs.isEmpty() || sourceRoot == null ? vFile.getPath() : configs.iterator().next().getCompileOutputPath() + "/" + VfsUtilCore.getRelativePath(vFile,sourceRoot,'/');
  }
  return null;
}
