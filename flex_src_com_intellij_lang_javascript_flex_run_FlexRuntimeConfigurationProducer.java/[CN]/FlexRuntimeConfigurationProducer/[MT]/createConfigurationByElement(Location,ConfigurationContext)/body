{
  final Module module=context.getModule();
  if (!(location instanceof PsiLocation) || module == null)   return null;
  mySourceElement=location.getPsiElement();
  final String htmlWrapperAbsolutePath=getHtmlWrapperAbsolutePath(module,mySourceElement);
  if (htmlWrapperAbsolutePath != null) {
    return createConfigurationForHtmlWrapper(module,htmlWrapperAbsolutePath);
  }
  final JSClass jsClass=getJSClass(mySourceElement);
  if (jsClass != null && isAcceptedMainClass(jsClass,module,false)) {
    final RunnerAndConfigurationSettings settings=RunManagerEx.getInstanceEx(location.getProject()).createConfiguration("",FlexRunConfigurationType.getFactory());
    final FlexRunConfiguration runConfiguration=(FlexRunConfiguration)settings.getConfiguration();
    FlexRunnerParameters runnerParameters=runConfiguration.getRunnerParameters();
    runnerParameters.setModuleName(module.getName());
    runnerParameters.setRunMode(FlexRunnerParameters.RunMode.MainClass);
    runnerParameters.setMainClassName(jsClass.getQualifiedName());
    runConfiguration.setName(generateName(runnerParameters));
    return settings;
  }
 else {
    return null;
  }
}
