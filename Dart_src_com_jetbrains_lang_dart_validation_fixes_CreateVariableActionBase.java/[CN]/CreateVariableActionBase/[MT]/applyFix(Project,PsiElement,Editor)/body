{
  final TemplateManager templateManager=TemplateManager.getInstance(project);
  Template template=templateManager.createTemplate("","");
  template.setToReformat(true);
  buildTemplate(template,psiElement);
  PsiElement anchor=findAnchor(psiElement);
  if (anchor == null) {
    CommonRefactoringUtil.showErrorHint(project,editor,DartBundle.message("dart.create.function.intention.family"),DartBundle.message("dart.cannot.find.place.to.create"),null);
    return;
  }
  final Editor openedEditor=navigate(project,anchor.getTextOffset(),anchor.getContainingFile().getVirtualFile());
  if (openedEditor != null) {
    templateManager.startTemplate(openedEditor,template);
  }
}
