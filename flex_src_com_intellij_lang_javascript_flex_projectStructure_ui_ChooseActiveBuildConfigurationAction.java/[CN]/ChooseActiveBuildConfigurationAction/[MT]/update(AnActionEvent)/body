{
  if (!FlexIdeUtils.isNewUI()) {
    e.getPresentation().setVisible(false);
    return;
  }
  super.update(e);
  Module module=findModule(e.getDataContext());
  if (module == null) {
    if (myLastModule != null && myLastModule.isDisposed()) {
      myLastModule=null;
    }
    module=myLastModule;
  }
  if (module == null || FlexModuleType.getInstance() != ModuleType.get(module)) {
    e.getPresentation().setEnabled(false);
    e.getPresentation().setText("(none)");
    e.getPresentation().setIcon(null);
    return;
  }
  myLastModule=module;
  e.getPresentation().setEnabled(true);
  FlexIdeBuildConfiguration activeConfiguration=FlexBuildConfigurationManager.getInstance(module).getActiveConfiguration();
  if (activeConfiguration != null) {
    e.getPresentation().setText(activeConfiguration.getName());
    e.getPresentation().setIcon(activeConfiguration.getIcon());
  }
 else {
    e.getPresentation().setText("(none)");
  }
}
