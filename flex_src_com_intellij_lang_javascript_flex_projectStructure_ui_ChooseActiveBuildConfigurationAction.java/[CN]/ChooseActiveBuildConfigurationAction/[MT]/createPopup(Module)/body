{
  final DefaultActionGroup actionGroup=new DefaultActionGroup();
  actionGroup.addSeparator(FlexBundle.message("build.configurations.popup.separator.text"));
  final FlexBuildConfigurationManager manager=FlexBuildConfigurationManager.getInstance(module);
  final FlexIdeBuildConfiguration active=manager.getActiveConfiguration();
  FlexIdeBuildConfiguration[] bcs=manager.getBuildConfigurations();
  Arrays.sort(bcs,new Comparator<FlexIdeBuildConfiguration>(){
    @Override public int compare(    final FlexIdeBuildConfiguration o1,    final FlexIdeBuildConfiguration o2){
      return o1.getName().compareToIgnoreCase(o2.getName());
    }
  }
);
  for (  final FlexIdeBuildConfiguration bc : bcs) {
    actionGroup.add(new SelectBcAction(bc,manager));
  }
  actionGroup.addSeparator();
  actionGroup.add(new EditBcsAction(module));
  final DataContext dataContext=SimpleDataContext.getProjectContext(module.getProject());
  return JBPopupFactory.getInstance().createActionGroupPopup(FlexBundle.message("choose.build.configuration.popup.title",module.getName()),actionGroup,dataContext,false,false,true,null,-1,new Condition<AnAction>(){
    public boolean value(    final AnAction anAction){
      return anAction instanceof SelectBcAction && ((SelectBcAction)anAction).getBc() == active;
    }
  }
);
}
