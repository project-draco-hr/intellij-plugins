{
  return new ComboBoxButton(presentation){
    @Override protected ListPopup createPopup(    Runnable onDispose){
      final DataContext popupCreationDataContext=getDataContext();
      ListPopup popup=super.createPopup(onDispose);
      popup.setDataProvider(new DataProvider(){
        @Override public Object getData(        @NonNls String dataId){
          return popupCreationDataContext.getData(dataId);
        }
      }
);
      return popup;
    }
  }
;
}
