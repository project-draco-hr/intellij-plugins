{
  if (abcModifier != null && abcModifier.methodTrait(traitKind,name,in,this)) {
    return;
  }
  if (abcModifier == null || !abcModifier.methodTraitName(name,traitKind,in,this)) {
    currentBuffer.writeU32(history.getIndex(IndexHistory.MULTINAME,name));
  }
  TIntArrayList new_metadata=trimMetadata(metadata);
  if (((traitKind >> 4) & TRAIT_FLAG_metadata) != 0 && new_metadata == null) {
    traitKind=traitKind & ~(TRAIT_FLAG_metadata << 4);
  }
  currentBuffer.writeU8(traitKind);
  currentBuffer.writeU32(dispId);
  currentBuffer.writeU32(this.methodInfo.getIndex(methodInfo));
  encodeMetaData(new_metadata);
}
