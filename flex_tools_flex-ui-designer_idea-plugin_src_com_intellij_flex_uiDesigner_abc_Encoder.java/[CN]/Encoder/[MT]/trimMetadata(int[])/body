{
  if (metadata == null) {
    return new TIntArrayList(0);
  }
  TIntArrayList newMetadata=new TIntArrayList(metadata.length);
  for (  int aMetadata : metadata) {
    int new_index=metadataInfo.getIndex(poolIndex,aMetadata);
    if (new_index != -1) {
      newMetadata.add(new_index);
    }
  }
  return newMetadata;
}
