{
  final Document document=editor.getDocument();
  final SourceFileEdit fileEdit=myChange.getEdits().get(0);
  final SourceEdit sourceEdit=fileEdit.getEdits().get(0);
  if (sourceEdit.getLength() > 0) {
    document.deleteString(sourceEdit.getOffset(),sourceEdit.getOffset() + sourceEdit.getLength());
  }
  final TemplateManager templateManager=TemplateManager.getInstance(project);
  Template template=templateManager.createTemplate("","");
  template.setToReformat(true);
  addContents(template,sourceEdit);
  final VirtualFile virtualFile=LocalFileSystem.getInstance().findFileByPath(FileUtil.toSystemIndependentName(fileEdit.getFile()));
  if (virtualFile != null) {
    final Editor targetEditor=BaseCreateFix.navigate(project,sourceEdit.getOffset(),virtualFile);
    if (targetEditor != null) {
      templateManager.startTemplate(targetEditor,template);
    }
  }
}
