{
  JSTestUtils.modifyBuildConfiguration(myModule,new Consumer<ModifiableFlexBuildConfiguration>(){
    public void consume(    final ModifiableFlexBuildConfiguration bc){
      bc.setMainClass("foo.bar.SomeClass");
    }
  }
);
  final RunManagerEx runManager=RunManagerEx.getInstanceEx(myProject);
  JSTestUtils.createFlexUnitRunConfig(runManager,"SomeClass.testSomething()",myModule,FlexUnitRunnerParameters.Scope.Method,"","foo.bar.SomeClass","testSomething",true);
  JSTestUtils.createFlexUnitRunConfig(runManager,"SomeClass",myModule,FlexUnitRunnerParameters.Scope.Class,"","foo.bar.SomeClass","",true);
  JSTestUtils.createFlexUnitRunConfig(runManager,"foo.bar",myModule,FlexUnitRunnerParameters.Scope.Package,"foo.bar","","",true);
  JSTestUtils.createFlashRunConfig(runManager,myModule,"SomeClass","foo.bar.SomeClass",true);
  doTest("renamed","as");
  assertEquals("foo.renamed.SomeClass",FlexBuildConfigurationManager.getInstance(myModule).getActiveConfiguration().getMainClass());
  JSTestUtils.checkFlexUnitRunConfig(runManager,myModule,"SomeClass.testSomething()","","foo.renamed.SomeClass","testSomething");
  JSTestUtils.checkFlexUnitRunConfig(runManager,myModule,"SomeClass","","foo.renamed.SomeClass","");
  JSTestUtils.checkFlexUnitRunConfig(runManager,myModule,"foo.renamed","foo.renamed","","");
  JSTestUtils.checkFlashRunConfig(runManager,myModule,"SomeClass","foo.renamed.SomeClass");
}
