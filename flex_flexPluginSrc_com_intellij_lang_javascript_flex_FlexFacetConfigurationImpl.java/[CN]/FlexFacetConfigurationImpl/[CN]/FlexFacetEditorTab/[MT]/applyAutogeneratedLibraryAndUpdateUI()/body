{
  final ModuleStructureConfigurable moduleStructureConfigurable=ModuleStructureConfigurable.getInstance(myModule.getProject());
  final ModuleEditor moduleEditor=FlexUtils.getModuleEditor(myModule,moduleStructureConfigurable);
  if (moduleEditor != null) {
    try {
      moduleEditor.canApply();
      moduleEditor.apply();
    }
 catch (    ConfigurationException e) {
      LOG.warn(e);
    }
    moduleEditor.moduleCountChanged();
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        moduleStructureConfigurable.getFacetConfigurator().resetEditors();
      }
    }
,ModalityState.current(),new Condition(){
      public boolean value(      Object o){
        return myModule.isDisposed() || FlexUtils.getModuleEditor(myModule,ModuleStructureConfigurable.getInstance(myModule.getProject())) == null;
      }
    }
);
  }
}
