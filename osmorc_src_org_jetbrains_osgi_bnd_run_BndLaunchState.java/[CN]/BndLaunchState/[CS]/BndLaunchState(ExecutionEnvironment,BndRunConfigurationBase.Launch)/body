{
  super(environment);
  myConfiguration=configuration;
  myProject=myConfiguration.getProject();
  String toolWindowId=environment.getExecutor().getToolWindowId();
  NotificationGroup notificationGroup=ourNotificationGroups.get(toolWindowId);
  if (notificationGroup == null) {
    String name=BndRunConfigurationType.getInstance().getDisplayName() + " (" + toolWindowId+ ")";
    notificationGroup=NotificationGroup.toolWindowGroup(name,toolWindowId);
    ourNotificationGroups.put(toolWindowId,notificationGroup);
  }
  myNotifications=notificationGroup;
  File runFile=new File(myConfiguration.bndRunFile);
  if (!runFile.isFile()) {
    throw new CantRunException(OsmorcBundle.message("bnd.run.configuration.invalid",runFile));
  }
  try {
    myLauncher=Workspace.getRun(runFile).getProjectLauncher();
    myLauncher.prepare();
  }
 catch (  Exception e) {
    LOG.info(e);
    throw new CantRunException(OsmorcBundle.message("bnd.run.configuration.cannot.run",runFile,e.getMessage()));
  }
  myBundleStamps=ContainerUtil.newHashMap();
  bundlesChanged();
}
