{
  if (server.isReadyForRunningTests()) {
    final JstdDebugBrowserInfo debugBrowserInfo=JstdDebugBrowserInfo.build(server,jstdState.getRunSettings());
    if (debugBrowserInfo != null) {
      ActionCallback prepareDebuggerCallback=debugBrowserInfo.getDebugEngine().prepareDebugger(project,debugBrowserInfo.getBrowser());
      prepareDebuggerCallback.notifyWhenRejected(result).doWhenDone(new Runnable(){
        @Override public void run(){
          result.setDone(new MyDebugStarter(debugBrowserInfo,JstdDebugProgramRunner.this));
        }
      }
);
    }
 else {
      result.setDone(new RunProfileStarter(){
        @Nullable @Override public RunContentDescriptor execute(        @NotNull Project project,        @NotNull Executor executor,        @NotNull RunProfileState state,        @Nullable RunContentDescriptor contentToReuse,        @NotNull ExecutionEnvironment environment) throws ExecutionException {
          throw new ExecutionException("Please capture Chrome or Firefox and try again.");
        }
      }
);
    }
  }
 else {
    result.setDone(new MyRunStarter(server,this));
  }
}
