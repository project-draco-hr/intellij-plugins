{
  if (server.isReadyForRunningTests()) {
    final JstdDebugBrowserInfo debugBrowserInfo=JstdDebugBrowserInfo.build(server,runSettings);
    if (debugBrowserInfo != null) {
      ActionCallback prepareDebuggerCallback=debugBrowserInfo.getDebugEngine().prepareDebugger(project,debugBrowserInfo.getBrowser());
      prepareDebuggerCallback.notifyWhenRejected(result).doWhenDone(new Runnable(){
        @Override public void run(){
          result.setDone(new MyDebugStarter(server,debugBrowserInfo));
        }
      }
);
    }
 else {
      result.setDone(new RunProfileStarter(){
        @Nullable @Override public RunContentDescriptor execute(        @NotNull RunProfileState state,        @NotNull ExecutionEnvironment environment) throws ExecutionException {
          throw new ExecutionException("Please capture Chrome or Firefox and try again");
        }
      }
);
    }
  }
 else {
    result.setDone(new JstdRunProgramRunner.JstdRunStarter(server,true));
  }
}
