{
  File libRevealInTempDir;
  try {
    File tempDir=FileUtil.createTempDirectory("libReveal",null);
    libRevealInTempDir=new File(tempDir,libReveal.getName());
    FileUtil.copy(libReveal,libRevealInTempDir);
  }
 catch (  IOException e) {
    throw new ExecutionException("Cannot create a temporary copy of Reveal library",e);
  }
  List<String> commands=Arrays.asList("/usr/bin/codesign","-fs",buildConfiguration.getBuildSetting("CODE_SIGN_IDENTITY").getString(),libRevealInTempDir.getPath());
  ProcessOutput output=ExecUtil.execAndGetOutput(commands,libRevealInTempDir.getParent());
  if (output.getExitCode() != 0) {
    Reveal.LOG.info("codesign command line: " + StringUtil.join(commands," "));
    throw new ExecutionException("Cannot sign Reveal library:\n" + output.getStderr());
  }
  AMDeviceUtil.transferPathToApplicationBundle(device,libRevealInTempDir.getParent(),"/tmp",bundleId);
  return new File(new File(commandLine.getExePath()).getParentFile().getParentFile(),"tmp/" + libRevealInTempDir.getParentFile().getName() + "/"+ libRevealInTempDir.getName());
}
