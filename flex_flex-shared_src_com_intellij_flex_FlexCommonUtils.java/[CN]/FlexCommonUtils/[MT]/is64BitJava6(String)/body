{
  try {
    final Ref<Boolean> is64Bit=Ref.create(false);
    final Ref<Boolean> isJava6=Ref.create(false);
    final Process process=Runtime.getRuntime().exec(new String[]{javaExecutablePath,"-version"});
    final BaseOSProcessHandler handler=new BaseOSProcessHandler(process,"doesn't matter",Charset.defaultCharset());
    handler.addProcessListener(new ProcessAdapter(){
      public void onTextAvailable(      ProcessEvent event,      Key outputType){
        if (outputType != ProcessOutputTypes.SYSTEM) {
          if (event.getText().contains("64-Bit")) {
            is64Bit.set(true);
          }
          if (event.getText().contains("version \"1.6.")) {
            isJava6.set(true);
          }
        }
      }
    }
);
    handler.startNotify();
    handler.waitFor(3000);
    if (!handler.isProcessTerminated()) {
      handler.destroyProcess();
    }
    return is64Bit.get() && isJava6.get();
  }
 catch (  IOException e) {
  }
  return false;
}
