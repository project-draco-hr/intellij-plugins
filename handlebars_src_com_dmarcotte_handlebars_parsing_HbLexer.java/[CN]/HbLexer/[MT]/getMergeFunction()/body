{
  return new MergeFunction(){
    @Override public IElementType merge(    final IElementType type,    final Lexer originalLexer){
      if (HbTokenTypes.COMMENT_OPEN != type) {
        return type;
      }
      if (originalLexer.getTokenType() == HbTokenTypes.COMMENT_CONTENT) {
        originalLexer.advance();
      }
      if (originalLexer.getTokenType() == HbTokenTypes.COMMENT_CLOSE) {
        originalLexer.advance();
        return HbTokenTypes.COMMENT;
      }
      if (originalLexer.getTokenType() == null) {
        return HbTokenTypes.UNCLOSED_COMMENT;
      }
      if (originalLexer.getTokenType() == HbTokenTypes.UNCLOSED_COMMENT) {
        originalLexer.advance();
        return HbTokenTypes.UNCLOSED_COMMENT;
      }
      return type;
    }
  }
;
}
