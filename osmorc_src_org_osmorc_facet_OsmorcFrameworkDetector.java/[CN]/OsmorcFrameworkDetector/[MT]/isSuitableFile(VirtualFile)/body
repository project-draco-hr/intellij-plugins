{
  List<String> headersToDetect=new ArrayList<String>(Arrays.asList(DETECTION_HEADERS));
  if (file != null && file.exists() && !file.isDirectory()) {
    BufferedReader bufferedReader=null;
    try {
      InputStream inputStream=file.getInputStream();
      InputStreamReader inputStreamReader=new InputStreamReader(inputStream);
      bufferedReader=new BufferedReader(inputStreamReader);
      String line;
      while ((line=bufferedReader.readLine()) != null && headersToDetect.size() > 0) {
        for (Iterator<String> headersToDetectIterator=headersToDetect.iterator(); headersToDetectIterator.hasNext(); ) {
          String headerToDetect=headersToDetectIterator.next();
          if (line.startsWith(headerToDetect)) {
            headersToDetectIterator.remove();
            break;
          }
        }
      }
    }
 catch (    IOException e) {
      logger.warn("There was an unexpected exception when accessing " + file.getName() + " ("+ e.getMessage()+ ")");
      return false;
    }
 finally {
      if (bufferedReader != null) {
        try {
          bufferedReader.close();
        }
 catch (        IOException e) {
          logger.warn("There was an unexpected exception when closing stream to " + file.getName() + " ("+ e.getMessage()+ ")");
          return false;
        }
      }
    }
  }
  return headersToDetect.size() == 0;
}
