{
  Collections.sort(users,new Comparator<User>(){
    @Override public int compare(    User o1,    User o2){
      return compareUsers(o1,o2);
    }
  }
);
  userListComponent.setUI(new MultipleSelectionListUI());
  userListComponent.setListData(users.toArray());
  userListComponent.setCellRenderer(new DefaultListCellRenderer(){
    @Override public Component getListCellRendererComponent(    JList list,    Object value,    int index,    boolean isSelected,    boolean cellHasFocus){
      User user=(User)value;
      Component rendererComponent=super.getListCellRendererComponent(list,user.getDisplayName(),index,isSelected,cellHasFocus);
      if (rendererComponent instanceof JLabel) {
        JLabel jLabel=(JLabel)rendererComponent;
        jLabel.setIcon(user.getIcon());
      }
      return rendererComponent;
    }
  }
);
}
