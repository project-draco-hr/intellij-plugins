{
  final VirtualFile annotatedFile=DartResolveUtil.getRealVirtualFile(psiFile);
  if (annotatedFile == null)   return null;
  if (!serverReadyForRequest(psiFile))   return null;
  if (editor != null) {
    DartAnalysisServerService.getInstance().addPriorityFile(annotatedFile);
  }
  DartAnalysisServerService.getInstance().updateFilesContent();
  return new AnnotatorInfo(psiFile.getProject(),annotatedFile.getPath());
}
