{
  final Module module=ModuleUtilCore.findModuleForFile(contextFile,myProject);
  if (module == null)   return null;
  final VirtualFile[] customPackageRoots=DartConfigurable.getCustomPackageRoots(module);
  if (customPackageRoots.length > 0) {
    Collections.addAll(myPackageRoots,customPackageRoots);
    return null;
  }
  final VirtualFile pubspecYamlFile=PubspecYamlUtil.findPubspecYamlFile(myProject,contextFile);
  final VirtualFile parentFolder=pubspecYamlFile == null ? null : pubspecYamlFile.getParent();
  final VirtualFile packagesFolder=parentFolder == null ? null : parentFolder.findChild(PACKAGES_FOLDER_NAME);
  if (packagesFolder != null && packagesFolder.isDirectory()) {
    myPackageRoots.add(packagesFolder);
  }
  return pubspecYamlFile;
}
