{
synchronized (myStepDefinitions) {
    for (Iterator<AbstractStepDefinition> iterator=myStepDefinitions.iterator(); iterator.hasNext(); ) {
      AbstractStepDefinition definition=iterator.next();
      final PsiElement element=definition.getElement();
      if (element == null || element.getContainingFile().equals(file)) {
        iterator.remove();
      }
    }
  }
}
