{
  Integer id=virtualFile.getUserData(ID);
  if (id == null) {
    id=freeIndices.isEmpty() ? counter++ : freeIndices.remove(freeIndices.size() - 1);
    virtualFile.putUserData(ID,id);
    unregisteredDocumentFactories.add(psiFile);
  }
  return id;
}
