{
  final String mainContentEntryUrl=VfsUtilCore.pathToUrl(fbProject.getProjectRootPath());
  final ContentEntry mainContentEntry=rootModel.addContentEntry(mainContentEntryUrl);
  final Collection<ContentEntry> otherContentEntries=new ArrayList<ContentEntry>();
  final Collection<String> sourcePaths=fbProject.getSourcePaths();
  if (sourcePaths.isEmpty()) {
    final VirtualFile contentRoot=mainContentEntry.getFile();
    final String mainClass=fbProject.getMainAppClassName();
    if (contentRoot != null && !StringUtil.isEmpty(mainClass) && (contentRoot.findChild(mainClass + ".mxml") != null || contentRoot.findChild(mainClass + ".as") != null)) {
      mainContentEntry.addSourceFolder(mainContentEntry.getUrl(),false);
    }
  }
 else {
    final List<String> locales=FlexUtils.getOptionValues(fbProject.getAdditionalCompilerOptions(),"locale","compiler.locale");
    for (    final String rawSourcePath : sourcePaths) {
      if (rawSourcePath.contains(LOCALE_TOKEN)) {
        for (        String locale : locales) {
          handleRawSourcePath(rootModel,fbProject,mainContentEntryUrl,mainContentEntry,otherContentEntries,rawSourcePath.replace(LOCALE_TOKEN,locale));
        }
      }
 else {
        handleRawSourcePath(rootModel,fbProject,mainContentEntryUrl,mainContentEntry,otherContentEntries,rawSourcePath);
      }
    }
  }
}
