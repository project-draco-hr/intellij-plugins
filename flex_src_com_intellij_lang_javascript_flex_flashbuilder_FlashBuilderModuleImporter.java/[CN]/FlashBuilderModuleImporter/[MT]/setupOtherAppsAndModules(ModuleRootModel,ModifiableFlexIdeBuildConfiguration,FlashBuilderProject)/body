{
  for (  String mainClass : fbProject.getApplicationClassNames()) {
    final ModifiableFlexIdeBuildConfiguration bc=myFlexConfigEditor.copyConfiguration(mainBC,mainBC.getNature());
    final String shortName=StringUtil.getShortName(mainClass);
    bc.setName(shortName);
    bc.setMainClass(mainClass);
    if (bc.getTargetPlatform() == TargetPlatform.Desktop || bc.getTargetPlatform() == TargetPlatform.Mobile) {
      setupAirDescriptor(bc,rootModel);
    }
    bc.setOutputFileName(shortName + ".swf");
    FlexModuleBuilder.createRunConfiguration(rootModel.getModule(),bc.getName());
  }
  for (  final Pair<String,String> sourcePathAndDestPath : fbProject.getModules()) {
    final ModifiableFlexIdeBuildConfiguration bc=myFlexConfigEditor.copyConfiguration(mainBC,mainBC.getNature());
    final String mainClass=getModuleClassName(fbProject,sourcePathAndDestPath.first,rootModel.getSourceRootUrls());
    final String shortName=StringUtil.getShortName(mainClass);
    bc.setName(shortName);
    bc.setOutputType(OutputType.RuntimeLoadedModule);
    bc.setMainClass(mainClass);
    bc.setOutputFileName(PathUtil.getFileName(sourcePathAndDestPath.second));
    final String parentPath=PathUtil.getParentPath(sourcePathAndDestPath.second);
    bc.setOutputFolder(bc.getOutputFolder() + (parentPath.isEmpty() ? "" : ("/" + parentPath)));
  }
}
