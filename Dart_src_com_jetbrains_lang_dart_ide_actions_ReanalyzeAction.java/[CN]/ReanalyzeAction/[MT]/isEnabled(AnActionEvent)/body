{
  final Project project=event.getProject();
  if (project == null) {
    return false;
  }
  final Editor editor=event.getData(CommonDataKeys.EDITOR);
  if (editor != null) {
    final Document document=editor.getDocument();
    final PsiFile psiFile=PsiDocumentManager.getInstance(project).getPsiFile(document);
    return isDartFile(psiFile);
  }
  final VirtualFile[] filesAndDirs=CommonDataKeys.VIRTUAL_FILE_ARRAY.getData(event.getDataContext());
  if (filesAndDirs == null) {
    return false;
  }
  return hasDartFile(project,filesAndDirs);
}
