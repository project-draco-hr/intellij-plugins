{
  final User[] users=getUsers(oldGroup);
  final String newName=StringUtil.fixGroup(newGroup);
  myBroadcaster.doChange(new GroupEvent.Updated(oldGroup,newName),new Runnable(){
    public void run(){
synchronized (myUsersGroupsLock) {
        myGroups.remove(oldGroup);
        for (        final User user : users) {
          user.setGroup(newName,null);
        }
        myGroups.add(newName);
      }
    }
  }
);
  return newName;
}
