{
  final AbcNameFilter sparkInclusionNameFilter=new AbcNameFilterStartsWith("com.intellij.flex.uiDesigner.flex",true){
    @Override public boolean accept(    CharSequence name){
      return super.accept(name) && !StringUtil.equals(name,"com.intellij.flex.uiDesigner.flex:SpriteLoaderAsset");
    }
  }
;
  final Collection<CharSequence> commonDefinitions=new ArrayList<CharSequence>(1);
  commonDefinitions.add("com.intellij.flex.uiDesigner:SpecialClassForAdobeEngineers");
  final AbcNameFilter air4InclusionNameFilter=new AbcNameFilterByNameSet(FlexOverloadedClasses.AIR_SPARK_CLASSES,true);
  File source=getSourceFile(rootPath,flexVersion);
  final AbcNameFilter abcNameFilter;
  if (classifier == InjectionClassifier.framework) {
    abcNameFilter=new AbcNameFilterByNameSetAndStartsWith(commonDefinitions,new String[]{"mx.","spark."}){
      @Override public boolean accept(      CharSequence name){
        return StringUtil.equals(name,FlexOverloadedClasses.STYLE_PROTO_CHAIN) || FlexOverloadedClasses.MX_CLASSES.contains(name) || (super.accept(name) && !sparkInclusionNameFilter.accept(name) && !air4InclusionNameFilter.accept(name));
      }
    }
;
  }
 else {
    abcNameFilter=new AbcNameFilterByEquals(FlexOverloadedClasses.SKINNABLE_COMPONENT);
  }
  new AbcFilter(null).filter(source,createAbcFile(rootPath,flexVersion,classifier),abcNameFilter);
  if (buildComplement) {
    new AbcFilter(null).filter(source,new File(rootPath + "/complement-flex" + flexVersion+ ".swf"),sparkInclusionNameFilter);
    new AbcFilter(null).filter(source,new File(rootPath + "/complement-air4.swf"),air4InclusionNameFilter);
  }
}
