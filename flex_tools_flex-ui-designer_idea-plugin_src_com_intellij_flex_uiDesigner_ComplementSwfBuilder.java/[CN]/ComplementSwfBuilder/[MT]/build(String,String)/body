{
  final Collection<CharSequence> commonDefinitions=new ArrayList<CharSequence>(1);
  commonDefinitions.add("com.intellij.flex.uiDesigner:SpecialClassForAdobeEngineers");
  List<BufferWrapper> list=new AbcExtractor().extract(getSourceFile(rootPath,flexVersion),new AbcNameFilterByNameSetAndStartsWith(commonDefinitions,new String[]{"mx.","spark."}){
    @Override public boolean value(    CharSequence name){
      return StringUtil.equals(name,FlexOverloadedClasses.STYLE_PROTO_CHAIN) || StringUtil.equals(name,FlexOverloadedClasses.SKINNABLE_COMPONENT) || FlexOverloadedClasses.MX_CLASSES.contains(name)|| FlexOverloadedClasses.AIR_SPARK_CLASSES.contains(name)|| super.value(name);
    }
  }
);
  DataOutputStream out=new DataOutputStream(new BufferedOutputStream(new FileOutputStream(createAbcFile(rootPath,flexVersion))));
  try {
    out.writeShort(list.size());
    for (    BufferWrapper buffer : list) {
      out.writeInt(buffer.getSize());
      buffer.writeTo(out);
    }
  }
  finally {
    out.close();
  }
}
