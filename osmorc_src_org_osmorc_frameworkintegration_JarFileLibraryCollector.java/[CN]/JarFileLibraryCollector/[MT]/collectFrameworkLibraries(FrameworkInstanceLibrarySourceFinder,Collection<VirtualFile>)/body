{
  Set<VirtualFile> classRoots=new HashSet<VirtualFile>();
  for (  VirtualFile directoryWithJars : directoriesWithJars) {
    VirtualFile[] files=directoryWithJars.getChildren();
    for (    VirtualFile file : files) {
      VirtualFile dir=FileUtil.getFolder(file);
      if (dir != null) {
        VirtualFile manifest=dir.findFileByRelativePath("META-INF/MANIFEST.MF");
        if (manifest != null && !sourceFinder.containsOnlySources(file)) {
          classRoots.add(file);
        }
      }
    }
  }
  collectFrameworkJars(classRoots,sourceFinder);
}
