{
  Set<VirtualFile> classRoots=new HashSet<VirtualFile>();
  for (  VirtualFile directoryWithJars : directoriesWithJars) {
    for (    VirtualFile child : directoryWithJars.getChildren()) {
      VirtualFile dir=FileUtil.getFolder(child);
      if (dir != null) {
        VirtualFile manifest=dir.findFileByRelativePath("META-INF/MANIFEST.MF");
        if (manifest != null && !sourceFinder.containsOnlySources(child)) {
          classRoots.add(child);
        }
      }
    }
  }
  collectFrameworkJars(classRoots,sourceFinder);
}
