{
  toDir.mkdirs();
  if (!toDir.isDirectory()) {
    throw new IOException("Can't create directory " + toDir);
  }
  for (  String baseName : NEEDED_RESOURCES) {
    File toFile=new File(toDir,baseName);
    InputStream inputStream=KarmaJavaScriptSourcesUtil.class.getResourceAsStream(baseName);
    try {
      if (inputStream == null) {
        throw new RuntimeException("Resource " + baseName + " is not found!");
      }
      copy(inputStream,toFile);
    }
  finally {
      if (inputStream != null) {
        inputStream.close();
      }
    }
  }
}
