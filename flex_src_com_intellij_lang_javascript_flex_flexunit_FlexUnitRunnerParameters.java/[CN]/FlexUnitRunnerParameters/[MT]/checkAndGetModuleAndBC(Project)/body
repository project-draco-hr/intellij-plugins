{
  final Pair<Module,FlexIdeBuildConfiguration> moduleAndBC=super.checkAndGetModuleAndBC(project);
  doCheck(project,moduleAndBC);
  final ModifiableFlexIdeBuildConfiguration overriddenBC=Factory.getTemporaryCopyForCompilation(moduleAndBC.second);
  overriddenBC.setSkipCompile(false);
  overriddenBC.setCssFilesToCompile(Collections.<String>emptyList());
  overriddenBC.setMainClass(FlexUnitPrecompileTask.getFlexUnitLauncherName(getModuleName()));
  overriddenBC.setOutputFileName("_flexunit.swf");
  overriddenBC.setOutputFolder(VfsUtil.urlToPath(CompilerModuleExtension.getInstance(moduleAndBC.first).getCompilerOutputUrlForTests()));
  overriddenBC.setOutputType(OutputType.Application);
  overriddenBC.setUseHtmlWrapper(false);
  if (BCUtils.canHaveResourceFiles(overriddenBC.getNature()) && !BCUtils.canHaveResourceFiles(moduleAndBC.second.getNature())) {
    overriddenBC.getCompilerOptions().setResourceFilesMode(CompilerOptions.ResourceFilesMode.All);
  }
  overriddenBC.getDependencies().setFrameworkLinkage(LinkageType.Merged);
  for (  ModifiableDependencyEntry entry : overriddenBC.getDependencies().getModifiableEntries()) {
    if (entry.getDependencyType().getLinkageType() == LinkageType.External) {
      entry.getDependencyType().setLinkageType(LinkageType.Merged);
    }
  }
  overriddenBC.getAirDesktopPackagingOptions().setUseGeneratedDescriptor(true);
  return Pair.create(moduleAndBC.first,((FlexIdeBuildConfiguration)overriddenBC));
}
