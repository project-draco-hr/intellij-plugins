{
  final DartSdk dartSdk=DartSdk.getGlobalDartSdk();
  if (dartSdk == null)   return null;
  final GeneralCommandLine commandLine=new GeneralCommandLine();
  commandLine.setExePath(DartSdkUtil.getPubPath(dartSdk));
  commandLine.addParameter("serve");
  commandLine.addParameter(firstServedDir.getName());
  commandLine.addParameter("--port=" + String.valueOf(port));
  commandLine.addParameter("--admin-port=" + String.valueOf(findAvailablePort(port)));
  commandLine.setWorkDirectory(firstServedDir.getParent().getPath());
  return new OSProcessHandler(commandLine);
}
