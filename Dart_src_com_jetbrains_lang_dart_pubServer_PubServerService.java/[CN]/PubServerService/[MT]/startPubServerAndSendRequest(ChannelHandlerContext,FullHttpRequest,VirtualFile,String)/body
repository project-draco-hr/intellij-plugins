{
  LOG.assertTrue(!processHandler.has());
  myFirstServedDir=servedDir;
  processHandler.get().doWhenDone(new Runnable(){
    @Override public void run(){
      final PubServerProxy pubServerProxy=myServedDirToProxyMap.get(servedDir);
      LOG.assertTrue(myServedDirToProxyMap.size() == 1 && pubServerProxy != null,myServedDirToProxyMap.size());
      pubServerProxy.sendToServer(clientContext,clientRequest,pathForPubServer);
    }
  }
).doWhenRejected(new Runnable(){
    @Override public void run(){
      myServedDirToProxyMap.clear();
      sendBadGateway(clientContext.channel());
    }
  }
);
}
