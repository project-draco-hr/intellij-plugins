{
  super(new RootNode(userModel,localMessageDispatcher));
  myUserModel=userModel;
  myLocalMessageDispatcher=localMessageDispatcher;
  myBroadcaster=myUserModel.getBroadcaster();
  myTree=tree;
  myListener=new IDEtalkAdapter(){
    public void afterChange(    IDEtalkEvent event){
      event.accept(new EventVisitor(){
        public void visitUserRemoved(        UserEvent.Removed event){
          updateTree(null);
          UIUtil.invokeLater(new Runnable(){
            public void run(){
              if (myTree.getRowCount() > 1) {
                myTree.setSelectionRow(0);
              }
            }
          }
);
        }
        public void visitUserEvent(        UserEvent event){
          updateTree(null);
        }
        public void visitGroupEvent(        GroupEvent event){
          updateTree(event);
        }
        public void visitSettingsChanged(        SettingsChanged settingsChanged){
          updateTree(null);
        }
        public void visitTransportEvent(        TransportEvent event){
          updateTree(null);
        }
      }
);
    }
  }
;
  myBroadcaster.addListener(myListener);
}
