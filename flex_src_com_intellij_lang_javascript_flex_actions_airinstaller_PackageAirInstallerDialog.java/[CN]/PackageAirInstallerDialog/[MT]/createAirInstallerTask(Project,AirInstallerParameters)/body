{
  return new AdtTask(){
    protected List<String> buildCommand(){
      final List<String> command=FlexSdkUtils.getCommandLineForSdkTool(project,parameters.getFlexSdk(),null,"com.adobe.air.ADT","adt.jar");
      command.add(parameters.DO_NOT_SIGN ? "-prepare" : "-package");
      if (!parameters.DO_NOT_SIGN) {
        if (parameters.KEY_ALIAS.length() > 0) {
          command.add("-alias");
          command.add(parameters.KEY_ALIAS);
        }
        command.add("-storetype");
        command.add(parameters.KEYSTORE_TYPE);
        command.add("-keystore");
        command.add(parameters.KEYSTORE_PATH);
        if (parameters.getKeystorePassword().length() > 0) {
          command.add("-storepass");
          command.add(parameters.getKeystorePassword());
        }
        if (parameters.getKeyPassword().length() > 0) {
          command.add("-keypass");
          command.add(parameters.getKeyPassword());
        }
        if (parameters.PROVIDER_CLASS.length() > 0) {
          command.add("-providerName");
          command.add(parameters.PROVIDER_CLASS);
        }
        if (parameters.TSA.length() > 0) {
          command.add("-tsa");
          command.add(parameters.TSA);
        }
      }
      command.add(parameters.INSTALLER_FILE_LOCATION + File.separatorChar + parameters.INSTALLER_FILE_NAME);
      command.add(parameters.AIR_DESCRIPTOR_PATH);
      for (      FilePathAndPathInPackage path : parameters.FILES_TO_PACKAGE) {
        final String fullPath=FileUtil.toSystemIndependentName(path.FILE_PATH.trim());
        String relPathInPackage=FileUtil.toSystemIndependentName(path.PATH_IN_PACKAGE.trim());
        if (relPathInPackage.startsWith("/")) {
          relPathInPackage=relPathInPackage.substring(1);
        }
        if (fullPath.endsWith("/" + relPathInPackage)) {
          command.add("-C");
          command.add(FileUtil.toSystemDependentName(fullPath.substring(0,fullPath.length() - relPathInPackage.length())));
          command.add(FileUtil.toSystemDependentName(relPathInPackage));
        }
 else {
          command.add("-e");
          command.add(FileUtil.toSystemDependentName(fullPath));
          command.add(relPathInPackage);
        }
      }
      return command;
    }
  }
;
}
