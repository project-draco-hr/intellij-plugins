{
  final DartExpressionCodeFragmentImpl clone=(DartExpressionCodeFragmentImpl)cloneImpl((FileElement)calcTreeElement().clone());
  clone.myPhysical=myPhysical;
  clone.myOriginalFile=this;
  final FileManager fileManager=((PsiManagerEx)getManager()).getFileManager();
  final SingleRootFileViewProvider cloneViewProvider=(SingleRootFileViewProvider)fileManager.createFileViewProvider(new LightVirtualFile(getName(),getLanguage(),getText()),myPhysical);
  clone.myViewProvider=cloneViewProvider;
  cloneViewProvider.forceCachedPsi(clone);
  clone.init(getContentElementType(),getContentElementType());
  return clone;
}
