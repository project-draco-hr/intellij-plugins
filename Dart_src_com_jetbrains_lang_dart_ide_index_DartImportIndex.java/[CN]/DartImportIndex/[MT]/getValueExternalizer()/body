{
  return new DataExternalizer<List<DartImportInfo>>(){
    @Override public void save(    @NotNull DataOutput out,    List<DartImportInfo> value) throws IOException {
      out.writeInt(value.size());
      for (      DartImportInfo importInfo : value) {
        out.writeUTF(importInfo.getImportText());
        out.writeUTF(StringUtil.notNullize(importInfo.getPrefix()));
        out.writeInt(importInfo.getShowComponents().size());
        for (        String showComponentName : importInfo.getShowComponents()) {
          out.writeUTF(showComponentName);
        }
        out.writeInt(importInfo.getHideComponents().size());
        for (        String hideComponentName : importInfo.getHideComponents()) {
          out.writeUTF(hideComponentName);
        }
      }
    }
    @Override public List<DartImportInfo> read(    @NotNull DataInput in) throws IOException {
      final int size=in.readInt();
      final List<DartImportInfo> result=new ArrayList<DartImportInfo>(size);
      for (int i=0; i < size; ++i) {
        final String importText=in.readUTF();
        final String prefix=in.readUTF();
        final int showSize=in.readInt();
        final Set<String> showComponentNames=showSize == 0 ? Collections.<String>emptySet() : new THashSet<String>(showSize);
        for (int j=0; j < showSize; j++) {
          showComponentNames.add(in.readUTF());
        }
        final int hideSize=in.readInt();
        final Set<String> hideComponentNames=hideSize == 0 ? Collections.<String>emptySet() : new THashSet<String>(hideSize);
        for (int j=0; j < hideSize; j++) {
          hideComponentNames.add(in.readUTF());
        }
        result.add(new DartImportInfo(importText,StringUtil.nullize(prefix),showComponentNames,hideComponentNames));
      }
      return result;
    }
  }
;
}
