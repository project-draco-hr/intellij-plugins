{
  if (vfile == null) {
    return null;
  }
  new OpenFileDescriptor(project,vfile,offset).navigate(true);
  FileEditor fileEditor=FileEditorManager.getInstance(project).getSelectedEditor(vfile);
  if (fileEditor instanceof TextEditor) {
    final Editor editor=((TextEditor)fileEditor).getEditor();
    editor.getCaretModel().moveToOffset(offset);
    editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
    return editor;
  }
  return null;
}
