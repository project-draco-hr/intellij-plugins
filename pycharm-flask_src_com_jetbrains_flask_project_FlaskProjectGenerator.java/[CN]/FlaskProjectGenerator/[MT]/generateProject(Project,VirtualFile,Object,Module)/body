{
  final PsiDirectory projectDir=PsiManager.getInstance(project).findDirectory(baseDir);
  new WriteCommandAction.Simple(project){
    @Override protected void run() throws Throwable {
      FileTemplate template=FileTemplateManager.getInstance().getInternalTemplate("Flask Main");
      PsiFile appFile;
      try {
        appFile=(PsiFile)FileTemplateUtil.createFromTemplate(template,baseDir.getName() + ".py",null,projectDir);
      }
 catch (      Exception e) {
        Messages.showErrorDialog(project,"Error creating Flask application: " + e.getMessage(),"Create Flask Project");
        return;
      }
      projectDir.createSubdirectory("static");
      projectDir.createSubdirectory("templates");
      appFile.navigate(true);
    }
  }
.execute();
}
