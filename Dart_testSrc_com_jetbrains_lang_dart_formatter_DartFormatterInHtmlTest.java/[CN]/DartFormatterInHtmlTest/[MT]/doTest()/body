{
  myFixture.configureByFile(getTestName(false) + ".html");
  WriteCommandAction.runWriteCommandAction(new Runnable(){
    @Override public void run(){
      CodeStyleManager.getInstance(myFixture.getProject()).reformat(myFixture.getFile());
    }
  }
);
  try {
    myFixture.checkResultByFile(getTestName(false) + ".txt");
  }
 catch (  RuntimeException e) {
    if (!(e.getCause() instanceof FileNotFoundException)) {
      throw e;
    }
    final String path=getTestDataPath() + getTestName(false) + ".txt";
    FileWriter writer=new FileWriter(FileUtil.toSystemDependentName(path));
    try {
      writer.write(myFixture.getFile().getText().trim());
    }
  finally {
      writer.close();
    }
    fail("No output text found. File " + path + " created.");
  }
}
