{
  MavenExecutionRequest request=new DefaultMavenExecutionRequest();
  request.setGlobalSettingsFile(new File(args[0]));
  if (!args[1].equals(" ")) {
    request.setUserSettingsFile(new File(args[1]));
  }
  request.setLocalRepository(plexusContainer.lookup(RepositorySystem.class).createLocalRepository(new File(args[2])));
  request.setSystemProperties(System.getProperties());
  request.setOffline(args[3].equals("t")).setUpdateSnapshots(false).setCacheNotFound(true).setCacheTransferError(true);
  int profilesLength=in.readShort();
  if (profilesLength > 0) {
    List<String> activeProfiles=new ArrayList<String>(profilesLength);
    while (profilesLength-- > 0) {
      activeProfiles.add(in.readUTF());
    }
    request.setActiveProfiles(activeProfiles);
  }
  plexusContainer.lookup(MavenExecutionRequestPopulator.class).populateFromSettings(request,createSettings(request));
  request.setWorkspaceReader(new WorkspaceReaderImpl(in,this));
  return request;
}
