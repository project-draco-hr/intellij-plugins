{
  final Collection<String> paths=myFileNameToPathsMap.get(shortName);
  if (paths != null && !paths.isEmpty()) {
    final VirtualFile file=doFindFileByPath(paths.iterator().next());
    if (file != null) {
      addToMap(myFileNameToFilesMap,shortName,file);
      return file;
    }
  }
  final Collection<VirtualFile> files=ApplicationManager.getApplication().runReadAction(new NullableComputable<Collection<VirtualFile>>(){
    public Collection<VirtualFile> compute(){
      final Project project=getSession().getProject();
      return FilenameIndex.getVirtualFilesByName(project,shortName,GlobalSearchScope.allScope(project));
    }
  }
);
  if (files != null && !files.isEmpty()) {
    final VirtualFile file=files.iterator().next();
    addToMap(myFileNameToFilesMap,shortName,file);
    return file;
  }
  return null;
}
