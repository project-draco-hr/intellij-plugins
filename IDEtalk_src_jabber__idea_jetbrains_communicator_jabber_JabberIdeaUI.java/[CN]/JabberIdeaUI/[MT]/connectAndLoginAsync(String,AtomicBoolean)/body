{
  if (SwingUtilities.isEventDispatchThread()) {
    myIdeFacade.runOnPooledThread(new Runnable(){
      public void run(){
        connectAndLoginAsync(message,connected);
      }
    }
);
    return;
  }
  myFacade.connect();
  if (!myFacade.isConnectedAndAuthenticated()) {
    Runnable runnable=new Runnable(){
      public void run(){
        RegistrationForm.INITIAL_MESSAGE=message;
        login(null);
        if (connected != null) {
          connected.set(myFacade.isConnectedAndAuthenticated());
        }
      }
    }
;
    UIUtil.invokeLater(runnable);
  }
}
