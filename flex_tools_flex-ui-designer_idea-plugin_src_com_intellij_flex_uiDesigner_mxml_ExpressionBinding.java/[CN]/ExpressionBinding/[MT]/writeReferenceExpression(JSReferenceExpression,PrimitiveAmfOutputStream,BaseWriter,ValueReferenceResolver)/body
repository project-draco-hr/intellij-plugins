{
  PsiElement element=resolveReferenceExpression(expression);
  if (element instanceof JSClass) {
    writer.writeClass(((JSClass)element).getQualifiedName());
  }
 else   if (element instanceof JSVariable) {
    VariableReference valueReference=valueReferenceResolver.getNullableValueReference((JSVariable)element);
    if (valueReference != null) {
      out.write(ExpressionMessageTypes.VARIABLE_REFERENCE);
      valueReference.write(out,writer,valueReferenceResolver);
      return;
    }
    writeJSVariable(((JSVariable)element),out,writer,valueReferenceResolver);
  }
 else {
    out.write(ExpressionMessageTypes.MXML_OBJECT_REFERENCE);
    JSReferenceExpression qualifier=(JSReferenceExpression)expression.getQualifier();
    if (qualifier != null) {
      throw new UnsupportedOperationException(expression.getText());
    }
    try {
      valueReferenceResolver.getValueReference(expression.getReferencedName()).write(out,writer,valueReferenceResolver);
    }
 catch (    IllegalStateException e) {
      throw new UnsupportedOperationException(expression.getText());
    }
  }
}
