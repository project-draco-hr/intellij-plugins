{
  definition.hasUnresolvedDependencies=Definition.UnresolvedState.NO;
  CharSequence[] dependencies=definition.dependencies;
  for (int i=0, dependenciesLength=dependencies.length; i < dependenciesLength; i++) {
    CharSequence dependencyId=dependencies[i];
    final Definition dependency=definitionMap.get(dependencyId);
    if (dependency == null && useIndexForFindDefinitions) {
      int length=dependencyId.length();
      if (definitionSearchScope == null) {
        definitionSearchScope=GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module,false);
        fqnBuffer=new char[Math.max(length,512)];
      }
 else       if (fqnBuffer.length < length) {
        fqnBuffer=new char[length];
      }
      String fqn=(String)dependencyId;
      fqn.getChars(0,length,fqnBuffer,0);
      fqnBuffer[fqn.lastIndexOf(':')]='.';
      if (JSResolveUtil.findClassByQName(new String(fqnBuffer,0,length),definitionSearchScope) != null) {
        dependencies[i]=null;
        continue;
      }
    }
    if (dependency == null || dependency.hasUnresolvedDependencies == Definition.UnresolvedState.YES || (dependency.hasUnresolvedDependencies == Definition.UnresolvedState.UNKNOWN && hasUnresolvedDependencies(dependency,dependencyId))) {
      definition.markAsUnresolved(definitionName);
      definition.hasUnresolvedDependencies=Definition.UnresolvedState.YES;
      return true;
    }
  }
  return false;
}
