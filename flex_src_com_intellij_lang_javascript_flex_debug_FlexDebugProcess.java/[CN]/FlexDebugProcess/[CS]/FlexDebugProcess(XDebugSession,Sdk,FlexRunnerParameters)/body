{
  super(session);
  final Sdk debuggerSdk=getDebuggerSdk(flexRunnerParameters,flexSdk);
  myDebuggerVersion=StringUtil.notNullize(debuggerSdk.getVersionString(),"unknown");
  myBreakpointsHandler=new FlexBreakpointsHandler(this);
  mySdkLocation=FileUtil.toSystemIndependentName(flexSdk.getHomePath());
  if (flexRunnerParameters instanceof FlexUnitRunnerParameters) {
    final FlexUnitRunnerParameters flexUnitParams=(FlexUnitRunnerParameters)flexRunnerParameters;
    openFlexUnitConnections(flexUnitParams.getSocketPolicyPort(),flexUnitParams.getPort());
  }
 else {
    myPolicyFileConnection=null;
    myFlexUnitConnection=null;
  }
  final List<String> fdbLaunchCommand=FlexSdkUtils.getCommandLineForSdkTool(session.getProject(),debuggerSdk,getFdbClasspath(),"flex.tools.debugger.cli.DebugCLI",null);
  fdbProcess=FlexBaseRunner.isRunAsAir(flexRunnerParameters) ? launchAir(fdbLaunchCommand,(AirRunnerParameters)flexRunnerParameters,flexSdk) : launchFlex(fdbLaunchCommand,flexRunnerParameters);
  reader=new MyFdbOutputReader(fdbProcess.getInputStream());
  startCommandProcessingThread();
}
