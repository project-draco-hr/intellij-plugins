{
  if (id != null) {
    ensureFilePathToIdMapIsUpToDate();
    final List<String> value=myFilePathToIdMap.getKeysByValue(id);
    if (value != null && value.size() > 0) {
      final String path=value.get(0);
      final VirtualFile fileById=LocalFileSystem.getInstance().findFileByPath(path);
      if (packageName == null) {
        final String mavenStyleSrc="/src/main/flex/";
        int srcIndex=path.indexOf(mavenStyleSrc);
        if (srcIndex > 0) {
          packageName=StringUtil.getPackageName(path.substring(srcIndex + mavenStyleSrc.length()),'/').replace('/','.');
        }
 else {
          srcIndex=path.indexOf(SRC_PATH_ELEMENT);
          if (srcIndex > 0) {
            packageName=StringUtil.getPackageName(path.substring(srcIndex + SRC_PATH_ELEMENT.length()),'/').replace('/','.');
          }
        }
      }
      if (fileById != null) {
        return getThisOrSimilarFileInProject(fileById,packageName);
      }
    }
  }
  if ("<null>".equals(fileName))   return null;
  return packageName == null ? findFile(fileName) : findFile(fileName,packageName);
}
