{
  if (id != null) {
    ensureFilePathToIdMapIsUpToDate();
    List<String> value=myFilePathToIdMap.getKeysByValue(id);
    if (value != null && value.size() > 0) {
      final String path=value.get(0);
      final VirtualFile file=doFindFileByPath(path);
      if (file != null)       return file;
      log("Cannot find file " + fileName + " by id "+ id);
      if (packageName == null) {
        final int srcIndex=path.indexOf(SRC_PATH_ELEMENT);
        if (srcIndex > 0) {
          packageName=StringUtil.getPackageName(path.substring(srcIndex + SRC_PATH_ELEMENT.length()),'/').replace('/','.');
        }
      }
    }
  }
  return findFile(fileName,packageName);
}
