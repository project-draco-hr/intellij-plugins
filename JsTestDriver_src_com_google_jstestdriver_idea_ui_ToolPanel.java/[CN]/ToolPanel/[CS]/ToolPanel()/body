{
  final StatusBar statusBar=new StatusBar(MessageBundle.getBundle());
  final CapturedBrowsersPanel capturedBrowsersPanel=new CapturedBrowsersPanel();
  captureUrl=createCaptureUrl();
  final JButton startServerButton=new JButton(new ServerStartAction());
  final JButton stopServerButton=new JButton(new ServerStopAction());
  LocalManager localManager=new LocalManager(startServerButton,stopServerButton,captureUrl);
  myServerListeners=Arrays.asList(statusBar,capturedBrowsersPanel,localManager);
  for (  ServerListener serverListener : myServerListeners) {
    if (myState.isServerRunning()) {
      serverListener.serverStarted();
      for (      BrowserInfo browserInfo : myState.getCapturedBrowsers()) {
        serverListener.browserCaptured(browserInfo);
      }
    }
 else {
      serverListener.serverStopped();
    }
    myState.addServerListener(serverListener);
  }
  setBackground(UIUtil.getTreeTextBackground());
  setLayout(new BorderLayout());
  add(new JPanel(){
{
      setLayout(new BoxLayout(this,BoxLayout.Y_AXIS));
      add(new JPanel(){
{
          setLayout(new BoxLayout(this,BoxLayout.X_AXIS));
          add(statusBar);
          add(startServerButton);
          add(stopServerButton);
        }
      }
);
      add(new JPanel(){
{
          setLayout(new BoxLayout(this,BoxLayout.X_AXIS));
          add(new JLabel(PluginResources.getCaptureUrlMessage()));
          add(captureUrl);
        }
      }
);
      add(capturedBrowsersPanel);
    }
  }
,BorderLayout.NORTH);
}
