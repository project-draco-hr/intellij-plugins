{
  FileLoader fileLoader=new ProcessingFileLoader(new SimpleFileReader(),Collections.<FileLoadPostProcessor>singleton(new InlineHtmlProcessor(new HtmlDocParser(),new HtmlDocLexer())),new File("."),new NullStopWatch());
  CapturedBrowsers browsers=new CapturedBrowsers(new BrowserIdStrategy(new TimeImpl()));
  JsTestDriverServer.Factory factory=new DefaultServerFactory(browsers,SlaveBrowser.TIMEOUT,new NullPathPrefix(),Sets.<ServerListener>newHashSet(myState));
  ServerStartupAction serverStartupAction=new ServerStartupAction(serverPort,-1,new JstdTestCaseStore(),false,fileLoader,factory);
  try {
    serverStartupAction.run(null);
    myServerStartupAction=serverStartupAction;
  }
 catch (  Exception ex) {
    Messages.showErrorDialog("Can't start JsTestDriver server on port " + serverPort + ".\nMake sure the port is free.","JsTestDriver server launching");
  }
}
