{
  super.setUp();
  myBundleManager=new MyBundleManager(new ManifestHolderRegistryImpl(getProject()),getProject());
  myBundleManager.addManifestHolder(makeHolder("Manifest.MF","Bundle-SymbolicName: org.eclipse.ui\n" + "Bundle-Version: 3.4.1\n" + "Require-Bundle: org.eclipse.ui.workbench;bundle-version=\"[3.3.0,4.0.0)\";visibility:=reexport","org.eclipse.ui"));
  myBundleManager.addManifestHolder(makeHolder("Manifest2.MF","Bundle-SymbolicName: org.eclipse.ui.workbench\n" + "Bundle-Version: 3.4.1\n" + "Require-Bundle: org.eclipse.core.expressions;bundle-version=\"[3.2.0,4.0.0)\";visibility:=reexport","org.eclipse.ui.workbench"));
  myBundleManager.addManifestHolder(makeHolder("Manifest3.MF","Bundle-SymbolicName: org.eclipse.core.expressions\n" + "Bundle-Version: 3.4.1","org.eclipse.core.expressions"));
  myBundleManager.addManifestHolder(makeHolder("Manifest4.MF","Bundle-SymbolicName: org.eclipse.circular.one\n" + "Bundle-Version: 3.4.1\n" + "Require-Bundle: org.eclipse.circular.two;bundle-version=\"[3.2.0, 4.0.0)\";visibility:=reexport","org.eclipse.circular.one"));
  myBundleManager.addManifestHolder(makeHolder("Manifest5.MF","Bundle-SymbolicName: org.eclipse.circular.two\n" + "Bundle-Version: 3.4.1\n" + "Require-Bundle: org.eclipse.circular.one;bundle-version=\"[3.2.0, 4.0.0)\";visibility:=reexport","org.eclipse.circular.two"));
  myBundleManager.addManifestHolder(makeHolder("Manifest6.MF","Bundle-SymbolicName: org.eclipse.fragment.host\n" + "Bundle-Version: 2.0.0\n" + "Require-Bundle: org.eclipse.ui.workbench;bundle-version=\"[3.3.0,4.0.0)\";visibility:=reexport","org.eclipse.fragment.host"));
  myBundleManager.addManifestHolder(makeHolder("Manifest7.MF","Bundle-SymbolicName: org.eclipse.fragment.fragment\n" + "Bundle-Version: 2.0.0\n" + "Require-Bundle: org.eclipse.circular.one;bundle-version=\"[3.3.0,4.0.0)\";visibility:=reexport\n"+ "Fragment-Host: org.eclipse.fragment.host","org.eclipse.fragment.fragment"));
  myBundleManager.addManifestHolder(makeHolder("Manifest8.MF","Bundle-SymbolicName: org.eclipse.fragment.fragment\n" + "Bundle-Version: 1.0.0\n" + "Require-Bundle: org.eclipse.ui;bundle-version=\"[3.3.0,4.0.0)\";visibility:=reexport\n"+ "Fragment-Host: org.eclipse.fragment.host","org.eclipse.fragment.fragment.old"));
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      LibraryTable.ModifiableModel projectLibraryModel=ProjectLibraryTable.getInstance(getProject()).getModifiableModel();
      myFakeJarLibrary=projectLibraryModel.createLibrary("fakeJar");
      Library.ModifiableModel libraryModel=myFakeJarLibrary.getModifiableModel();
      libraryModel.addRoot("file:///foo/bar/" + FAKE_JAR_NAME,OrderRootType.CLASSES);
      libraryModel.commit();
      projectLibraryModel.commit();
    }
  }
);
}
