{
  final IosPackagingOptions packagingOptions=bc.getIosPackagingOptions();
  final AirSigningOptions signingOptions=packagingOptions.getSigningOptions();
  final String keystorePassword=passwords.getKeystorePassword(signingOptions.getKeystorePath());
  final String keyPassword=passwords.getKeyPassword(signingOptions.getKeystorePath(),signingOptions.getKeyAlias());
  return new AdtTask(module.getProject(),bc.getSdk()){
    protected void appendAdtOptions(    List<String> command){
      command.add("-package");
      command.add("-target");
switch (packageType) {
case DebugOverNetwork:
        command.add(fastPackaging ? "ipa-debug-interpreter" : "ipa-debug");
      command.add("-connect");
    break;
case Test:
  command.add(fastPackaging ? "ipa-test-interpreter" : "ipa-test");
break;
case TestOnSimulator:
command.add("ipa-test-interpreter-simulator");
break;
case DebugOnSimulator:
command.add("ipa-debug-interpreter-simulator");
break;
case AdHoc:
command.add("ipa-ad-hoc");
break;
case AppStore:
command.add("ipa-app-store");
break;
}
appendSigningOptions(command,packagingOptions,keystorePassword,keyPassword);
if (packageType != IOSPackageType.TestOnSimulator && packageType != IOSPackageType.DebugOnSimulator) {
command.add("-provisioning-profile");
command.add(FileUtil.toSystemDependentName(signingOptions.getProvisioningProfilePath()));
}
appendPaths(command,module,bc,packagingOptions,iosSDKPath,".ipa");
}
}
;
}
