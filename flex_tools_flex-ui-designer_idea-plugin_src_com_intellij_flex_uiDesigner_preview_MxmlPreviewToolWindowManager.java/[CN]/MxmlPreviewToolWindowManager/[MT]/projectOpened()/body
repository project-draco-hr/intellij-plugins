{
  project.getMessageBus().connect(project).subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,new MyFileEditorManagerListener());
  final Alarm syncAlarm=new Alarm();
  PsiManager.getInstance(project).addPsiTreeChangeListener(new PsiTreeChangeAdapter(){
    public void childrenChanged(    @NotNull PsiTreeChangeEvent event){
    }
    public void childRemoved(    @NotNull PsiTreeChangeEvent event){
      update(event);
    }
    public void childAdded(    @NotNull PsiTreeChangeEvent event){
      update(event);
    }
    public void childReplaced(    @NotNull PsiTreeChangeEvent event){
      update(event);
    }
    @Override public void propertyChanged(    @NotNull PsiTreeChangeEvent event){
    }
    private void update(    final PsiTreeChangeEvent event){
      if (!toolWindowVisible || event.getFile() == null || toolWindowForm.getFile() != event.getFile()) {
        return;
      }
      syncAlarm.cancelAllRequests();
      syncAlarm.addRequest(new Synchronizer(event),100,ModalityState.NON_MODAL);
    }
  }
,project);
}
