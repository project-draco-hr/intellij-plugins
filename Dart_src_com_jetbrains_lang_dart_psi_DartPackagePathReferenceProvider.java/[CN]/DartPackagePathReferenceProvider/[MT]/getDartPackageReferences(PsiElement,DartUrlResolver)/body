{
  final TextRange textRange=ElementManipulators.getValueTextRange(psiElement);
  final String referenceText=psiElement.getText().substring(textRange.getStartOffset(),textRange.getEndOffset());
  final FileReferenceSet referenceSet=new FileReferenceSet(referenceText,psiElement,textRange.getStartOffset(),null,true){
    public FileReference createFileReference(    final TextRange range,    final int index,    final String text){
      return new DartPackageAwareFileReference(this,range,index,text,dartResolver);
    }
    @NotNull @Override public Collection<PsiFileSystemItem> computeDefaultContexts(){
      final Collection<PsiFileSystemItem> items=super.computeDefaultContexts();
      final VirtualFile pubspec=dartResolver.getPubspecYamlFile();
      final VirtualFile projectRoot=pubspec != null ? pubspec.getParent() : null;
      final VirtualFile packages=projectRoot != null ? projectRoot.findChild(PACKAGES_FOLDER_NAME) : null;
      if (packages != null) {
        items.remove(psiElement.getManager().findDirectory(packages));
      }
      return items;
    }
  }
;
  return referenceSet.getAllReferences();
}
