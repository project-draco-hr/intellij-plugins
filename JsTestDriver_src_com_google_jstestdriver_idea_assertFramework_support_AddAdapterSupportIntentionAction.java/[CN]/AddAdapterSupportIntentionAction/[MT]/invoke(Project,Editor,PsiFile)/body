{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      AddAdapterSupportDialog dialog=new AddAdapterSupportDialog(project,file,myAssertionFrameworkName,myAdapterSourceFilesProvider.get(),myAdapterHomePageUrl);
      final AsyncResult<Boolean> result=dialog.showAndGetOk();
      final VirtualFile virtualFile=file.getVirtualFile();
      if (virtualFile != null) {
        result.doWhenDone(new AsyncResult.Handler<Boolean>(){
          @Override public void run(          Boolean ok){
            if (ok) {
              FileContentUtil.reparseFiles(project,Arrays.<VirtualFile>asList(virtualFile),true);
            }
          }
        }
);
      }
    }
  }
);
}
