{
  Movie movie=new Movie();
  TagDecoder tagDecoder=new TagDecoder(in);
  MovieDecoder movieDecoder=new MovieDecoder(movie);
  tagDecoder.parse(movieDecoder);
  movie.uuid=null;
  movie.enableDebugger=null;
  movie.bgcolor=null;
  movie.topLevelClass=null;
  movie.productInfo=null;
  try {
    if (movie.frames.size() > 1) {
      movie.frames.remove(1);
    }
    merge(movie.frames.get(0).doABCs,true,true);
  }
 catch (  com.intellij.flex.uiDesigner.abc.DecoderException e) {
    throw new IOException(e);
  }
  TagEncoder handler=new TagEncoder();
  System.setProperty("flex.swf.uncompressed","true");
  MovieEncoder encoder=new MovieEncoder(handler);
  encoder.export(movie);
  final FileOutputStream out=new FileOutputStream(outFile);
  try {
    handler.writeTo(out);
  }
  finally {
    out.close();
  }
}
