{
  final String key=createKey(libraryCollector.sdkLibraries);
  FlexLibrarySet flexLibrarySet=(FlexLibrarySet)librarySets.get(key);
  if (flexLibrarySet == null) {
    final Set<CharSequence> globalDefinitions=getGlobalDefinitions(libraryCollector.getGlobalLibrary());
    flexLibrarySet=(FlexLibrarySet)createAndRegisterLibrarySet(null,libraryCollector.sdkLibraries,libraryCollector.getFlexSdkVersion(),module,true,new Condition<String>(){
      @Override public boolean value(      String name){
        return globalDefinitions.contains(name);
      }
    }
);
    librarySets.put(key,flexLibrarySet);
  }
  return flexLibrarySet;
}
