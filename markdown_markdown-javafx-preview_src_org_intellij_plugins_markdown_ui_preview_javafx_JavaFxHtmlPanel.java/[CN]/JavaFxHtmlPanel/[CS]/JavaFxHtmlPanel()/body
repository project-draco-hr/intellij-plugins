{
  myPanel=new JFXPanel();
  Platform.setImplicitExit(false);
  Platform.runLater(new Runnable(){
    @Override public void run(){
      myWebView=new WebView();
      updateFontSmoothingType(myWebView,MarkdownApplicationSettings.getInstance().getMarkdownPreviewSettings().isUseGrayscaleRendering());
      myWebView.setContextMenuEnabled(false);
      final WebEngine engine=myWebView.getEngine();
      engine.getLoadWorker().stateProperty().addListener(new BridgeSettingListener());
      engine.getLoadWorker().stateProperty().addListener(new ScrollPreservingListener());
      engine.loadContent("<html><body>" + getScriptingLines() + "</body></html>");
      final Scene scene=new Scene(myWebView);
      myPanel.setScene(scene);
    }
  }
);
  subscribeForGrayscaleSetting();
}
