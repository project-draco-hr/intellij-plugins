{
  JstdTestFileStructure jsTestFileStructure=new JstdTestFileStructure(jsFile);
  List<JSStatement> statements=JsPsiUtils.listStatementsInExecutionOrder(jsFile);
  for (  JSStatement statement : statements) {
    fillJsTestFileStructure(jsTestFileStructure,statement);
  }
  for (  JstdTestCaseStructure testCaseStructure : jsTestFileStructure.getTestCaseStructures()) {
    for (    JstdTestStructure testStructure : testCaseStructure.getTestStructures()) {
      PsiElement anchor=testStructure.getTestMethodNameDeclaration();
      anchor.putUserData(JstdTestFileStructure.TEST_ELEMENT_NAME_KEY,testStructure.getName());
      JSDefinitionExpression wholeLeftDefExpr=testStructure.getWholeLeftDefExpr();
      if (wholeLeftDefExpr != null) {
        wholeLeftDefExpr.putUserData(JstdTestFileStructure.PROTOTYPE_TEST_DEFINITION_KEY,true);
      }
    }
    JSExpression testCaseMethodExpr=testCaseStructure.getEnclosingCallExpression().getMethodExpression();
    if (testCaseMethodExpr != null) {
      testCaseMethodExpr.putUserData(JstdTestFileStructure.TEST_ELEMENT_NAME_KEY,testCaseStructure.getName());
    }
  }
  return jsTestFileStructure;
}
