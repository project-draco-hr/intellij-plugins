{
  final CompilerConfigGenerator generator=new CompilerConfigGenerator(module,bc,FlexBuildConfigurationManager.getInstance(module).getModuleLevelCompilerOptions(),FlexProjectLevelCompilerOptionsHolder.getInstance(module.getProject()).getProjectLevelCompilerOptions());
  String text=generator.generateConfigFileText();
  if (bc.isTempBCForCompilation()) {
    final FlexIdeBuildConfiguration originalBC=FlexBuildConfigurationManager.getInstance(module).findConfigurationByName(bc.getName());
    final boolean makeExternalLibsMerged=originalBC != null && originalBC.getOutputType() == OutputType.Library;
    text=FlexCompilerConfigFileUtil.mergeWithCustomConfigFile(text,bc.getCompilerOptions().getAdditionalConfigFilePath(),makeExternalLibsMerged,null);
  }
  final String postfix=bc.getMainClass().equals(FlexUnitPrecompileTask.getFlexUnitLauncherName(module.getName())) ? "flexunit" : bc.isTempBCForCompilation() ? StringUtil.getShortName(bc.getMainClass()) : null;
  final String name=getConfigFileName(module,bc.getName(),PlatformUtils.getPlatformPrefix().toLowerCase(),postfix);
  return getOrCreateConfigFile(module.getProject(),name,text);
}
