{
  final Project project=e.getData(CommonDataKeys.PROJECT);
  if (project == null)   return Pair.create(null,null);
  Editor editor=e.getData(CommonDataKeys.EDITOR);
  PsiFile psiFile=e.getData(CommonDataKeys.PSI_FILE);
  final VirtualFile file=e.getData(CommonDataKeys.VIRTUAL_FILE);
  if (file != null && JavaScriptSupportLoader.isFlexMxmFile(file)) {
    editor=BaseCodeInsightAction.getInjectedEditor(project,editor);
    psiFile=PsiUtilBase.getPsiFileInEditor(editor,project);
  }
  return Pair.create(editor,psiFile);
}
