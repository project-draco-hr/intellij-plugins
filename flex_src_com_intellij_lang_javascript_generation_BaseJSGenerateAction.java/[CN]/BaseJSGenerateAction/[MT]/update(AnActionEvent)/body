{
  final Pair<Editor,PsiFile> editorAndPsiFile=getEditorAndPsiFile(e);
  final VirtualFile file=e.getData(PlatformDataKeys.VIRTUAL_FILE);
  final Editor editor=editorAndPsiFile.first;
  final PsiFile psiFile=editorAndPsiFile.second;
  JSClass jsClass=null;
  if (file != null && psiFile != null && editor != null) {
    if (JavaScriptSupportLoader.isFlexMxmFile(file) || (file.getFileType() == JavaScriptSupportLoader.JAVASCRIPT && psiFile.getLanguage() == JavaScriptSupportLoader.ECMA_SCRIPT_L4)) {
      jsClass=BaseJSGenerateHandler.findClass(psiFile,editor);
    }
  }
  final boolean status=jsClass != null && !jsClass.isInterface() && isApplicableForJsClass(jsClass,psiFile,editor);
  e.getPresentation().setEnabled(status);
  e.getPresentation().setVisible(status);
}
