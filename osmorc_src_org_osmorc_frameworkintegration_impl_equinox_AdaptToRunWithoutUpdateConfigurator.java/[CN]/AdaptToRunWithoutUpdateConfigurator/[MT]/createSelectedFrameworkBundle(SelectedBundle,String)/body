{
  String bundleUrl=BundleCompiler.convertJarUrlToFileUrl(url);
  bundleUrl=BundleCompiler.fixFileURL(bundleUrl);
  String bundleName=CachingBundleInfoProvider.getBundleSymbolicName(bundleUrl);
  SelectedBundle bundle=null;
  if (bundleName != null) {
    bundle=prototypeBundle;
    String bundleVersion=CachingBundleInfoProvider.getBundleVersions(bundleUrl);
    String displayName=bundleName + " - " + bundleVersion;
    if (bundle != null) {
      bundle.setName(displayName);
      bundle.setBundleUrl(bundleUrl);
    }
 else {
      bundle=new SelectedBundle(displayName,bundleUrl,SelectedBundle.BundleType.FrameworkBundle);
    }
  }
  return bundle;
}
