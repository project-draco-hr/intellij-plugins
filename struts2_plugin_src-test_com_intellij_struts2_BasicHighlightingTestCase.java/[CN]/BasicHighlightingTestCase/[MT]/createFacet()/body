{
  final RunResult<StrutsFacet> runResult=new WriteCommandAction<StrutsFacet>(myProject){
    protected void run(    final Result<StrutsFacet> result) throws Throwable {
      final ModifiableFacetModel model=FacetManager.getInstance(myModule).createModifiableModel();
      final StrutsFacet facet=StrutsFacetType.INSTANCE.createFacet(myModule,StrutsFacetType.INSTANCE.getPresentableName(),StrutsFacetType.INSTANCE.createDefaultConfiguration(),null);
      result.setResult(facet);
      model.addFacet(facet);
      model.commit();
    }
  }
.execute();
  final Throwable throwable=runResult.getThrowable();
  if (throwable != null) {
    throw new RuntimeException("error setting up StrutsFacet",throwable);
  }
  return runResult.getResultObject();
}
