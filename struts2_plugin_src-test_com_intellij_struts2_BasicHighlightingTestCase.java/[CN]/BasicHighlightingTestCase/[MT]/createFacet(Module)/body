{
  return new WriteCommandAction<StrutsFacet>(module.getProject()){
    @Override protected void run(    final Result<StrutsFacet> result) throws Throwable {
      final FacetManager facetManager=FacetManager.getInstance(module);
      final WebFacet webFacet=facetManager.addFacet(WebFacetType.getInstance(),"web",null);
      final StrutsFacet strutsFacet=facetManager.addFacet(StrutsFacetType.getInstance(),"struts2",webFacet);
      result.setResult(strutsFacet);
    }
  }
.execute().throwException().getResultObject();
}
