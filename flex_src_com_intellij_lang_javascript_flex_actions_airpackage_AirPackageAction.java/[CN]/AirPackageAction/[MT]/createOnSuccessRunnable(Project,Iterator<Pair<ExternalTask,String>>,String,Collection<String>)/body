{
  return new Runnable(){
    public void run(){
      allCreatedPackages.add(createdPackagePath);
      if (iterator.hasNext()) {
        final Pair<ExternalTask,String> taskAndPackagePath=iterator.next();
        final ExternalTask task=taskAndPackagePath.first;
        final String packagePath=taskAndPackagePath.second;
        final Runnable onSuccessRunnable=createOnSuccessRunnable(project,iterator,packagePath,allCreatedPackages);
        ExternalTask.runInBackground(task,FlexBundle.message("packaging.air.application",PathUtil.getFileName(packagePath)),onSuccessRunnable,createFailureConsumer(project,packagePath,task));
      }
 else {
        final String hrefs=StringUtil.join(allCreatedPackages,new Function<String,String>(){
          public String fun(          final String packagePath){
            return "<a href='" + packagePath + "'>"+ PathUtil.getFileName(packagePath)+ "</a>";
          }
        }
,"<br>");
        final String message=FlexBundle.message("air.application.created",allCreatedPackages.size(),hrefs);
        final NotificationListener listener=new NotificationListener(){
          public void hyperlinkUpdate(          @NotNull final Notification notification,          @NotNull final HyperlinkEvent event){
            if (event.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
              notification.expire();
              final String packagePath=event.getDescription();
              ShowFilePathAction.openFile(new File(packagePath));
            }
          }
        }
;
        NOTIFICATION_GROUP.createNotification("",message,NotificationType.INFORMATION,listener).notify(project);
      }
    }
  }
;
}
