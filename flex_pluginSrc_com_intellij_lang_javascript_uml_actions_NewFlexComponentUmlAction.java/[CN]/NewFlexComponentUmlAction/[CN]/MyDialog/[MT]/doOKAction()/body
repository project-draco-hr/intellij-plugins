{
  String qName=getQualifiedName();
  if (NewFlexComponentAction.isClassifierTemplate(getSelectedTemplate()) && !JSUtils.isValidClassName(qName,true)) {
    Messages.showErrorDialog(getContentPane(),JSBundle.message("0.is.not.a.legal.name",qName),CommonBundle.getErrorTitle());
    return;
  }
  Module module=myDirectory != null ? ModuleUtil.findModuleForPsiElement(myDirectory) : null;
  GlobalSearchScope scope=GlobalSearchScope.projectScope(myProject);
  myDirectory=JSRefactoringUtil.chooseOrCreateDirectoryForClass(myProject,module,scope,StringUtil.getPackageName(qName),StringUtil.getShortName(qName),myDirectory,ThreeState.UNSURE);
  if (myDirectory == null) {
    return;
  }
  close(DialogWrapper.OK_EXIT_CODE);
}
