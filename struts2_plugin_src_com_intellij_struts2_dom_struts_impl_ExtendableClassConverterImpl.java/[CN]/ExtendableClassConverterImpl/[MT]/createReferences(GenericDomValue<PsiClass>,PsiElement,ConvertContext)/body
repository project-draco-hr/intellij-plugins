{
  final GlobalSearchScope scope=getResolveScope(psiClassGenericDomValue);
  final JavaClassReferenceProvider javaClassReferenceProvider=new JavaClassReferenceProvider(scope,context.getPsiManager().getProject());
  javaClassReferenceProvider.setOption(JavaClassReferenceProvider.INSTANTIATABLE,Boolean.TRUE);
  javaClassReferenceProvider.setOption(JavaClassReferenceProvider.CONCRETE,Boolean.TRUE);
  javaClassReferenceProvider.setOption(JavaClassReferenceProvider.NOT_INTERFACE,Boolean.TRUE);
  javaClassReferenceProvider.setSoft(true);
  PsiReference[] javaClassReferences=javaClassReferenceProvider.getReferencesByElement(element);
  @NonNls String[] referenceTypes=new String[]{"class"};
  for (  final ExtendableClassConverterContributor contributor : Extensions.getExtensions(EP_NAME)) {
    if (contributor.isSuitable(context)) {
      final PsiReference[] additionalReferences=contributor.getReferencesByElement(element,new ProcessingContext());
      javaClassReferences=ArrayUtil.mergeArrays(javaClassReferences,additionalReferences,PsiReference.class);
      referenceTypes=ArrayUtil.append(referenceTypes,contributor.getContributorType());
    }
  }
  psiClassGenericDomValue.putUserData(REFERENCES_TYPES,referenceTypes);
  return javaClassReferences;
}
