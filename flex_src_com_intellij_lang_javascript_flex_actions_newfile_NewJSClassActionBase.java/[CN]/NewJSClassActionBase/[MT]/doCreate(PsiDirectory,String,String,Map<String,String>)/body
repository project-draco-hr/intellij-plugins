{
  String packageName=DirectoryIndex.getInstance(dir.getProject()).getPackageName(dir.getVirtualFile());
  try {
    PsiFile file=(PsiFile)CreateClassOrInterfaceAction.createClass(className,packageName,dir,templateName);
    return file;
  }
 catch (  Exception e) {
    throw new IncorrectOperationException(e.getMessage(),e);
  }
}
