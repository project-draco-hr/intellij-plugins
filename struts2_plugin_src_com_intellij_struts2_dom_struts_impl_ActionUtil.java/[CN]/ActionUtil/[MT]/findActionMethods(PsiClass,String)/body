{
  final Module module=ModuleUtilCore.findModuleForPsiElement(actionClass);
  if (module == null) {
    return Collections.emptyList();
  }
  final GlobalSearchScope scope=GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module,false);
  final PsiClassType stringType=PsiType.getJavaLangString(actionClass.getManager(),scope);
  final PsiElementFactory psiElementFactory=JavaPsiFacade.getInstance(actionClass.getProject()).getElementFactory();
  final PsiClassType resultType=psiElementFactory.createTypeByFQClassName("com.opensymphony.xwork2.Result",scope);
  final boolean searchForMethod=methodName != null;
  final List<PsiMethod> actionMethods=new SmartList<PsiMethod>();
  final PsiMethod[] methods=searchForMethod ? actionClass.findMethodsByName(methodName,true) : actionClass.getAllMethods();
  for (  final PsiMethod psiMethod : methods) {
    if (psiMethod.isConstructor()) {
      continue;
    }
    final PsiModifierList modifiers=psiMethod.getModifierList();
    if (!modifiers.hasModifierProperty(PsiModifier.PUBLIC) || modifiers.hasModifierProperty(PsiModifier.STATIC) || modifiers.hasModifierProperty(PsiModifier.ABSTRACT)) {
      continue;
    }
    if (psiMethod.getParameterList().getParametersCount() != 0) {
      continue;
    }
    final String psiMethodName=psiMethod.getName();
    if (Comparing.equal(psiMethodName,"toString")) {
      continue;
    }
    if (PropertyUtil.isSimplePropertyGetter(psiMethod) && actionClass.findFieldByName(PropertyUtil.getPropertyName(psiMethod),true) != null) {
      continue;
    }
    final PsiType type=psiMethod.getReturnType();
    if (type != null && type instanceof PsiClassType && (type.equals(stringType) || type.equals(resultType))) {
      if (searchForMethod) {
        return Collections.singletonList(psiMethod);
      }
      final Condition<PsiMethod> nameCondition=new Condition<PsiMethod>(){
        @Override public boolean value(        PsiMethod method){
          return psiMethodName.equals(method.getName());
        }
      }
;
      if (!ContainerUtil.exists(actionMethods,nameCondition)) {
        actionMethods.add(psiMethod);
      }
    }
  }
  return actionMethods;
}
