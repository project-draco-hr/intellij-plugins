{
  VirtualFile servedDir=null;
  String pubServePath=null;
  int slashIndex=-1;
  while ((slashIndex=path.indexOf('/',slashIndex + 1)) != -1) {
    final String pathPart=path.substring(0,slashIndex);
    final VirtualFile dir=WebServerPathToFileManager.getInstance(project).findVirtualFile(pathPart);
    if (dir == null || !dir.isDirectory()) {
      continue;
    }
    final VirtualFile parentDir=dir.getParent();
    if (parentDir != null && parentDir.findChild(PubspecYamlUtil.PUBSPEC_YAML) != null) {
      if ("build".equals(dir.getName())) {
        return null;
      }
      servedDir=dir;
      pubServePath=path.substring(slashIndex);
    }
  }
  return servedDir != null ? Pair.create(servedDir,escapeUrl(pubServePath)) : null;
}
