{
  Runnable runnable=new Runnable(){
    @Override public void run(){
      for (      JSNamedElementNode el : selectedElements) {
        createMethodsFix.addElementToProcess((JSNamedElement)el.getPsiElement());
      }
      createMethodsFix.beforeInvoke(project,editor,file);
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          try {
            createMethodsFix.invoke(project,editor,file);
          }
 catch (          IncorrectOperationException ex) {
            Logger.getInstance(getClass().getName()).error(ex);
          }
        }
      }
);
    }
  }
;
  if (CommandProcessor.getInstance().getCurrentCommand() == null) {
    CommandProcessor.getInstance().executeCommand(project,runnable,getClass().getName(),null);
  }
 else {
    runnable.run();
  }
}
