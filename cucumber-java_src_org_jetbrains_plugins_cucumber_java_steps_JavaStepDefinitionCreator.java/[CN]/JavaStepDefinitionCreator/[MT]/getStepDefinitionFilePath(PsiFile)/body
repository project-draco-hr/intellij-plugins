{
  final VirtualFile vFile=file.getVirtualFile();
  if (file instanceof PsiJavaFile && vFile != null) {
    String packageName=((PsiJavaFile)file).getPackageName();
    if (StringUtil.isEmptyOrSpaces(packageName)) {
      return vFile.getNameWithoutExtension();
    }
 else {
      return packageName + "." + vFile.getNameWithoutExtension();
    }
  }
  return file.getName();
}
