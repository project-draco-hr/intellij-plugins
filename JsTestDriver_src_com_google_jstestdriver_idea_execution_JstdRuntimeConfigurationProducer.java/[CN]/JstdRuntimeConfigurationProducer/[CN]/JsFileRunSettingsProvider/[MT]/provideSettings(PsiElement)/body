{
  PsiFile psiFile=psiElement.getContainingFile();
  if (psiFile == null) {
    return null;
  }
  final VirtualFile virtualFile=psiFile.getVirtualFile();
  if (virtualFile == null || virtualFile.getFileType() != JavaScriptSupportLoader.JAVASCRIPT) {
    return null;
  }
  Project project=psiFile.getProject();
  JSIndexEntry entry=JavaScriptIndex.getInstance(project).getEntryForFile(psiFile);
  if (entry == null || !entry.isTestFile()) {
    return null;
  }
  JstdRunSettings.Builder builder=new JstdRunSettings.Builder();
  builder.setTestType(TestType.JS_FILE);
  List<VirtualFile> jstdConfigFiles=JstdTestFilePathIndex.findConfigFilesInProject(virtualFile,project);
  if (jstdConfigFiles.size() == 1) {
    builder.setConfigFile(jstdConfigFiles.get(0).getPath());
  }
  builder.setJSFilePath(virtualFile.getPath());
  builder.setServerType(ServerType.INTERNAL);
  return builder.build();
}
