{
  if (!(psiElement.getContainingFile() instanceof JSFile)) {
    return null;
  }
  JSFile jsFile=(JSFile)psiElement.getContainingFile();
  VirtualFile virtualFile=jsFile.getVirtualFile();
  if (virtualFile == null) {
    return null;
  }
  NavigationRegistry navigationRegistry=NavigationUtils.fetchNavigationRegistryByJsFile(jsFile);
  if (navigationRegistry == null) {
    return null;
  }
  PsiElement current=psiElement;
  while (current != jsFile) {
    Object target=navigationRegistry.getTarget(current);
    if (target instanceof TestCase) {
      TestCase testCase=(TestCase)target;
      return new JstdRunSettings.Builder().setTestType(TestType.TEST_CASE).setJSFilePath(virtualFile.getPath()).setTestCaseName(testCase.getName()).build();
    }
    if (target instanceof Test) {
      Test test=(Test)target;
      return new JstdRunSettings.Builder().setTestType(TestType.TEST_METHOD).setJSFilePath(virtualFile.getPath()).setTestCaseName(test.getTestCase().getName()).setTestMethodName(test.getName()).build();
    }
    current=current.getParent();
  }
  return null;
}
