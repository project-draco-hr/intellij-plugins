{
  for (  Ring ring : ringsList) {
    final List<CircleSector> sectors=ring.mySectors;
    for (    CircleSector sector : sectors) {
      double height=0;
      for (      NodeGroup group : sector.myOrderedNodes) {
        double nodeHeight=getNodeHeight(nodesMap,group.myNode);
        double templatesHeight=0;
        for (        AngularUiRouterNode node : group.myTemplateNodes) {
          templatesHeight+=getNodeHeight(nodesMap,node);
        }
        group.mySumHeight=Math.max(nodeHeight,templatesHeight);
        nodeHeight=group.mySumHeight;
        height+=nodeHeight + inset;
      }
      sector.mySumHeight=height;
    }
  }
  for (int i=ringsList.size() - 1; i >= 0; i--) {
    final Ring ring=ringsList.get(i);
    final List<CircleSector> sectors=ring.mySectors;
    for (    CircleSector sector : sectors) {
      double height=0;
      final Set<CircleSector> circleSectorSet=sector.myChildren;
      for (      CircleSector circleSector : circleSectorSet) {
        height+=circleSector.mySumHeight + inset;
      }
      sector.mySumHeight=Math.max(sector.mySumHeight,height);
    }
  }
}
