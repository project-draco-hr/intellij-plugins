{
  LOG.assertTrue(!documentOpening);
  documentOpening=true;
  final boolean appClosed=isApplicationClosed();
  boolean hasError=true;
  try {
    if (appClosed || !Client.getInstance().isModuleRegistered(module)) {
      final Sdk sdk=FlexUtils.getSdkForActiveBC(module);
      if (sdk == null || !checkFlexSdkVersion(sdk)) {
        reportInvalidFlexSdk(module,debug,sdk);
        return;
      }
    }
    hasError=false;
  }
  finally {
    if (hasError) {
      documentOpening=false;
    }
  }
  final RenderDocumentTask renderDocumentTask=new RenderDocumentTask(psiFile,actionCallback);
  ProgressManager.getInstance().run(appClosed ? new DesignerApplicationLauncher(module,debug,renderDocumentTask) : new DocumentTaskExecutor(module,renderDocumentTask));
}
