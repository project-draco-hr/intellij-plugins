{
  LOG.debug("Presence changed for " + jabberId);
  final User user=myUserModel.findUser(getSimpleId(jabberId),getName());
  if (user != null) {
    updateIsIDEtalkClient(jabberId,user);
    final UserPresence presence=_getUserPresence(user);
    IDEtalkEvent event=createPresenceChangeEvent(user,presence);
    if (event != null) {
      getBroadcaster().doChange(event,new Runnable(){
        public void run(){
          myUser2Presence.put(user,presence);
        }
      }
);
    }
  }
}
