{
  final SpringModel springModel=getSpringModel();
  if (springModel == null) {
    return EMPTY_ARRAY;
  }
  final PsiClass subClass=getPossibleSubClass();
  final Collection<? extends SpringBeanPointer> list;
  if (subClass != null) {
    list=springModel.findBeansByPsiClassWithInheritance(subClass.getQualifiedName());
  }
 else {
    list=springModel.getAllCommonBeans();
  }
  final List variants=new ArrayList(list.size());
  for (  final SpringBeanPointer bean : list) {
    if (bean.isAbstract()) {
      continue;
    }
    final String beanName=bean.getName();
    final PsiFile psiFile=bean.getContainingFile();
    if (psiFile != null && StringUtil.isNotEmpty(beanName)) {
      variants.add(LookupElementBuilder.create(beanName).withIcon(bean.getBeanIcon()).withTailText(" (" + psiFile.getName() + ")",true));
    }
  }
  return ArrayUtil.toObjectArray(variants,LookupElementBuilder.class);
}
