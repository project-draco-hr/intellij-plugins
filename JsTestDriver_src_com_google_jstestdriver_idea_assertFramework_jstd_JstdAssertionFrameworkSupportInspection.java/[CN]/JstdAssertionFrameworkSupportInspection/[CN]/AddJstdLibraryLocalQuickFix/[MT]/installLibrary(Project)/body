{
  List<VirtualFile> sources=getLibrarySourceFiles();
  JsLibraryHelper libraryHelper=new JsLibraryHelper(project);
  ScriptingLibraryModel libraryModel=libraryHelper.createJsLibrary(LIBRARY_NAME,sources);
  String dialogTitle="Adding JsTestDriver assertion framework support";
  if (libraryModel == null) {
    Messages.showErrorDialog("Unable to create '" + LIBRARY_NAME + "' JavaScript library",dialogTitle);
    return;
  }
  VirtualFile projectRootDir=project.getBaseDir();
  if (projectRootDir == null) {
    LOG.error("Project baseDir is null!");
    return;
  }
  boolean associated=libraryHelper.associateLibraryWithDir(libraryModel,projectRootDir);
  if (!associated) {
    Messages.showErrorDialog("Unable to associate '" + LIBRARY_NAME + "' JavaScript library with project",dialogTitle);
  }
}
