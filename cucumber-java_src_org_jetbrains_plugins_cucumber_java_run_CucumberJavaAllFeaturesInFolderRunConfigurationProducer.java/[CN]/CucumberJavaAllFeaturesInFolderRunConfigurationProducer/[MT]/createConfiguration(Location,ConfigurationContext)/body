{
  if (!LocationUtil.isJarAttached(location,CUCUMBER_MAIN_CLASS,new PsiDirectory[]{(PsiDirectory)mySourceElement}))   return null;
  RunnerAndConfigurationSettings result=super.createConfiguration(location,context);
  CucumberJavaRunConfiguration runConfiguration=(CucumberJavaRunConfiguration)result.getConfiguration();
  runConfiguration.getEnvs().put("current_dir",getFileToRun().getPath());
  return result;
}
