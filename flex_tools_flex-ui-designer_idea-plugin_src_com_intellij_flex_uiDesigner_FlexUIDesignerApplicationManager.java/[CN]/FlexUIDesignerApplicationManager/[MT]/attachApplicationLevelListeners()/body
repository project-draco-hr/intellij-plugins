{
  projectManagerListener=new MyProjectManagerListener();
  Application application=ApplicationManager.getApplication();
  ProjectManager.getInstance().addProjectManagerListener(projectManagerListener,application);
  application.getMessageBus().connect(application).subscribe(ProjectTopics.MODULES,new ModuleAdapter(){
    @Override public void moduleRemoved(    Project project,    Module module){
      if (!isAppClosed() || Client.getInstance().isModuleRegistered(module)) {
        Client.getInstance().unregisterModule(module);
      }
    }
  }
);
}
