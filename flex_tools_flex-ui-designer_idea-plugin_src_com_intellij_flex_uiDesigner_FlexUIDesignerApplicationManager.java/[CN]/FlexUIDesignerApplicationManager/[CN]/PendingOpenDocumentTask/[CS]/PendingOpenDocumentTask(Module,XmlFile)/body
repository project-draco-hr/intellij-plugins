{
  myModule=module;
  myPsiFile=psiFile;
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      LibraryManager.getInstance().garbageCollection(APP_DIR);
      try {
        if (!ServiceManager.getService(StringRegistry.class).isEmpty()) {
          Client.getInstance().initStringRegistry();
        }
        LibraryManager.getInstance().initLibrarySets(myModule,APP_DIR);
      }
 catch (      IOException e) {
        IOUtil.close(server);
        serverClosed();
        LOG.error(e);
        return;
      }
catch (      InitException e) {
        LOG.error(e.getCause());
        DocumentProblemManager.getInstance().report(myModule.getProject(),e.getMessage());
        return;
      }
      libraryAndModuleInitialized=true;
      if (clientOpened) {
        openDocument();
      }
    }
  }
);
}
