{
  indicator.setText(FlexUIDesignerBundle.message("open.document"));
  Client client=Client.getInstance();
  try {
    client.flush();
    final ProblemsHolder problemsHolder=new ProblemsHolder();
    final RequiredAssetsInfo requiredAssetsInfo=new RequiredAssetsInfo();
    if (unregisteredDocumentReferences != null) {
      client.registerDocumentReferences(unregisteredDocumentReferences,module,problemsHolder,requiredAssetsInfo);
    }
    final MessageBusConnection connection=ApplicationManager.getApplication().getMessageBus().connect(appParentDisposable);
    connection.subscribe(SocketInputHandler.MESSAGE_TOPIC,new SocketInputHandler.DocumentOpenedListener(){
      @Override public void documentOpened(){
        connection.disconnect();
        semaphore.up();
      }
    }
);
    client.openDocument(module,psiFile,true,problemsHolder,requiredAssetsInfo);
    client.flush();
    indicator.setText(FlexUIDesignerBundle.message("load.libraries"));
  }
 catch (  IOException e) {
    LOG.error(e);
    cancel();
  }
}
