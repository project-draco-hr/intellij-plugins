{
  LOG.assertTrue(!path.endsWith(JarFileSystem.JAR_SEPARATOR),"plain local filesystem path is expected");
  if (path.endsWith("/frameworks/libs/air/airglobal.swc")) {
    return bcNature.isWebPlatform() ? null : LinkageType.External;
  }
  if (path.endsWith("/playerglobal.swc") && path.contains("/frameworks/libs/player/")) {
    if (path.endsWith("/frameworks/libs/player/" + targetPlayer + "/playerglobal.swc")) {
      return bcNature.isWebPlatform() ? LinkageType.External : null;
    }
    return null;
  }
  final LinkageType linkageType;
  final int lastSlashIndex=path.lastIndexOf('/');
  if (lastSlashIndex <= 0 || lastSlashIndex == path.length() - 1) {
    LOG.error("Unexpected Flex SDK root: " + path);
  }
  final String swcName=path.substring(lastSlashIndex + 1);
  final String folderPath=path.substring(0,lastSlashIndex);
  if (folderPath.endsWith("/frameworks/libs")) {
    linkageType=getLibraryFromLibsFolderLinkage(bcNature,componentSet,swcName);
  }
 else   if (folderPath.endsWith("/frameworks/libs/air")) {
    linkageType=getAirLibraryLinkage(bcNature,componentSet,swcName);
  }
 else   if (folderPath.endsWith("/frameworks/libs/mobile")) {
    linkageType=getMobileLibraryLinkage(bcNature,swcName);
  }
 else   if (folderPath.endsWith("/frameworks/libs/mx")) {
    linkageType=getMxLibraryLinkage(bcNature,componentSet,swcName);
  }
 else   if (folderPath.contains("/frameworks/themes/")) {
    linkageType=null;
  }
 else {
    if (!ApplicationManager.getApplication().isUnitTestMode()) {
      LOG.warn("Unknown Flex SDK root: " + path);
    }
    linkageType=LinkageType.Merged;
  }
  return bcNature.isLib() && linkageType != null ? LinkageType.Default : linkageType;
}
