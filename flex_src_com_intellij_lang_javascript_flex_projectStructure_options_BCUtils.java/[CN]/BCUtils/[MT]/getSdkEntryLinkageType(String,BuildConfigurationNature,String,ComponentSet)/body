{
  LOG.assertTrue(!path.endsWith(JarFileSystem.JAR_SEPARATOR),"plain local filesystem path is expected");
  if (path.endsWith("/frameworks/libs/air/airglobal.swc")) {
    return bcNature.isWebPlatform() ? null : LinkageType.External;
  }
  if (path.endsWith("/playerglobal.swc") && path.contains("/frameworks/libs/player/")) {
    if (path.endsWith("/frameworks/libs/player/" + targetPlayer + "/playerglobal.swc")) {
      return bcNature.isWebPlatform() ? LinkageType.External : null;
    }
    return null;
  }
  final int lastSlashIndex=path.lastIndexOf('/');
  if (lastSlashIndex <= 0 || lastSlashIndex == path.length() - 1) {
    LOG.error("Unexpected Flex SDK root: " + path);
  }
  final String swcName=path.substring(lastSlashIndex + 1);
  final String folderPath=path.substring(0,lastSlashIndex);
  if (folderPath.endsWith("/frameworks/libs")) {
    return getLibraryFromLibsFolderLinkage(bcNature,componentSet,swcName);
  }
  if (folderPath.endsWith("/frameworks/libs/air")) {
    return getAirLibraryLinkage(bcNature,componentSet,swcName);
  }
  if (folderPath.endsWith("/frameworks/libs/mobile")) {
    return getMobileLibraryLinkage(bcNature,swcName);
  }
  if (folderPath.endsWith("/frameworks/libs/mx")) {
    return getMxLibraryLinkage(bcNature,componentSet,swcName);
  }
  LOG.error("Unknown Flex SDK root: " + path);
  return LinkageType.Merged;
}
