{
  File initialDir=findInitialDir();
  JFileChooser fileChooser=new JFileChooser(initialDir);
  fileChooser.setFileView(new FileView(){
    @Override public Icon getIcon(    File f){
      if (f.isDirectory()) {
        return super.getIcon(f);
      }
      FileType fileType=FileTypeManager.getInstance().getFileTypeByFileName(f.getName());
      return fileType.getIcon();
    }
  }
);
  fileChooser.setMultiSelectionEnabled(false);
  fileChooser.setAcceptAllFileFilterUsed(true);
  fileChooser.addChoosableFileFilter(JSTD_CONFIG_FILE_FILTER);
  fileChooser.setFileFilter(JSTD_CONFIG_FILE_FILTER);
  fileChooser.setDialogTitle("Save As");
  return fileChooser;
}
