{
  saveProject(context.getProject());
  final List<ProcessingItem> itemList=new ArrayList<ProcessingItem>();
  try {
    for (    final Pair<Module,FlexIdeBuildConfiguration> moduleAndConfig : getModulesAndConfigsToCompile(context.getCompileScope())) {
      itemList.add(new MyProcessingItem(moduleAndConfig.first,moduleAndConfig.second));
    }
  }
 catch (  ConfigurationException e) {
    throw new RuntimeException(e);
  }
  if (!itemList.isEmpty() && context.isRebuild()) {
    final FlexCompilerHandler flexCompilerHandler=FlexCompilerHandler.getInstance(context.getProject());
    flexCompilerHandler.quitCompilerShell();
    flexCompilerHandler.getCompilerDependenciesCache().clear();
  }
  if (!itemList.isEmpty() && context.isRebuild()) {
    final FlexCompilerHandler flexCompilerHandler=FlexCompilerHandler.getInstance(context.getProject());
    flexCompilerHandler.quitCompilerShell();
    flexCompilerHandler.getCompilerDependenciesCache().clear();
  }
  return itemList.toArray(new ProcessingItem[itemList.size()]);
}
