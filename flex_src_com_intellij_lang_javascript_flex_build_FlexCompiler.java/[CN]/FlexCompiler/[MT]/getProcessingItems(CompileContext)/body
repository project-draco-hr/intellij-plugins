{
  saveProject(context.getProject());
  final List<ProcessingItem> itemList=new ArrayList<ProcessingItem>();
  try {
    for (    final Pair<Module,FlexIdeBuildConfiguration> moduleAndBC : getModulesAndBCsToCompile(context.getCompileScope())) {
      itemList.add(new MyProcessingItem(moduleAndBC.first,moduleAndBC.second));
    }
  }
 catch (  ConfigurationException e) {
    throw new RuntimeException(e);
  }
  if (!itemList.isEmpty() && !context.isMake()) {
    final FlexCompilerHandler flexCompilerHandler=FlexCompilerHandler.getInstance(context.getProject());
    flexCompilerHandler.quitCompilerShell();
    for (    ProcessingItem item : itemList) {
      flexCompilerHandler.getCompilerDependenciesCache().markModuleDirty(((MyProcessingItem)item).myModule);
    }
  }
  return itemList.toArray(new ProcessingItem[itemList.size()]);
}
