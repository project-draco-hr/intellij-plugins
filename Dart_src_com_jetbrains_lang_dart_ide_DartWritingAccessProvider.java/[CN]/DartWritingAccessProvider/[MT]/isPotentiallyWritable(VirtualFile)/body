{
  if (DartFileType.INSTANCE != file.getFileType())   return true;
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(myProject).getFileIndex();
  if (!fileIndex.isInContent(file) && (fileIndex.isInLibrarySource(file) || fileIndex.isInLibraryClasses(file))) {
    return false;
  }
  if (fileIndex.isInContent(file) && isInDartPackagesFolder(fileIndex,file)) {
    return false;
  }
  return true;
}
