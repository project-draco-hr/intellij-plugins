{
  final VirtualFile flashPlayerTrustDir=getFlashPlayerTrustDir(project,isDebug,runTrusted);
  if (flashPlayerTrustDir == null) {
    return null;
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      flashPlayerTrustDir.refresh(false,true);
    }
  }
);
  VirtualFile ideaTrustedCfgFile=flashPlayerTrustDir.findChild(INTELLIJ_IDEA_CFG);
  if (ideaTrustedCfgFile == null && runTrusted) {
    final Ref<IOException> exceptionRef=new Ref<IOException>();
    ideaTrustedCfgFile=ApplicationManager.getApplication().runWriteAction(new NullableComputable<VirtualFile>(){
      public VirtualFile compute(){
        try {
          return flashPlayerTrustDir.createChildData(FlashPlayerTrustUtil.class,INTELLIJ_IDEA_CFG);
        }
 catch (        IOException e) {
          exceptionRef.set(e);
          return null;
        }
      }
    }
);
    if (!exceptionRef.isNull()) {
      showWarningBalloonIfNeeded(project,isDebug,runTrusted,FlexBundle.message("error.creating.idea.trust.cfg.file",INTELLIJ_IDEA_CFG,exceptionRef.get().getMessage()));
    }
  }
  return ideaTrustedCfgFile;
}
