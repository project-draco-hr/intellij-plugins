{
  final String path=getInitiallySelectedPath();
  VirtualFile file=path.isEmpty() ? null : LocalFileSystem.getInstance().findFileByPath(path);
  if (file == null) {
    return PathUtil.getFileName(path);
  }
  if (FlashBuilderProjectFinder.isArchivedFBProject(path)) {
    return file.getNameWithoutExtension();
  }
  if (file.isDirectory()) {
    final VirtualFile dotProjectFile=file.findChild(DOT_PROJECT);
    if (dotProjectFile != null && FlashBuilderProjectFinder.isFlashBuilderProject(dotProjectFile)) {
      file=dotProjectFile;
    }
  }
  if (DOT_PROJECT.equalsIgnoreCase(file.getName())) {
    return FlashBuilderProjectLoadUtil.readProjectName(file.getPath());
  }
  return PathUtil.getFileName(path);
}
