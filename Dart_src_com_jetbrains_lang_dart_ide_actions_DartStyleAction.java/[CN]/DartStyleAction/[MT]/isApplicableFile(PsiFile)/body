{
  if (psiFile == null || psiFile.getVirtualFile() == null || psiFile.getFileType() != DartFileType.INSTANCE)   return false;
  final Module module=ModuleUtilCore.findModuleForPsiElement(psiFile);
  if (module == null)   return false;
  final DartSdk sdk=DartSdk.getDartSdk(module.getProject());
  if (sdk == null || !DartAnalysisServerAnnotator.isDartSDKVersionSufficient(sdk))   return false;
  if (!DartSdkGlobalLibUtil.isDartSdkGlobalLibAttached(module,sdk.getGlobalLibName()))   return false;
  if (DartWritingAccessProvider.isInDartSdkOrDartPackagesFolder(psiFile))   return false;
  return true;
}
