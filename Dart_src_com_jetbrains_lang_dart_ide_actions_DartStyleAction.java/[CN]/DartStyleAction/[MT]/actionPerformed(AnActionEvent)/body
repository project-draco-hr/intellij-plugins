{
  final Project project=event.getProject();
  if (project == null) {
    return;
  }
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final Editor editor=event.getData(CommonDataKeys.EDITOR);
  if (editor != null) {
    runDartStyleOverEditor(project,editor);
  }
 else {
    final VirtualFile[] files=CommonDataKeys.VIRTUAL_FILE_ARRAY.getData(event.getDataContext());
    final List<VirtualFile> vFiles=getApplicableVirtualFiles(project,files);
    runDartStyleOverVirtualFiles(project,vFiles);
  }
}
