{
  final CssDialectMappings mappings=CssDialectMappings.getInstance(project);
  final CssDialect oldDialect=mappings.getMapping(myVirtualFile);
  UndoManager.getInstance(project).undoableActionPerformed(new BasicUndoableAction(){
    @Override public void undo() throws UnexpectedUndoException {
      CssDialectMappings.getInstance(project).setMapping(myVirtualFile,oldDialect);
    }
    @Override public void redo() throws UnexpectedUndoException {
      CssDialectMappings.getInstance(project).setMapping(myVirtualFile,myDialect);
    }
  }
);
  mappings.setMapping(myVirtualFile,myDialect);
}
