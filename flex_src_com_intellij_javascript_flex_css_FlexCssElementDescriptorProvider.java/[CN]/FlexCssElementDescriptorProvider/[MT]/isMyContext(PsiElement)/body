{
  if (context == null)   return false;
  PsiFile file=context.getContainingFile();
  if (file == null)   return false;
  if (HtmlUtil.hasHtml(file))   return false;
  final VirtualFile vFile=file.getOriginalFile().getVirtualFile();
  if (vFile != null) {
    if (vFile.getFileType() != CssFileType.INSTANCE)     return false;
  }
  Module module=ModuleUtil.findModuleForPsiElement(file);
  if (module == null) {
    file=InjectedLanguageUtil.getTopLevelFile(context);
    if (file != null) {
      module=ModuleUtil.findModuleForPsiElement(file);
    }
  }
  if (module == null || ModuleType.get(module) != FlexModuleType.getInstance()) {
    return false;
  }
  if (vFile != null) {
    final CssDialect dialect=CssDialectMappings.getInstance(context.getProject()).getMapping(vFile);
    return dialect != CssDialect.CLASSIC;
  }
  return true;
}
