{
  final Project project=module.getProject();
  if (bc.getTargetPlatform() == TargetPlatform.Mobile) {
    final Sdk sdk=bc.getSdk();
switch (runnerParameters.getMobileRunTarget()) {
case Emulator:
      break;
case AndroidDevice:
    final String androidAppId=getApplicationId(getAirDescriptorPath(bc,bc.getAndroidPackagingOptions()));
  if (!packAndInstallToAndroidDevice(module,bc,runnerParameters,androidAppId,true)) {
    return null;
  }
if (runnerParameters.getDebugTransport() == AirMobileDebugTransport.USB) {
  if (!AirPackageUtil.androidForwardTcpPort(project,sdk,runnerParameters.getDeviceInfo(),runnerParameters.getUsbDebugPort())) {
    return null;
  }
}
break;
case iOSSimulator:
final String adtVersionSimulator=AirPackageUtil.getAdtVersion(module.getProject(),bc.getSdk());
final String iosSimulatorAppId=getApplicationId(getAirDescriptorPath(bc,bc.getIosPackagingOptions()));
if (!packAndInstallToIOSSimulator(module,bc,runnerParameters,adtVersionSimulator,iosSimulatorAppId,true)) {
return null;
}
break;
case iOSDevice:
final String adtVersion=AirPackageUtil.getAdtVersion(module.getProject(),bc.getSdk());
if (StringUtil.compareVersionNumbers(adtVersion,"3.4") >= 0) {
if (!packAndInstallToIOSDevice(module,bc,runnerParameters,adtVersion,true)) {
return null;
}
if (runnerParameters.getDebugTransport() == AirMobileDebugTransport.USB) {
final DeviceInfo device=runnerParameters.getDeviceInfo();
final int deviceHandle=device == null ? -1 : device.IOS_HANDLE;
if (deviceHandle < 0) {
return null;
}
if (!AirPackageUtil.iosForwardTcpPort(project,sdk,runnerParameters.getUsbDebugPort(),deviceHandle)) {
return null;
}
}
}
 else {
if (!AirPackageUtil.packageIpaForDevice(module,bc,runnerParameters,adtVersion,true)) {
return null;
}
}
break;
}
}
return launchDebugProcess(module,bc,runnerParameters,executor,contentToReuse,env);
}
