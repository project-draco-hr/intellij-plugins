{
  if (reason == PausedReason.breakpoint && isStepping && sameSourceLine(currentLocation,location)) {
    sendSimpleCommand(stepCommand,isolate.getId());
  }
 else {
    try {
      getStackTrace(isolate,new VmCallback<List<VmCallFrame>>(){
        @Override public void handleResult(        VmResult<List<VmCallFrame>> result){
          try {
            if (result.isError()) {
              LOG.info(result.getError());
            }
 else {
              List<VmCallFrame> frames=result.getResult();
              for (              VmListener listener : listeners) {
                listener.debuggerPaused(reason,isolate,frames,exception,isStepping);
              }
            }
          }
  finally {
            currentLocation=location;
            isStepping=false;
          }
        }
      }
);
    }
 catch (    IOException e) {
      throw new JSONException(e);
    }
  }
}
