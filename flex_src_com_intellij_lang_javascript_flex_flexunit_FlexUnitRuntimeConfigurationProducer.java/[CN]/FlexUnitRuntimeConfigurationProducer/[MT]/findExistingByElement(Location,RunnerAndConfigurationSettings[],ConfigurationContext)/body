{
  if (existingConfigurations.length == 0)   return null;
  if (!(location instanceof PsiLocation))   return null;
  final Module module=location.getModule();
  if (module == null || ModuleType.get(module) != FlexModuleType.getInstance())   return null;
  PsiElement element=location.getPsiElement();
  element=findTestElement(element);
  if (element == null)   return null;
  final FlexUnitRunnerParameters fakeParams=new FlexUnitRunnerParameters();
  if (!configureRunnerParameters(fakeParams,module,element))   return null;
  for (  final RunnerAndConfigurationSettings configuration : existingConfigurations) {
    final RunConfiguration runConfiguration=configuration.getConfiguration();
    final FlexUnitRunnerParameters params=((FlexUnitRunConfiguration)runConfiguration).getRunnerParameters();
    if (params.getModuleName().equals(fakeParams.getModuleName()) && params.getScope() == fakeParams.getScope() && (params.getScope() != FlexUnitRunnerParameters.Scope.Package || params.getPackageName().equals(fakeParams.getPackageName())) && (params.getScope() == FlexUnitRunnerParameters.Scope.Package || params.getClassName().equals(fakeParams.getClassName())) && (params.getScope() != FlexUnitRunnerParameters.Scope.Method || params.getMethodName().equals(fakeParams.getMethodName()))) {
      return configuration;
    }
  }
  return null;
}
