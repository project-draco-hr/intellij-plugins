{
  BundleManifest manifest=getManifestByObject(module);
  if (manifest == null) {
    return Collections.emptySet();
  }
  Set<Object> result=new HashSet<Object>();
  List<String> imports=manifest.getImports();
  for (  String anImport : imports) {
    Set<ManifestHolder> manifestHolders=myBundleCache.whoProvides(anImport);
    for (    ManifestHolder manifestHolder : manifestHolders) {
      try {
        Object boundObject=manifestHolder.getBoundObject();
        result.add(boundObject);
      }
 catch (      ManifestHolderDisposedException ignore) {
      }
    }
  }
  List<String> requiredBundles=manifest.getRequiredBundles();
  List<ManifestHolder> allRequiredBundles=new ArrayList<ManifestHolder>();
  for (  String requiredBundle : requiredBundles) {
    resolveRequiredBundle(requiredBundle,allRequiredBundles);
  }
  for (  ManifestHolder manifestHolder : allRequiredBundles) {
    if (manifestHolder != null) {
      try {
        result.add(manifestHolder.getBoundObject());
      }
 catch (      ManifestHolderDisposedException ignore) {
      }
    }
  }
  ManifestHolder manifestHolder=myBundleCache.getManifestHolder(module);
  if (manifestHolder != null) {
    Set<ManifestHolder> fragmentHosts=myBundleCache.getFragmentHosts(manifestHolder);
    for (    ManifestHolder fragmentHost : fragmentHosts) {
      try {
        result.add(fragmentHost.getBoundObject());
      }
 catch (      ManifestHolderDisposedException ignore) {
      }
    }
  }
  return result;
}
