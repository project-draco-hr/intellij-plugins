{
  final Pair<VirtualFile,List<VirtualFile>> yamlAndPackageRoots=PubspecYamlUtil.getPubspecYamlFileAndDartPackageRoots(project,file);
  for (  final VirtualFile packageRoot : yamlAndPackageRoots.second) {
    if (packageRoot != null && VfsUtilCore.isAncestor(packageRoot,file,true)) {
      return UriKind.PACKAGE_URI;
    }
  }
  final VirtualFile pubspecYamlFile=yamlAndPackageRoots.first;
  final VirtualFile lib=pubspecYamlFile == null ? null : pubspecYamlFile.getParent().findChild("lib");
  final VirtualFile libFolder=lib != null && lib.isDirectory() ? lib : null;
  return libFolder != null && VfsUtilCore.isAncestor(libFolder,file,true) ? UriKind.PACKAGE_URI : UriKind.FILE_URI;
}
