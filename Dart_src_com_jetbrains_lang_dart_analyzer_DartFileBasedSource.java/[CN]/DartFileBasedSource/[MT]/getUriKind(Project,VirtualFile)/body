{
  final VirtualFile packagesFolder=PubspecYamlUtil.getDartPackagesFolder(project,file);
  if (packagesFolder != null && VfsUtilCore.isAncestor(packagesFolder,file,true)) {
    return UriKind.PACKAGE_URI;
  }
 else {
    final VirtualFile pubspecYamlFile=PubspecYamlUtil.getPubspecYamlFile(project,file);
    final VirtualFile lib=pubspecYamlFile == null ? null : pubspecYamlFile.getParent().findChild("lib");
    final VirtualFile libFolder=lib != null && lib.isDirectory() ? lib : null;
    return libFolder != null && VfsUtilCore.isAncestor(libFolder,file,true) ? UriKind.PACKAGE_URI : UriKind.FILE_URI;
  }
}
