{
  final List<TreeElement> result=new ArrayList<TreeElement>();
  if (myElement instanceof DartFile || myElement instanceof DartEmbeddedContent) {
    THashSet<DartComponentName> componentNames=new THashSet<DartComponentName>();
    DartPsiCompositeElementImpl.processDeclarationsImpl(myElement,new ComponentNameScopeProcessor(componentNames),ResolveState.initial(),null);
    for (    DartComponentName componentName : componentNames) {
      PsiElement parent=componentName.getParent();
      if (parent instanceof DartComponent) {
        result.add(new DartStructureViewElement(parent));
      }
    }
  }
 else   if (myElement instanceof DartClass) {
    final DartClass dartClass=(DartClass)myElement;
    final DartClassResolveResult superClass=DartResolveUtil.resolveClassByType(dartClass.getSuperClass());
    if (superClass.getDartClass() != null) {
      result.add(new DartStructureViewElement(superClass.getDartClass()));
    }
    for (    DartClassResolveResult superInterface : DartResolveUtil.resolveClassesByType(dartClass.getImplementsList())) {
      if (superInterface.getDartClass() == null) {
        continue;
      }
      result.add(new DartStructureViewElement(superInterface.getDartClass()));
    }
    for (    DartComponent subNamedComponent : DartResolveUtil.getNamedSubComponentsInOrder(dartClass)) {
      result.add(new DartStructureViewElement(subNamedComponent));
    }
  }
  return result.toArray(new TreeElement[result.size()]);
}
