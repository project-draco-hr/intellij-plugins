{
  Version result=null;
  VirtualFile equinoxFolder=fileSystem.findFileByPath(frameworkInstanceDefinition.getBaseFolder());
  if (equinoxFolder != null && equinoxFolder.exists() && equinoxFolder.isDirectory()) {
    VirtualFile pluginsFolder=equinoxFolder.findChild("plugins");
    if (pluginsFolder != null && pluginsFolder.exists() && pluginsFolder.isDirectory()) {
      VirtualFile[] files=pluginsFolder.getChildren();
      for (      VirtualFile file : files) {
        String name=file.getName();
        if (name.startsWith(ECLIPSE_VERSIONCHECK_PREFIX) && name.endsWith(ECLIPSE_VERSIONCHECK_POSTFIX)) {
          String versionString=name.substring(ECLIPSE_VERSIONCHECK_PREFIX.length(),name.length() - ECLIPSE_VERSIONCHECK_POSTFIX.length());
          if (versionString != null) {
            result=Version.parseVersion(versionString);
            break;
          }
        }
      }
    }
  }
  return result;
}
