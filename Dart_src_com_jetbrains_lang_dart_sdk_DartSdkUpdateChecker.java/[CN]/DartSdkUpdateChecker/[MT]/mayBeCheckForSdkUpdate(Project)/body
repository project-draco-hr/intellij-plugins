{
  final DartSdkUpdateOption option=DartSdkUpdateOption.getDartSdkUpdateOption();
  if (option == DartSdkUpdateOption.DoNotCheck)   return;
  final long lastCheckedMillis=PropertiesComponent.getInstance().getOrInitLong(DART_LAST_SDK_CHECK_KEY,0);
  if (System.currentTimeMillis() - lastCheckedMillis < CHECK_INTERVAL)   return;
  final DartSdk sdk=DartSdk.getDartSdk(project);
  if (sdk == null)   return;
  final String currentRevisionString=DartSdkUtil.readSdkRevision(sdk.getHomePath());
  if (currentRevisionString == null)   return;
  final int currentRevision;
  try {
    currentRevision=Integer.parseInt(currentRevisionString);
  }
 catch (  NumberFormatException e) {
    return;
  }
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      if (!project.isDisposed()) {
        PropertiesComponent.getInstance().setValue(DART_LAST_SDK_CHECK_KEY,String.valueOf(System.currentTimeMillis()));
        final String currentSdkVersion=sdk.getVersion();
        final SdkUpdateInfo sdkUpdateInfo=getSdkUpdateInfo(option);
        if (sdkUpdateInfo != null && sdkUpdateInfo.myRevision > currentRevision && compareVersionsDigitsAndDotsOnly(sdkUpdateInfo.myPresentableVersion,currentSdkVersion) >= 0) {
          ApplicationManager.getApplication().invokeLater(new Runnable(){
            @Override public void run(){
              notifySdkUpdateAvailable(project,currentSdkVersion,sdkUpdateInfo.myPresentableVersion,sdkUpdateInfo.myDownloadUrl);
            }
          }
,ModalityState.NON_MODAL,project.getDisposed());
        }
      }
    }
  }
);
}
