{
  final DartSdkUpdateOption option=DartSdkUpdateOption.getDartSdkUpdateOption();
  if (option == DartSdkUpdateOption.DoNotCheck)   return;
  final long lastCheckedMillis=PropertiesComponent.getInstance().getOrInitLong(DART_LAST_SDK_CHECK_KEY,0);
  if (System.currentTimeMillis() - lastCheckedMillis < CHECK_INTERVAL)   return;
  final DartSdk sdk=DartSdk.getDartSdk(project);
  if (sdk == null)   return;
  final String currentRevisionString=DartSdkUtil.readSdkRevision(sdk.getHomePath());
  if (currentRevisionString == null)   return;
  final int currentRevision;
  try {
    currentRevision=Integer.parseInt(currentRevisionString);
  }
 catch (  NumberFormatException e) {
    return;
  }
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      if (!project.isDisposed()) {
        PropertiesComponent.getInstance().setValue(DART_LAST_SDK_CHECK_KEY,String.valueOf(System.currentTimeMillis()));
        doCheckForSdkUpdate(project,sdk.getVersion(),currentRevision,option);
      }
    }
  }
);
}
