{
  DartSettings settings=null;
  if (shouldTakeWebSettings(module) || ApplicationManager.getApplication().isUnitTestMode()) {
    settings=DartSettingsUtil.getSettings();
  }
 else   if (module != null && ModuleType.get(module) instanceof DartModuleTypeBase) {
    final ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(module);
    final Sdk sdk=moduleRootManager.getSdk();
    settings=new DartSettings(StringUtil.notNullize(sdk == null ? null : sdk.getHomePath()));
  }
  return settings;
}
