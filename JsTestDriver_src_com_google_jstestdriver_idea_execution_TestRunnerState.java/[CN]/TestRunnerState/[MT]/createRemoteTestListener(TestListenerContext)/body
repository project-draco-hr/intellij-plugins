{
  Map<VirtualFile,NavigationRegistry> navigationRegistryMap=Maps.newHashMap();
  for (  VirtualFile configVirtualFile : myConfigVirtualFiles) {
    NavigationRegistryBuilder builder=NavigationRegistryBuilder.getInstance();
    NavigationRegistry registry=builder.buildNavigationRegistry(myProject,configVirtualFile);
    if (registry != null) {
      navigationRegistryMap.put(registry.getVirtualFile(),registry);
    }
  }
  VirtualFile virtualFile=null;
  if (myRunConfiguration.getRunSettings().isAllInDirectory()) {
    File directory=new File(myRunConfiguration.getRunSettings().getDirectory());
    virtualFile=LocalFileSystem.getInstance().findFileByIoFile(directory);
  }
  return new RemoteTestListener(navigationRegistryMap,context,virtualFile);
}
