{
  this.originalConfiguration=originalConfiguration;
  this.validator=validator;
  disablePropertiesKeys.setSelected(originalConfiguration.isPropertiesKeysDisabled());
  versionComboBox.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      final Version version=getSelectedVersion();
      if (version != null) {
        validator.setRequiredLibraries(getRequiredLibraries());
        validator.setDescription(new StrutsFacetLibrariesValidatorDescription(version.getId()));
      }
    }
  }
);
  final Module module=editorContext.getModule();
  final String version=StrutsVersionDetector.detectStrutsVersion(module);
  if (version != null) {
    versionComboBox.setModel(new DefaultComboBoxModel(new String[]{version}));
    versionComboBox.getModel().setSelectedItem(version);
    versionComboBox.setEnabled(false);
    return;
  }
  final Version[] versions=LibrariesDownloadAssistant.getVersions(StrutsFrameworkSupportProvider.getLibrariesUrl());
  versionComboBox.setModel(new DefaultComboBoxModel(versions));
  if (versions.length > 0) {
    final Version item=versions[0];
    versionComboBox.getModel().setSelectedItem(item);
    validator.setRequiredLibraries(getRequiredLibraries());
    validator.setDescription(new StrutsFacetLibrariesValidatorDescription(item.getId()));
  }
}
