{
  super(true);
  setTitle("OSGi Framework Instance");
  setModal(true);
  if (frameworkInstanceName != null) {
    myNameTextField.setText(frameworkInstanceName);
  }
  FrameworkIntegrator[] integrators=frameworkIntegratorRegistry.getFrameworkIntegrators();
  myIntegratorComboBox.removeAllItems();
  for (  FrameworkIntegrator integrator : integrators) {
    myIntegratorComboBox.addItem(integrator);
  }
  myIntegratorComboBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      if (myIntegratorComboBox.getSelectedItem() != null && myNameTextField.getText().length() == 0) {
        myNameTextField.setText(((FrameworkIntegrator)myIntegratorComboBox.getSelectedItem()).getDisplayName());
      }
    }
  }
);
  myNameTextField.getDocument().addDocumentListener(new DocumentAdapter(){
    protected void textChanged(    DocumentEvent e){
      updateUiState();
    }
  }
);
  myIntegratorComboBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      updateUiState();
    }
  }
);
  myUseLocallyInstalledFrameworkRadioButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      updateUiState();
    }
  }
);
  myDownloadAFrameworkWithRadioButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      updateUiState();
    }
  }
);
  myDownloadButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      downloadFramework();
    }
  }
);
  FileChooserDescriptor fileChooserDescriptor=FileChooserDescriptorFactory.createSingleFolderDescriptor();
  myBaseFolderChooser.addBrowseFolderListener("Choose framework instance base folder","",null,fileChooserDescriptor);
  myBaseFolderChooser.getTextField().setEditable(false);
  myBaseFolderChooser.getTextField().getDocument().addDocumentListener(new DocumentAdapter(){
    protected void textChanged(    DocumentEvent e){
      updateUiState();
    }
  }
);
  myTargetFolder.addBrowseFolderListener("Choose folder where to download the framework to","",null,fileChooserDescriptor);
  myTargetFolder.getTextField().setEditable(false);
  myTargetFolder.getTextField().getDocument().addDocumentListener(new DocumentAdapter(){
    @Override protected void textChanged(    DocumentEvent e){
      updateUiState();
    }
  }
);
  init();
  updateUiState();
  setAnchor(myBaseFolderLabel);
}
