{
  int startInd=0;
  do {
    int caretIndex=plaintText.indexOf('|',startInd);
    int endInd=caretIndex >= 0 ? caretIndex : plaintText.length();
    String txt=plaintText.substring(startInd,endInd);
    if (txt.length() > 0) {
      template.addTextSegment(txt);
    }
    if (caretIndex >= 0) {
      template.addEndVariable();
    }
    startInd=endInd + 1;
  }
 while (startInd < plaintText.length());
}
