{
  if (reference instanceof FileReference && FlaskTemplateManager.getTemplatesDirectory(reference.getElement()) != null) {
    FileReference fileReference=(FileReference)reference;
    FileReferenceSet refSet=fileReference.getFileReferenceSet();
    PsiElement element=reference.getElement();
    if (fileReference.getIndex() == refSet.getAllReferences().length - 1 && element instanceof PyStringLiteralExpression && FlaskTemplateManager.isTemplateReference((PyStringLiteralExpression)element)) {
      PyStringLiteralExpression literal=(PyStringLiteralExpression)element;
      fixConsumer.consume(new CreateTemplateIntentionAction(literal.getStringValue()));
    }
  }
}
