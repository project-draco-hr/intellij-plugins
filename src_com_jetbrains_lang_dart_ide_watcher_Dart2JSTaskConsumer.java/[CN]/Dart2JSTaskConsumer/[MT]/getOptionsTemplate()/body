{
  TaskOptions options=new TaskOptions();
  options.setName("Dart2JS");
  final VirtualFile dart2JS=DartSettingsUtil.getSettings().getDart2JS();
  if (dart2JS != null) {
    options.setProgram(dart2JS.getPath());
  }
  options.setDescription("Compiles .dart files into .js files");
  options.setFileExtension(DartFileType.DEFAULT_EXTENSION);
  options.setScopeName(PsiBundle.message("psi.search.scope.project"));
  options.setArguments("--out=$" + new FilePathMacro().getName() + "$.js $"+ new FilePathMacro().getName()+ "$");
  if (dart2JS != null) {
    options.setWorkingDir(dart2JS.getParent().getPath());
  }
  options.setOutput("$" + new FileNameMacro().getName() + "$.js:$"+ new FileNameMacro().getName()+ "$.js.maps:$"+ new FileNameMacro().getName()+ "$.js.deps");
  options.setTrackOnlyRoot(true);
  options.setImmediateSync(false);
  return options;
}
