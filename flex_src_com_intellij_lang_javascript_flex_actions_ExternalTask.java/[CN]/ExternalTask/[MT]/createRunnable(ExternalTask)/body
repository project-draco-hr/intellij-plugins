{
  return new Runnable(){
    public void run(){
      final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      if (indicator != null) {
        indicator.setIndeterminate(true);
      }
      task.start();
      while (!task.isFinished()) {
        if (indicator != null && indicator.isCanceled()) {
          task.cancel();
          break;
        }
        try {
          Thread.sleep(200);
        }
 catch (        InterruptedException e) {
        }
      }
    }
  }
;
}
