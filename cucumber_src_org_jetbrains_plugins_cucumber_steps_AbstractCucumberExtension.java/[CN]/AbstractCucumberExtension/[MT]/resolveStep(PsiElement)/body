{
  final Module module=ModuleUtilCore.findModuleForPsiElement(element);
  if (module == null) {
    return Collections.emptyList();
  }
  final Set<String> stepVariants=getAllPossibleStepVariants(element);
  final List<AbstractStepDefinition> stepDefinitions=loadStepsFor(element.getContainingFile(),module);
  final List<PsiElement> result=new ArrayList<PsiElement>();
  if (!(element instanceof GherkinStep)) {
    return result;
  }
  final GherkinStep step=(GherkinStep)element;
  for (  final AbstractStepDefinition stepDefinition : stepDefinitions) {
    for (    final String s : stepVariants) {
      if (stepDefinition.matches(s) && stepDefinition.supportsStep(step)) {
        result.add(stepDefinition.getElement());
      }
    }
  }
  return result;
}
