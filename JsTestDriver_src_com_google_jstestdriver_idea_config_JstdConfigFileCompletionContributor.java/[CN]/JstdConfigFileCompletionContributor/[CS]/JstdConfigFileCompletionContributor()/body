{
  ElementPattern<PsiElement> place=PlatformPatterns.psiElement().inVirtualFile(new VirtualFilePattern().ofType(JstdConfigFileType.INSTANCE));
  extend(CompletionType.BASIC,place,new CompletionProvider<CompletionParameters>(){
    @Override protected void addCompletions(    @NotNull CompletionParameters parameters,    ProcessingContext context,    @NotNull CompletionResultSet result){
      PsiElement element=parameters.getOriginalPosition();
      if (element == null) {
        element=parameters.getPosition();
      }
      int prefixLength=parameters.getOffset() - element.getTextRange().getStartOffset();
      BipartiteString caretBipartiteElementText=splitByPrefixLength(element.getText(),prefixLength);
      addPathCompletionsIfNeeded(result,element,caretBipartiteElementText);
      addTopLevelKeysCompletionIfNeeded(result,element,caretBipartiteElementText);
    }
  }
);
}
