{
  BipartiteString parentDirStrWithLastComponent=findParentDirStrWithLastComponentPrefix(pathBeforeCaret);
{
    VirtualFile parentFile=basePath.findFileByRelativePath(FileUtil.toSystemIndependentName(parentDirStrWithLastComponent.getPrefix()));
    if (parentFile != null) {
      return new ParentDirWithLastComponentPrefix(parentFile,parentDirStrWithLastComponent.getSuffix());
    }
  }
  File absolutePath=new File(FileUtil.toSystemIndependentName(parentDirStrWithLastComponent.getPrefix()));
  if (absolutePath.isAbsolute()) {
    VirtualFile absolute=LocalFileSystem.getInstance().findFileByIoFile(absolutePath);
    if (absolute != null) {
      return new ParentDirWithLastComponentPrefix(absolute,parentDirStrWithLastComponent.getSuffix());
    }
  }
  return null;
}
