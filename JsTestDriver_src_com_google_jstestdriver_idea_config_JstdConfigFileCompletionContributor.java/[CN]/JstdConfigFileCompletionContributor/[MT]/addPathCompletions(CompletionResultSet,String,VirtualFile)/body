{
  char separator='/';
  String fakePathPrefix=separator + pathPrefix;
  int lastSlashInd=fakePathPrefix.lastIndexOf(separator);
  String lastPathComponent=fakePathPrefix.substring(lastSlashInd + 1,fakePathPrefix.length());
  String pathComponentsExceptLast=fakePathPrefix.substring(Math.min(1,lastSlashInd),lastSlashInd);
  VirtualFile parentFile=basePath.findFileByRelativePath(pathComponentsExceptLast);
  if (parentFile != null) {
    VirtualFile[] children=parentFile.getChildren();
    for (    VirtualFile child : children) {
      if (child.getName().startsWith(lastPathComponent)) {
        result=result.withPrefixMatcher(lastPathComponent);
        result.addElement(LookupItem.fromString(child.getName()));
      }
    }
  }
}
