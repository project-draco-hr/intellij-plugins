{
  ToolbarDecorator d=ToolbarDecorator.createDecorator(myFilesToPackageTable);
  d.setAddAction(new AnActionButtonRunnable(){
    public void run(    AnActionButton button){
      VirtualFile[] files=FileChooser.chooseFiles(myProject,new FileChooserDescriptor(true,true,false,true,false,true));
      for (      final VirtualFile file : files) {
        myFilesToPackage.add(new FilePathAndPathInPackage(file.getPath(),file.getName()));
        fireDataChanged();
        IdeFocusManager.getInstance(myProject).requestFocus(myFilesToPackageTable,true);
        final int rowCount=myFilesToPackageTable.getRowCount();
        myFilesToPackageTable.setRowSelectionInterval(rowCount - 1,rowCount - 1);
      }
    }
  }
);
  d.setRemoveAction(new AnActionButtonRunnable(){
    public void run(    AnActionButton anActionButton){
      TableUtil.stopEditing(myFilesToPackageTable);
      final int[] selectedRows=myFilesToPackageTable.getSelectedRows();
      Arrays.sort(selectedRows);
      for (int i=selectedRows.length - 1; i >= 0; i--) {
        myFilesToPackage.remove(selectedRows[i]);
      }
      fireDataChanged();
    }
  }
);
  myMainPanel.add(d.createPanel(),BorderLayout.CENTER);
}
