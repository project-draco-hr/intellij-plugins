{
  final DartTestRunnerParameters parameters=configuration.getRunnerParameters();
  final Scope scope=(Scope)myScopeCombo.getSelectedItem();
  parameters.setScope(scope);
  TextFieldWithBrowseButton pathSource=scope == Scope.FOLDER ? myDirField : myFileField;
  parameters.setFilePath(StringUtil.nullize(FileUtil.toSystemIndependentName(pathSource.getText().trim()),true));
  parameters.setTestName(scope.expectsTestName() ? StringUtil.nullize(myTestNameField.getText().trim()) : null);
  parameters.setArguments(StringUtil.nullize(myArguments.getText().trim(),true));
  parameters.setVMOptions(StringUtil.nullize(myVMOptions.getText().trim(),true));
  parameters.setCheckedMode(myCheckedModeCheckBox.isSelected());
  parameters.setWorkingDirectory(StringUtil.nullize(FileUtil.toSystemIndependentName(myWorkingDirectory.getText().trim()),true));
  parameters.setEnvs(myEnvironmentVariables.getEnvs());
  parameters.setIncludeParentEnvs(myEnvironmentVariables.isPassParentEnvs());
}
