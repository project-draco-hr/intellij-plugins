{
  initResultFile();
  ImageAssetInfo assetInfo=EmbedImageManager.getInstance().getInfo(reader.readUnsignedShort());
  BufferedImage image=ImageUtil.getImage(assetInfo.file,assetInfo.mimeType);
  FileOutputStream fileOut=new FileOutputStream(resultFile);
  try {
    ImageUtil.write(image,fileOut,assetInfo.mimeType,assetInfo.file);
  }
 catch (  IOException e) {
    final String userMessage=FlexUIDesignerBundle.message("problem.opening.0",assetInfo.file.getName());
    LOG.error(LogMessageUtil.createEvent(userMessage,ExceptionUtil.getThrowableText(e),assetInfo.file));
    fileOut.getChannel().truncate(0);
  }
 finally {
    fileOut.close();
  }
}
