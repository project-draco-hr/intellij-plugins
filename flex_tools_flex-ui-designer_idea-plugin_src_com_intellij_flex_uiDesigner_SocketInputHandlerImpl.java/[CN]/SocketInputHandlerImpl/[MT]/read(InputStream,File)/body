{
  this.appDir=appDir;
  createReader(inputStream);
  while (true) {
    final int command=reader.read();
    if (command == -1) {
      break;
    }
 else {
      try {
        processCommand(command);
      }
  finally {
        if (isFileBased(command)) {
          resultReadyFile.createNewFile();
        }
      }
    }
  }
}
