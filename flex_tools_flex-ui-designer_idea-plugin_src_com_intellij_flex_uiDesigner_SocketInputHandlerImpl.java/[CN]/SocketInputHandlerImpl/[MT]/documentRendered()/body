{
  final int id=reader.readUnsignedShort();
  final int w=reader.readUnsignedShort();
  final BufferedImage image;
  if (w != 0) {
    final int h=reader.readUnsignedShort();
    final ComponentColorModel colorModel=new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB),true,false,Transparency.TRANSLUCENT,DataBuffer.TYPE_BYTE);
    final byte[] argb=FileUtil.loadBytes(reader,w * h * 4);
    image=new BufferedImage(colorModel,(WritableRaster)Raster.createRaster(new PixelInterleavedSampleModel(DataBuffer.TYPE_BYTE,w,h,4,w * 4,ARGB_BAND_OFFSETS),new DataBufferByte(argb,argb.length),null),false,null);
  }
 else {
    image=null;
  }
  messageBus.syncPublisher(MESSAGE_TOPIC).documentRendered(id,image);
}
