{
  TestConsoleProperties testConsoleProperties=new SMTRunnerConsoleProperties((DartUnitRunConfiguration)env.getRunProfile(),DART_FRAMEWORK_NAME,env.getExecutor());
  SMTRunnerConsoleView smtConsoleView=SMTestRunnerConnectionUtil.createConsoleWithCustomLocator(DART_FRAMEWORK_NAME,testConsoleProperties,env,new DartTestLocationProvider(),true,null);
  testConsoleProperties.setUsePredefinedMessageFilter(false);
  Filter filter=new DartStackTraceMessageFilter(testConsoleProperties.getProject(),myUnitParameters.getFilePath());
  smtConsoleView.addMessageFilter(filter);
  final Project project=env.getProject();
  Disposer.register(project,smtConsoleView);
  return smtConsoleView;
}
