{
  commandLine.addParameter("--ignore-unrecognized-flags");
  StringTokenizer argumentsTokenizer=new StringTokenizer(StringUtil.notNullize(myUnitParameters.getVMOptions()));
  while (argumentsTokenizer.hasMoreTokens()) {
    commandLine.addParameter(argumentsTokenizer.nextToken());
  }
  final VirtualFile file=LocalFileSystem.getInstance().findFileByPath(myUnitParameters.getFilePath());
  if (file != null) {
    final List<VirtualFile> packageRoots=PubspecYamlUtil.getDartPackageRoots(getEnvironment().getProject(),file);
    if (!packageRoots.isEmpty()) {
      commandLine.addParameter("--package-root=" + packageRoots.get(0).getPath() + "/");
    }
  }
  if (myDebuggingPort > 0) {
    commandLine.addParameter("--debug:" + myDebuggingPort);
  }
  try {
    commandLine.addParameter(createPatchedFile());
  }
 catch (  IOException e) {
    LOG.debug(e);
    throw new ExecutionException("Can't create runner!");
  }
  argumentsTokenizer=new StringTokenizer(StringUtil.notNullize(myUnitParameters.getArguments()));
  while (argumentsTokenizer.hasMoreTokens()) {
    commandLine.addParameter(argumentsTokenizer.nextToken());
  }
}
