{
  ArrayList<String> result=new ArrayList<String>();
  final String[] urls=OrderEnumerator.orderEntries(module).withoutSdk().withoutModuleSourceEntries().satisfying(NOT_FRAMEWORK_LIBRARY_CONDITION).recursively().exportedOnly().classes().getUrls();
  BndWrapper wrapper=new BndWrapper();
  for (  String url : urls) {
    url=convertJarUrlToFileUrl(url);
    if (CachingBundleInfoProvider.canBeBundlified(url)) {
      indicator.setText("Bundling non-OSGi libraries for module: " + module.getName());
      indicator.setText2(url);
      final String outputPath=getOutputPath(module,compileContext);
      if (outputPath == null) {
        break;
      }
      String bundledLocation=wrapper.wrapLibrary(module,compileContext,url,outputPath);
      if (bundledLocation != null) {
        result.add(fixFileURL(bundledLocation));
      }
    }
 else {
      if (CachingBundleInfoProvider.isBundle(url)) {
        result.add(fixFileURL(url));
      }
    }
  }
  return ArrayUtil.toStringArray(result);
}
