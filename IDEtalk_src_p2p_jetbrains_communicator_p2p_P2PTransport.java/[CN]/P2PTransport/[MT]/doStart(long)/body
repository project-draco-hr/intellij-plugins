{
  BuiltInServerManager.getInstance().waitForStart();
  myUserMonitorThread=new UserMonitorThread(this,waitUserResponsesTimeout);
  P2PCommand[] commands={new SendXmlMessageP2PCommand(myEventBroadcaster,this),new AddOnlineUserP2PCommand(myUserMonitorThread)};
  XmlRpcServer xmlRpcServer=XmlRpcServer.SERVICE.getInstance();
  for (  P2PCommand command : commands) {
    xmlRpcServer.addHandler(command.getXmlRpcId(),command);
  }
  myUserMonitorThread.start();
  myUserMonitorThread.triggerFindNow();
  new WaitFor(){
    @Override protected boolean condition(){
      return myUserMonitorThread.isRunning();
    }
  }
;
  myEventBroadcaster.addListener(myUserAddedCallbackListener);
}
