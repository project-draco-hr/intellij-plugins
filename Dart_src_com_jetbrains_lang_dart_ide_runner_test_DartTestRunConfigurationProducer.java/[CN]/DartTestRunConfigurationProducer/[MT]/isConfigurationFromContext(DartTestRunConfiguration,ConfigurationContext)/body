{
  if (context.getPsiLocation() != null) {
    VirtualFile target=((PsiDirectory)context.getPsiLocation().getNavigationElement()).getVirtualFile();
    if (target.isDirectory()) {
      if (!isDirInProject(target.getPath(),context.getProject())) {
        return false;
      }
    }
  }
  final PsiElement testElement=TestUtil.findTestElement(context.getPsiLocation());
  if (testElement == null) {
    return false;
  }
  final DartTestRunnerParameters paramsFromContext=new DartTestRunnerParameters();
  if (!setupRunConfiguration(paramsFromContext,testElement))   return false;
  final DartTestRunnerParameters existingParams=configuration.getRunnerParameters();
  return Comparing.equal(existingParams.getFilePath(),paramsFromContext.getFilePath()) && Comparing.equal(existingParams.getScope(),paramsFromContext.getScope()) && (!existingParams.getScope().expectsTestName() || Comparing.equal(existingParams.getTestName(),paramsFromContext.getTestName()));
}
