{
  final boolean sdkConfigured=DartSettingsUtil.isDartSDKConfigured(myProject);
  myDartSdkEnabled.setEnabled(sdkConfigured);
  final JSLibraryManager libraryManager=JSLibraryManager.getInstance(myProject);
  myDartSdkEnabled.setSelected(libraryManager.getLibraryMappings().isAssociatedWithProject(DartBundle.message("dart.sdk.name")));
  if (!sdkConfigured) {
    mySetupLabel.setText(DartBundle.message("dart.sdk.not.configured"));
    mySetupScopeLabel.setHyperlinkText(DartBundle.message("dart.sdk.configure"));
    return;
  }
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override public void run(){
      final String executable=getExecutablePathByFolderPath(FileUtil.toSystemIndependentName(myPathChooser.getText()),"dart");
      if (executable == null) {
        mySetupLabel.setText(DartBundle.message("dart.sdk.bad.path",myPathChooser.getText()));
      }
 else {
        mySetupLabel.setText(DartBundle.message("dart.sdk.setup",DartSdkUtil.getSdkVersion(FileUtil.toSystemDependentName(myPathChooser.getText()))));
        mySetupScopeLabel.setHyperlinkText(DartBundle.message("dart.sdk.edit.usage.scope"));
      }
    }
  }
);
}
