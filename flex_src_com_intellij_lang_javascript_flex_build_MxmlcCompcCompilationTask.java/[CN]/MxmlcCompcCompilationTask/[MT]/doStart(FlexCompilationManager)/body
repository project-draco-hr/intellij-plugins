{
  final boolean swf=myOldConfig != null ? myOldConfig.OUTPUT_TYPE.equals(FlexBuildConfiguration.APPLICATION) : myFlexIdeConfig.getOutputType() != OutputType.Library;
  final Sdk sdk=myOldConfig != null ? FlexUtils.getFlexSdkForFlexModuleOrItsFlexFacets(myModule) : FlexUtils.createFlexSdkWrapper(myFlexIdeConfig);
  final List<String> compilerCommand=FlexCompilationUtils.getMxmlcCompcCommand(myModule.getProject(),sdk,swf);
  final List<String> command=myOldConfig != null ? FlexCompilationUtils.buildCommand(compilerCommand,getConfigFiles(),myModule,myOldConfig) : FlexCompilationUtils.buildCommand(compilerCommand,getConfigFiles());
  final ProcessBuilder processBuilder=new ProcessBuilder(command);
  processBuilder.redirectErrorStream(true);
  processBuilder.directory(new File(FlexUtils.getFlexCompilerWorkDirPath(myModule.getProject(),null)));
  compilationManager.addMessage(this,CompilerMessageCategory.INFORMATION,StringUtil.join(command," "),null,-1,-1);
  myProcess=processBuilder.start();
  readInputStream(compilationManager);
}
