{
  List<String> args=new ArrayList<String>();
  args.add(runtimePath);
  if (packageRoot != null) {
    args.add("--package-root=" + packageRoot);
  }
  if (debugRemoteProcess) {
    args.add("--debug:" + debugPort);
  }
  if (profileRemoteProcess) {
    args.add("--observe");
    args.add("--pause-isolates-on-exit");
    args.add("--code_comments");
    args.add("--collect-code=false");
  }
  args.add(analysisServerPath);
  if (clientId != null) {
    args.add("--client-id=" + clientId);
  }
  if (clientVersion != null) {
    args.add("--client-version=" + clientVersion);
  }
  if (httpPort != 0) {
    args.add("--port=" + httpPort);
  }
  if (noErrorNotification) {
    args.add("--no-error-notification");
  }
  if (fileReadMode == FileReadMode.NORMALIZE_EOL_ALWAYS) {
    args.add("--file-read-mode=normalize-eol-always");
  }
  for (  String arg : additionalProgramArguments) {
    args.add(arg);
  }
  return args.toArray(new String[args.size()]);
}
