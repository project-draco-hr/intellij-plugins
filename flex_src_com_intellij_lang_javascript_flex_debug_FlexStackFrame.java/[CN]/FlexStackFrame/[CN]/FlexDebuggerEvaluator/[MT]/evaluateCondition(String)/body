{
  final String result=eval(expression,myDebugProcess);
  if (result != null && (result.equalsIgnoreCase("true") || result.equalsIgnoreCase("false"))) {
    return Boolean.valueOf(result);
  }
 else {
    final String message=result == null || result.startsWith(CANNOT_EVALUATE_EXPRESSION) ? FlexBundle.message("failed.to.evaluate.breakpoint.condition",expression) : FlexBundle.message("not.boolean.breakpoint.condition",expression,result);
    final Ref<Boolean> stopRef=new Ref<Boolean>(false);
    ApplicationManager.getApplication().invokeAndWait(new Runnable(){
      public void run(){
        final Project project=getDebugProcess().getSession().getProject();
        final int answer=Messages.showYesNoDialog(project,message,FlexBundle.message("breakpoint.condition.error"),Messages.getQuestionIcon());
        stopRef.set(answer == 0);
      }
    }
,ModalityState.defaultModalityState());
    return stopRef.get();
  }
}
