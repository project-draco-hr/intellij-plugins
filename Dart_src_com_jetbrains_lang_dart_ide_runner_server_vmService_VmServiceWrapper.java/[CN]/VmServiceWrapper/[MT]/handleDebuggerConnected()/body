{
  streamListen(VmService.DEBUG_STREAM_ID,new VmServiceConsumers.SuccessConsumerWrapper(){
    @Override public void received(    final Success success){
      myVmServiceReceiverThreadId=Thread.currentThread().getId();
      streamListen(VmService.ISOLATE_STREAM_ID,new VmServiceConsumers.SuccessConsumerWrapper(){
        @Override public void received(        final Success success){
          getVm(new VmServiceConsumers.VmConsumerWrapper(){
            @Override public void received(            final VM vm){
              if (vm.getIsolates().size() == 0) {
                Logging.getLogger().logError("No isolates found after VM start: " + vm.getIsolates().size());
              }
              for (              final IsolateRef isolateRef : vm.getIsolates()) {
                getIsolate(isolateRef.getId(),new VmServiceConsumers.GetIsolateConsumerWrapper(){
                  @Override public void received(                  final Isolate isolate){
                    handleIsolate(isolateRef,isolate.getPauseEvent().getKind() == EventKind.PauseStart);
                  }
                }
);
              }
            }
          }
);
        }
      }
);
    }
  }
);
  if (myDebugProcess.isRemoteDebug()) {
    streamListen(VmService.STDOUT_STREAM_ID,VmServiceConsumers.EMPTY_SUCCESS_CONSUMER);
    streamListen(VmService.STDERR_STREAM_ID,VmServiceConsumers.EMPTY_SUCCESS_CONSUMER);
  }
}
