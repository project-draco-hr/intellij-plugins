{
  final XSourcePosition position=xBreakpoint.getSourcePosition();
  if (position == null || position.getFile().getFileType() != DartFileType.INSTANCE) {
    consumer.sourcePositionNotApplicable();
    return;
  }
  addRequest(new Runnable(){
    @Override public void run(){
      final String uri;
      final int line=position.getLine() + 1;
      final String dasExecutionContextId=myDebugProcess.getDASExecutionContextId();
      if (dasExecutionContextId != null) {
        uri=DartAnalysisServerService.getInstance().execution_mapUri(dasExecutionContextId,position.getFile().getPath(),null);
      }
 else {
        uri=myDebugProcess.getUriForFile(position.getFile());
      }
      myVmService.addBreakpointWithScriptUri(isolateId,uri,line,consumer);
    }
  }
);
}
