{
  final XSourcePosition position=xBreakpoint.getSourcePosition();
  if (position == null || position.getFile().getFileType() != DartFileType.INSTANCE) {
    consumer.sourcePositionNotApplicable();
    return;
  }
  final String uri=myDebugProcess.getUriForFile(position.getFile());
  final String scriptId=myIsolatesInfo.getScriptId(isolate.getId(),uri);
  final int line=position.getLine() + 1;
  if (scriptId == null) {
    consumer.sourcePositionNotApplicable();
    return;
  }
  addRequest(new Runnable(){
    @Override public void run(){
      myVmService.addBreakpoint(isolate.getId(),scriptId,line,consumer);
    }
  }
);
}
