{
  final ModifiableRootModel modifiableModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
  final LibraryTableBase.ModifiableModelEx libraryTable=(LibraryTableBase.ModifiableModelEx)modifiableModel.getModuleLibraryTable();
  LibraryEx library=(LibraryEx)libraryTable.createLibrary("test",FlexLibraryType.getInstance());
  String libraryId=UUID.randomUUID().toString();
  ((FlexLibraryProperties)library.getProperties()).setId(libraryId);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      libraryTable.commit();
      modifiableModel.commit();
    }
  }
);
  return libraryId;
}
