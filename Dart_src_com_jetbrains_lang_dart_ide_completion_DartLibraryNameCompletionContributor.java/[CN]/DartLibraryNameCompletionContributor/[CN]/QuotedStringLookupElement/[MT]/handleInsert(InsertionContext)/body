{
  Document document=context.getDocument();
  int start=context.getStartOffset();
  int end=context.getTailOffset();
  if (start < 1 || end > document.getTextLength() - 1)   return;
  CharSequence sequence=document.getCharsSequence();
  boolean left=sequence.charAt(start - 1) == sequence.charAt(start);
  boolean right=sequence.charAt(end - 1) == sequence.charAt(end);
  if (left || right) {
    document.replaceString(start,end,sequence.subSequence(left ? start + 1 : start,right ? end - 1 : end));
    if (right) {
      context.getEditor().getCaretModel().moveCaretRelatively(1,0,false,false,true);
    }
  }
}
