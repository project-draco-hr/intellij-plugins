{
  List<SelectedBundle> modules=getBundlesToRun();
  osgiRunConfiguration.setBundlesToDeploy(modules);
  osgiRunConfiguration.setVmParameters(vmParams.getText());
  osgiRunConfiguration.setProgramParameters(programParameters.getText());
  osgiRunConfiguration.setIncludeAllBundlesInClassPath(includeAllBundlesinClassPath.isSelected());
  osgiRunConfiguration.setWorkingDir(workingDirField.getText().replace('\\','/'));
  osgiRunConfiguration.setFrameworkDir(frameworkDirField.getText().replace('\\','/'));
  FrameworkInstanceDefinition frameworkInstanceDefinition=(FrameworkInstanceDefinition)frameworkInstances.getSelectedItem();
  if (frameworkInstanceDefinition != null) {
    osgiRunConfiguration.setInstanceToUse(frameworkInstanceDefinition);
  }
  if (currentFrameworkRunPropertiesEditor != null) {
    currentFrameworkRunPropertiesEditor.applyEditorTo(osgiRunConfiguration);
  }
}
