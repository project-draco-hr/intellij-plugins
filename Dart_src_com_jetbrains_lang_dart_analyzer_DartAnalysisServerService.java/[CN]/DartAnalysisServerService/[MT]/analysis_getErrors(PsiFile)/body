{
  final Ref<AnalysisError[]> resultError=new Ref<AnalysisError[]>();
  final Semaphore semaphore=new Semaphore();
  semaphore.down();
  final String path=FileUtil.toSystemDependentName(file.getOriginalFile().getVirtualFile().getPath());
  myServer.analysis_getErrors(path,new GetErrorsConsumer(){
    @Override public void computedErrors(    final AnalysisError[] errors){
      resultError.set(errors);
      semaphore.up();
    }
  }
);
  semaphore.waitFor(10000);
  return resultError.get();
}
