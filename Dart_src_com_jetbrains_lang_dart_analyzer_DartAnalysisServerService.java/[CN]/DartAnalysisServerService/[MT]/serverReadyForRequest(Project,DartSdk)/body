{
synchronized (myLock) {
    if (myServer == null || !sdk.getHomePath().equals(mySdkHome) || !sdk.getVersion().equals(mySdkVersion) || !myServer.isSocketOpen()) {
      stopServer();
      if (isDartSdkVersionSufficient(sdk)) {
        startServer(sdk);
      }
    }
    if (myServer != null) {
      myRootsHandler.ensureProjectServed(project);
      return true;
    }
    return false;
  }
}
