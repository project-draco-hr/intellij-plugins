{
  final Document document=e.getDocument();
  final VirtualFile file=FileDocumentManager.getInstance().getFile(document);
  if (!isLocalDartOrHtmlFile(file))   return;
  final String filePath=file.getPath();
synchronized (myNavigationData) {
    myFilePathsWithUnsentChanges.add(filePath);
    final List<PluginNavigationRegion> regions=myNavigationData.get(filePath);
    if (regions != null) {
      final int eventOffset=e.getOffset();
      final int deltaLength=e.getNewLength() - e.getOldLength();
      for (      PluginNavigationRegion region : regions) {
        if (eventOffset <= region.offset) {
          region.offset+=deltaLength;
        }
 else         if (region.offset < eventOffset && eventOffset <= region.offset + region.length) {
          region.length+=deltaLength;
        }
        for (        PluginNavigationTarget target : region.getTargets()) {
          if (target.file.equals(filePath) && target.offset >= eventOffset) {
            target.offset+=deltaLength;
          }
        }
      }
    }
  }
}
