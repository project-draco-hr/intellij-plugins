{
  final Ref<RuntimeException> exceptionRef=new Ref<RuntimeException>();
  final Semaphore semaphore=new Semaphore();
  semaphore.down();
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      try {
        runnable.run();
      }
 catch (      RuntimeException e) {
        exceptionRef.set(e);
      }
      semaphore.up();
    }
  }
);
  semaphore.waitFor(timeout);
  if (!exceptionRef.isNull()) {
    LOG.error(runnableInfo,exceptionRef.get());
    return false;
  }
  if (semaphore.tryUp()) {
    LOG.error("Operation didn't finish in " + timeout + " ms: "+ runnableInfo);
    return false;
  }
  return true;
}
