{
  VirtualFile jsVirtualFile=jsFile.getVirtualFile();
  if (jsVirtualFile == null) {
    throw new RuntimeException("JavaScript file should have virtual file.");
  }
  JstdConfigStructure configStructure=new JstdConfigStructure();
  DependencyContainer dependencyContainer=new DependencyContainer(jsFile.getProject());
  fillDependencyMap(jsFile,dependencyContainer);
  Set<VirtualFile> added=Sets.newHashSet();
  addAllDependenciesInOrder(added,configStructure,jsVirtualFile,dependencyContainer);
  return configStructure;
}
