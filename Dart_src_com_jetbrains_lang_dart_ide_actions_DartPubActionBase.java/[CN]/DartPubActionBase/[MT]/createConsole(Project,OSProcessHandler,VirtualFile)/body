{
  final TextConsoleBuilder consoleBuilder=TextConsoleBuilderFactory.getInstance().createBuilder(project);
  consoleBuilder.setViewer(true);
  consoleBuilder.addFilter(new DartConsoleFilter(project,pubspecYamlFile));
  consoleBuilder.addFilter(new DartRelativePathsConsoleFilter(project,pubspecYamlFile.getParent().getPath()));
  final ConsoleView console=consoleBuilder.getConsole();
  processHandler.addProcessListener(new ProcessAdapter(){
    @Override public void processTerminated(    final ProcessEvent event){
      console.print(IdeBundle.message("finished.with.exit.code.text.message",event.getExitCode()),ConsoleViewContentType.SYSTEM_OUTPUT);
    }
  }
);
  return console;
}
