{
  String frameworkInstanceName=projectSettings.getFrameworkInstanceName();
  if (!onlyIfFrameworkInstanceSelectionChanged || (frameworkInstanceName != null && !frameworkInstanceName.equals(_currentFrameworkInstanceName))) {
    if (_state == null) {
      createInitialState();
    }
 else {
      List<Long> longs=manifestHolderRegistry.getLibraryBundleIDs();
      for (      Long libraryBundleID : longs) {
        _state.removeBundle(libraryBundleID);
      }
      manifestHolderRegistry.clearLibraryManifestHolders();
      loadFrameworkInstanceLibraryBundles();
      _state.resolve();
    }
    return true;
  }
  return false;
}
