{
  Collection<Object> result=new HashSet<Object>();
  if (bundle instanceof Library) {
    List<BundleDescription> resolvedRequires=getResolvedRequires(bundle);
    List<BundleSpecification> requiredBundles=getRequiredBundles(bundle);
    if (requiredBundles != null && requiredBundles.size() > 0) {
      for (      BundleSpecification requiredBundle : requiredBundles) {
        if (requiredBundle.isExported()) {
          for (          BundleDescription resolvedRequire : resolvedRequires) {
            if (requiredBundle.isSatisfiedBy(resolvedRequire)) {
              Object resolvedRequiredBundle=resolvedRequire.getUserObject();
              result.add(resolvedRequiredBundle);
              result.addAll(determineReexportedRequiredBundlesOnLibraries(resolvedRequiredBundle));
            }
          }
        }
      }
    }
  }
  return result;
}
