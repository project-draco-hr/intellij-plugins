{
  try {
    configurable.apply();
  }
 catch (  ConfigurationException ignored) {
  }
  ModifiableFlexIdeBuildConfiguration existingBC=myConfigurablesMap.getKeysByValue(configurable).get(0);
  FlexIdeBCConfigurable unwrapped=FlexIdeBCConfigurable.unwrap(configurable);
  final String title=FlexBundle.message("copy.build.configuration",unwrapped.getModule().getName());
  Pair<String,BuildConfigurationNature> nameAndNature=promptForCreation(unwrapped.getModule(),title,existingBC.getNature());
  if (nameAndNature == null) {
    return;
  }
  final String newBCName=nameAndNature.first;
  final String fileName=PathUtil.suggestFileName(newBCName);
  final BuildConfigurationNature newBCNature=nameAndNature.second;
  ModifiableFlexIdeBuildConfiguration newBC=myConfigEditor.copyConfiguration(existingBC,newBCNature);
  newBC.setName(newBCName);
  final String outputFileName=existingBC.getOutputFileName();
  final String lowercase=outputFileName.toLowerCase();
  if (lowercase.endsWith(".swf") || lowercase.endsWith(".swc")) {
    final String extension=newBC.getOutputType() == OutputType.Library ? ".swc" : ".swf";
    newBC.setOutputFileName(outputFileName.substring(0,outputFileName.length() - ".sw_".length()) + extension);
  }
  if (newBCNature.isApp()) {
    if (newBCNature.isDesktopPlatform()) {
      newBC.getAirDesktopPackagingOptions().setPackageFileName(fileName);
    }
 else     if (newBCNature.isMobilePlatform()) {
      newBC.getAndroidPackagingOptions().setPackageFileName(fileName);
      newBC.getIosPackagingOptions().setPackageFileName(fileName);
    }
  }
  createConfigurableNode(newBC,unwrapped.getModule(),treeNodeNameUpdater);
}
