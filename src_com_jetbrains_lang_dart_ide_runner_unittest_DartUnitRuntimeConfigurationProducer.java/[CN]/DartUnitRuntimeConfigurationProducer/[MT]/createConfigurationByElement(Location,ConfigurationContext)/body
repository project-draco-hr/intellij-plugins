{
  if (!(location instanceof PsiLocation))   return null;
  final RunnerAndConfigurationSettings settings=cloneTemplateConfiguration(location.getProject(),context);
  final LocatableConfiguration runConfig=(LocatableConfiguration)settings.getConfiguration();
  if (!(runConfig instanceof DartUnitRunConfiguration)) {
    return null;
  }
  final DartUnitRunConfiguration dartUnitRunConfiguration=((DartUnitRunConfiguration)runConfig);
  final PsiElement element=findTestElement(location.getPsiElement());
  if (element == null || !setupRunConfiguration(dartUnitRunConfiguration,element)) {
    return null;
  }
  mySourceElement=location.getPsiElement();
  settings.setName("Test: " + dartUnitRunConfiguration.getRunnerParameters().getTestName());
  return settings;
}
