{
  if (!shouldUseCustomJFX()) {
    return JavaFxHtmlPanelProvider.class.getClassLoader();
  }
  final ArrayList<URL> urls=new ArrayList<URL>();
  try {
    final String installationPathRoot=JavaFXInstallator.INSTANCE.getInstallationPath();
    urls.add(new URI("file","",installationPathRoot + "/jre/lib/ext/jfxrt.jar",null).toURL());
    urls.add(new URI("file","",installationPathRoot + "/jre/lib/jfxswt.jar",null).toURL());
    urls.add(new URI("file","",installationPathRoot + "/jre/lib/*.dylib",null).toURL());
    urls.add(JavaFxHtmlPanelProvider.class.getClassLoader().getResource("/org/intellij/plugins/markdown/ui/preview/javafx/JavaFxHtmlPanel.class"));
  }
 catch (  Exception ignore) {
  }
  final ClassLoader parent=JavaFxHtmlPanelProvider.class.getClassLoader();
  if (parent instanceof PluginClassLoader) {
    urls.addAll(((PluginClassLoader)parent).getUrls());
  }
  LOG.info("ClassLoader urls: " + urls.toString());
  return new MyClassLoader(urls.toArray(new URL[urls.size()]),parent);
}
