{
  TextFieldWithHistoryWithBrowseButton textFieldWithHistoryWithBrowseButton=new TextFieldWithHistoryWithBrowseButton();
  final TextFieldWithHistory textFieldWithHistory=textFieldWithHistoryWithBrowseButton.getChildComponent();
  SwingHelper.addHistoryOnExpansion(textFieldWithHistory,new Producer<List<String>>(){
    @Nullable @Override public List<String> produce(){
      List<VirtualFile> newFiles=listPossibleConfigFilesInProject(project);
      List<String> newFilePaths=ContainerUtil.map(newFiles,new Function<VirtualFile,String>(){
        @Override public String fun(        VirtualFile file){
          return FileUtil.toSystemDependentName(file.getPath());
        }
      }
);
      Collections.sort(newFilePaths);
      return newFilePaths;
    }
  }
);
  SwingHelper.installFileCompletionAndBrowseDialog(project,textFieldWithHistoryWithBrowseButton,KarmaBundle.message("runConfiguration.config_file.browse_dialog.title"));
  return textFieldWithHistoryWithBrowseButton;
}
