{
  IElementType tokenType=builder.getTokenType();
  if (tokenType == OPEN_RAW_BLOCK) {
    PsiBuilder.Marker blockMarker=builder.mark();
    if (parseOpenRawBlock(builder)) {
      parseRestOfBlock(builder,blockMarker,true);
    }
 else {
      return false;
    }
    return true;
  }
  if (atOpenInverseExpression(builder)) {
    PsiBuilder.Marker inverseBlockStartMarker=builder.mark();
    PsiBuilder.Marker lookAheadMarker=builder.mark();
    boolean isSimpleInverse=parseSimpleInverse(builder);
    lookAheadMarker.rollbackTo();
    if (isSimpleInverse) {
      inverseBlockStartMarker.rollbackTo();
      return false;
    }
 else {
      inverseBlockStartMarker.drop();
    }
    PsiBuilder.Marker blockMarker=builder.mark();
    if (parseOpenInverse(builder)) {
      parseRestOfBlock(builder,blockMarker,false);
    }
 else {
      return false;
    }
    return true;
  }
  if (tokenType == OPEN_BLOCK) {
    PsiBuilder.Marker blockMarker=builder.mark();
    if (parseOpenBlock(builder)) {
      parseRestOfBlock(builder,blockMarker,false);
    }
 else {
      return false;
    }
    return true;
  }
  if (tokenType == OPEN || tokenType == OPEN_UNESCAPED) {
    parseMustache(builder);
    return true;
  }
  if (tokenType == OPEN_PARTIAL) {
    parsePartial(builder);
    return true;
  }
  if (tokenType == ESCAPE_CHAR) {
    builder.advanceLexer();
    return true;
  }
  if (tokenType == CONTENT) {
    builder.advanceLexer();
    return true;
  }
  if (tokenType == COMMENT) {
    parseLeafToken(builder,COMMENT);
    return true;
  }
  if (tokenType == UNCLOSED_COMMENT) {
    PsiBuilder.Marker unclosedCommentMarker=builder.mark();
    parseLeafToken(builder,UNCLOSED_COMMENT);
    unclosedCommentMarker.error(HbBundle.message("hb.parsing.comment.unclosed"));
    return true;
  }
  return false;
}
