{
  parseProgram(builder);
  if (!builder.eof()) {
    IElementType tokenType=builder.getTokenType();
    int problemOffset=builder.getCurrentOffset();
    if (tokenType == OPEN_ENDBLOCK) {
      PsiBuilder.Marker badEndBlockMarker=builder.mark();
      parseCloseBlock(builder);
      badEndBlockMarker.error(HbBundle.message("hb.parsing.no.open.mustache"));
    }
    if (builder.getCurrentOffset() == problemOffset) {
      PsiBuilder.Marker problemMark=builder.mark();
      builder.advanceLexer();
      problemMark.error(HbBundle.message("hb.parsing.invalid"));
    }
    parse();
  }
}
