{
  final JBList list=new JBList(getAvailableTypes());
  list.setCellRenderer(new ListCellRendererWrapper<Type>(){
    @Override public void customize(    JList list,    Type value,    int index,    boolean selected,    boolean hasFocus){
      setIcon(value.getIcon());
      setText(value.getTitle(displayName));
    }
  }
);
  PopupChooserBuilder builder=new PopupChooserBuilder(list);
  JBPopup popup=builder.setMovable(true).setItemChoosenCallback(new Runnable(){
    @Override public void run(){
      int[] ids=list.getSelectedIndices();
      if (ids.length == 0)       return;
      Type type=ObjectUtils.tryCast(list.getSelectedValue(),Type.class);
      if (type != null) {
        if (psiElement.isValid()) {
          execute(type.getExecutor(),psiElement);
        }
      }
    }
  }
).createPopup();
  popup.show(new RelativePoint(e));
}
