{
  final RubyMotionUtilImpl.ProjectType projectType=settings.getProjectType();
  final Sdk sdk=settings.getSdk();
  RModuleUtil.getInstance().changeModuleSdk(sdk,module);
  module.putUserData(RubyMotionUtilImpl.PROJECT_TYPE,projectType);
  RubyMotionFacetConfigurator.configure(baseDir,module);
  StartupManager.getInstance(project).runWhenProjectIsInitialized(new Runnable(){
    @Override public void run(){
      ((RubyMotionUtilImpl)RubyMotionUtil.getInstance()).generateApp(baseDir,module,sdk,projectType,settings.isUseCalabash());
      RModuleUtil.getInstance().refreshRubyModuleTypeContent(module);
    }
  }
);
}
