{
  final List<TreeElement> result=new ArrayList<TreeElement>();
  if (myElement instanceof DartFile || myElement instanceof DartEmbeddedContent) {
    THashSet<DartComponentName> componentNames=new THashSet<DartComponentName>();
    DartPsiCompositeElementImpl.processDeclarationsImpl(myElement,new ComponentNameScopeProcessor(componentNames),ResolveState.initial(),null);
    for (    DartComponentName componentName : componentNames) {
      PsiElement parent=componentName.getParent();
      if (parent instanceof DartComponent) {
        result.add(new DartStructureViewElement(parent));
      }
    }
  }
 else   if (myElement instanceof DartClass) {
    final DartClass dartClass=(DartClass)myElement;
    final DartClassResolveResult superClass=dartClass.getSuperClassResolvedOrObjectClass();
    if (superClass.getDartClass() != null) {
      result.add(new DartStructureViewElement(superClass.getDartClass()));
    }
    List<DartClassResolveResult> implementsAndMixinsList=DartResolveUtil.resolveClassesByTypes(DartResolveUtil.getImplementsAndMixinsList(dartClass));
    for (    DartClassResolveResult superInterface : implementsAndMixinsList) {
      if (superInterface.getDartClass() == null) {
        continue;
      }
      result.add(new DartStructureViewElement(superInterface.getDartClass()));
    }
    for (    DartComponent subNamedComponent : DartResolveUtil.getNamedSubComponentsInOrder(dartClass)) {
      result.add(new DartStructureViewElement(subNamedComponent));
    }
  }
 else   if (myElement instanceof DartEnum) {
    final DartEnum dartEnum=(DartEnum)myElement;
    final List<DartEnumConstantDeclaration> enumConstants=dartEnum.getConstants();
    for (    DartEnumConstantDeclaration enumConstant : enumConstants) {
      result.add(new DartStructureViewElement(enumConstant));
    }
  }
  return result.toArray(new TreeElement[result.size()]);
}
