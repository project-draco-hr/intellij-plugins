{
  final List<DartComponent> dartComponents=new ArrayList<DartComponent>();
  if (myElement instanceof DartFile || myElement instanceof DartEmbeddedContent) {
    THashSet<DartComponentName> componentNames=new THashSet<DartComponentName>();
    DartPsiCompositeElementImpl.processDeclarationsImpl(myElement,new ComponentNameScopeProcessor(componentNames),ResolveState.initial(),null);
    for (    DartComponentName componentName : componentNames) {
      PsiElement parent=componentName.getParent();
      if (parent instanceof DartComponent) {
        dartComponents.add((DartComponent)parent);
      }
    }
  }
 else   if (myElement instanceof DartClass) {
    for (    DartComponent subNamedComponent : DartResolveUtil.getNamedSubComponents((DartClass)myElement)) {
      dartComponents.add(subNamedComponent);
    }
  }
  Collections.sort(dartComponents,new Comparator<DartComponent>(){
    @Override public int compare(    DartComponent o1,    DartComponent o2){
      return o1.getTextOffset() - o2.getTextOffset();
    }
  }
);
  final TreeElement[] result=new TreeElement[dartComponents.size()];
  for (int i=0; i < result.length; i++) {
    result[i]=new DartStructureViewElement(dartComponents.get(i));
  }
  return result;
}
