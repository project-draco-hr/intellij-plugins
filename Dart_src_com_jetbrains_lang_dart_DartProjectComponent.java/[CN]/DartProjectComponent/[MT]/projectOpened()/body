{
  StartupManager.getInstance(myProject).runWhenProjectIsInitialized(new Runnable(){
    public void run(){
      deleteDartSdkGlobalLibConfiguredInVeryOldIde();
      ensureCorrectDartSdkLibName();
      updateDependenciesOnDartSdkLib();
      removeJSBreakpointsInDartFiles(myProject);
      DartiumUtil.removeUnsupportedAsyncFlag();
      final Collection<VirtualFile> pubspecYamlFiles=FilenameIndex.getVirtualFilesByName(myProject,PUBSPEC_YAML,GlobalSearchScope.projectScope(myProject));
      for (      VirtualFile pubspecYamlFile : pubspecYamlFiles) {
        final Module module=ModuleUtilCore.findModuleForFile(pubspecYamlFile,myProject);
        if (module != null && FileTypeIndex.containsFileOfType(DartFileType.INSTANCE,module.getModuleContentScope())) {
          excludeBuildAndPackagesFolders(module,pubspecYamlFile);
        }
      }
    }
  }
);
}
