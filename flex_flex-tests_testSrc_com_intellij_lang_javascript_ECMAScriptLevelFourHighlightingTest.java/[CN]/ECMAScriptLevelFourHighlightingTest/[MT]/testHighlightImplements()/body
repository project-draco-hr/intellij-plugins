{
  doTestFor(true,null,new Runnable(){
    @Override public void run(){
      HighlightUsagesHandlerBase<PsiElement> handler=HighlightUsagesHandler.createCustomHandler(myEditor,myFile);
      assertNotNull(handler);
      List<PsiElement> targets=handler.getTargets();
      assertEquals(2,targets.size());
      assertTrue(targets.get(0).getText().indexOf("interface IFoo") != -1);
      assertTrue(targets.get(1).getText().indexOf("interface IBar") != -1);
      handler.computeUsages(targets);
      List<TextRange> readUsages=handler.getReadUsages();
      assertEquals(2,readUsages.size());
      String text=myFile.getText();
      assertEquals("foo",fileTextOfRange(readUsages.get(0)));
      assertEquals("baz",fileTextOfRange(readUsages.get(1)));
    }
  }
,getTestName(false) + ".js2");
}
