{
  ProblemsHolder holder=new ProblemsHolder(InspectionManager.getInstance(project),psiFile,true);
  final PsiElementVisitor elementVisitor=inspection.buildVisitor(holder,true);
  psiFile.accept(new PsiRecursiveElementVisitor(){
    public void visitElement(    PsiElement psielement){
      psielement.accept(elementVisitor);
      super.visitElement(psielement);
    }
  }
);
  List<ProblemDescriptor> results=holder.getResults();
  return results == null ? Collections.<ProblemDescriptor>emptyList() : results;
}
