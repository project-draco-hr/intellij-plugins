{
  ProblemsHolder holder=new ProblemsHolder(InspectionManager.getInstance(project),psiFile);
  final PsiElementVisitor elementVisitor=inspection.buildVisitor(holder,true);
  psiFile.accept(new PsiRecursiveElementVisitor(){
    public void visitElement(    PsiElement psielement){
      psielement.accept(elementVisitor);
      super.visitElement(psielement);
    }
  }
);
  return holder.getResults();
}
