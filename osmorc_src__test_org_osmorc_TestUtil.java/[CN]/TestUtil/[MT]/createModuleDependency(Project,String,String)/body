{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      final Module fromModule=ModuleManager.getInstance(project).findModuleByName(fromModuleName);
      final Module toModule=ModuleManager.getInstance(project).findModuleByName(toModuleName);
      ModifiableRootModel rootModel=ModuleRootManager.getInstance(fromModule).getModifiableModel();
      rootModel.addModuleOrderEntry(toModule);
      rootModel.commit();
    }
  }
);
}
