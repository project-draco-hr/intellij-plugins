{
  VirtualFile result=null;
  if (file != null) {
    if (file.isDirectory()) {
      result=file;
    }
 else {
      result=JarFileSystem.getInstance().getJarRootForLocalFile(file);
    }
  }
  return result;
}
