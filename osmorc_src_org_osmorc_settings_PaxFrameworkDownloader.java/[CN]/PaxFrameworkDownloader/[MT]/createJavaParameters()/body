{
  JavaParameters parameters=new JavaParameters();
  Sdk sdk=JavaAwareProjectJdkTableImpl.getInstanceEx().getInternalJdk();
  if (sdk == null) {
    throw new ExecutionException("No Java SDK available.");
  }
  parameters.setJdk(sdk);
  parameters.setMainClass(AbstractPaxBasedFrameworkRunner.PaxRunnerMainClass);
  parameters.getClassPath().addAll(AbstractPaxBasedFrameworkRunner.getPaxLibraries());
  ParametersList parametersList=parameters.getProgramParametersList();
  parametersList.add("--p=" + myFrameworkType);
  if (!StringUtil.isEmpty(myVersion)) {
    parametersList.add("--v=" + myVersion);
  }
  parametersList.add("--nologo=true");
  parametersList.add("--executor=noop");
  parametersList.add("--workingDirectory=" + myTargetFolder);
  if (myClearDownloadFolder) {
    parametersList.add("--clean");
  }
  if (!StringUtil.isEmpty(myProfiles)) {
    parametersList.add("--profiles=" + myProfiles);
  }
  return parameters;
}
