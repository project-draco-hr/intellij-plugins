{
  final ModifiableRootModel modifiableModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
  final LibraryTable.ModifiableModel libraryTable=modifiableModel.getModuleLibraryTable().getModifiableModel();
  LibraryEx library=(LibraryEx)libraryTable.createLibrary("test",FlexLibraryType.FLEX_LIBRARY);
  String libraryId=UUID.randomUUID().toString();
  ((FlexLibraryProperties)library.getProperties()).setId(libraryId);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      libraryTable.commit();
      modifiableModel.commit();
    }
  }
);
  return libraryId;
}
