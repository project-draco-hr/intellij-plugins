{
  final TemplateManager templateManager=TemplateManager.getInstance(project);
  Template template=templateManager.createTemplate("","");
  template.setToReformat(true);
  if (!buildTemplate(template,psiElement)) {
    return;
  }
  PsiElement anchor=findAnchor(psiElement);
  if (anchor == null) {
    CommonRefactoringUtil.showErrorHint(project,editor,DartBundle.message("dart.create.function.intention.family"),DartBundle.message("dart.cannot.find.place.to.create"),null);
    return;
  }
  navigate(project,editor,anchor.getTextOffset(),anchor.getContainingFile().getVirtualFile());
  templateManager.startTemplate(editor,template);
}
