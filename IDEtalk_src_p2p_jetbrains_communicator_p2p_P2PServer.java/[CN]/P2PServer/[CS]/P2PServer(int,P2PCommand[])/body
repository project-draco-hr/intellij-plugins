{
  myXmlRpcPort=portToListen;
  try {
    final com.intellij.peer.PeerFactory peerFactory=com.intellij.peer.PeerFactory.getInstance();
    myWebServer=peerFactory.createWebServer(myXmlRpcPort,null,peerFactory.createRpcServer());
  }
 catch (  Exception e) {
    LOG.debug(e.getMessage(),e);
    myWebServer=new WebServer(myXmlRpcPort);
  }
  for (  P2PCommand p2PCommand : p2PServerCommands) {
    myWebServer.addHandler(p2PCommand.getXmlRpcId(),p2PCommand);
  }
  myWebServer.start();
}
