{
  final SdkEntry sdkEntry=config.getDependencies().getSdkEntry();
  if (sdkEntry == null) {
    throw new CantRunException(FlexBundle.message("sdk.not.set.for.bc.0.of.module.1",config.getName(),params.getModuleName()));
  }
  final GeneralCommandLine commandLine=new GeneralCommandLine();
  commandLine.setExePath(FileUtil.toSystemDependentName(sdkEntry.getHomePath() + FlexSdkUtils.ADL_RELATIVE_PATH));
  final String adlOptions=params.getAdlOptions();
  if (!StringUtil.isEmptyOrSpaces(adlOptions)) {
    commandLine.addParameters(StringUtil.split(adlOptions," "));
  }
  final String descriptorName=(config.getAirDesktopPackagingOptions().isUseGeneratedDescriptor() ? BCUtils.getGeneratedAirDescriptorName(config) : PathUtil.getFileName(config.getAirDesktopPackagingOptions().getCustomDescriptorPath()));
  commandLine.addParameter(FileUtil.toSystemDependentName(config.getOutputFolder() + "/" + descriptorName));
  commandLine.addParameter(FileUtil.toSystemDependentName(config.getOutputFolder()));
  final String programParameters=params.getAirProgramParameters();
  if (!StringUtil.isEmptyOrSpaces(programParameters)) {
    commandLine.addParameter("--");
    commandLine.addParameters(StringUtil.split(programParameters," "));
  }
  return commandLine;
}
