{
  PrintStream oldOut=System.out;
  PrintStream oldErr=System.err;
  ByteArrayOutputStream baOut=new ByteArrayOutputStream();
  ByteArrayOutputStream baErr=new ByteArrayOutputStream();
  final T result;
  @SuppressWarnings("IOResourceOpenedButNotSafelyClosed") PrintStream out=new PrintStream(baOut,true);
  PrintStream err=new PrintStream(baErr,true);
  try {
    System.setOut(out);
    System.setErr(err);
    result=computable.compute();
  }
  finally {
    System.setOut(oldOut);
    System.setErr(oldErr);
    out.close();
    err.close();
  }
  CapturedStreams capturedStreams=new CapturedStreams(new String(baOut.toByteArray()),new String(baErr.toByteArray()));
  return Pair.create(result,capturedStreams);
}
