{
  myDebugProcess=debugProcess;
  myVmCallFrame=vmCallFrame;
  myException=exception;
  final VmLocation location=vmCallFrame.getLocation();
  myLocationUrl=location == null ? null : location.getUnescapedUrl();
  if (myLocationUrl != null) {
    mySourcePosition=ApplicationManager.getApplication().runReadAction(new Computable<XSourcePosition>(){
      @Override public XSourcePosition compute(){
        final VirtualFile file=myDebugProcess.findFile(vmCallFrame.getIsolate(),vmCallFrame.getLibraryId(),myLocationUrl);
        final int line=location.getLineNumber(debugProcess.getVmConnection()) - 1;
        return file == null || line < 0 ? null : XDebuggerUtil.getInstance().createPosition(file,line);
      }
    }
);
  }
 else {
    mySourcePosition=null;
  }
}
