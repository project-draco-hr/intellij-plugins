{
  commandLine.setEnvironment("com.google.dart.sdk",sdk.getSdkPath());
  commandLine.addParameter("--ignore-unrecognized-flags");
  StringTokenizer argumentsTokenizer=new StringTokenizer(vmOptions);
  while (argumentsTokenizer.hasMoreTokens()) {
    commandLine.addParameter(argumentsTokenizer.nextToken());
  }
  String libUrl=VfsUtilCore.pathToUrl(filePath);
  final VirtualFile libraryRoot=VirtualFileManager.getInstance().findFileByUrl(libUrl);
  final VirtualFile packages=DartResolveUtil.findPackagesFolder(module);
  if (packages != null && packages.isDirectory()) {
    commandLine.addParameter("--package-root=" + packages.getPath() + "/");
  }
  commandLine.addParameter(filePath);
  argumentsTokenizer=new StringTokenizer(arguments);
  while (argumentsTokenizer.hasMoreTokens()) {
    commandLine.addParameter(argumentsTokenizer.nextToken());
  }
}
