{
  final TextComponentAccessor<JTextField> textComponentAccessor=new TextComponentAccessor<JTextField>(){
    public String getText(    final JTextField component){
      return component.getText();
    }
    public void setText(    final JTextField component,    final String text){
      if (!text.isEmpty() && !DartSdkUtil.isDartSdkHome(text)) {
        final String probablySdkPath=text + "/dart-sdk";
        if (DartSdkUtil.isDartSdkHome(probablySdkPath)) {
          component.setText(FileUtilRt.toSystemDependentName(probablySdkPath));
          return;
        }
      }
      component.setText(FileUtilRt.toSystemDependentName(text));
    }
  }
;
  final ComponentWithBrowseButton.BrowseFolderActionListener<JTextField> browseFolderListener=new ComponentWithBrowseButton.BrowseFolderActionListener<JTextField>("Select Dart SDK path",null,mySdkPathTextWithBrowse,myProject,FileChooserDescriptorFactory.createSingleFolderDescriptor(),textComponentAccessor);
  mySdkPathTextWithBrowse.addBrowseFolderListener(myProject,browseFolderListener);
  mySdkPathTextWithBrowse.getTextField().getDocument().addDocumentListener(new DocumentAdapter(){
    protected void textChanged(    final DocumentEvent e){
      updateSdkVersionLabel();
      updateErrorLabel();
    }
  }
);
}
