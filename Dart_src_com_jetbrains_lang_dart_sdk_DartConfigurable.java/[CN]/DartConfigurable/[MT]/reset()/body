{
  mySdkInitial=DartSdk.getGlobalDartSdk();
  myModulesWithDartSdkLibAttachedInitial.clear();
  if (mySdkInitial != null) {
    myModulesWithDartSdkLibAttachedInitial.addAll(DartSdkGlobalLibUtil.getModulesWithDartSdkGlobalLibAttached(myProject,mySdkInitial.getGlobalLibName()));
  }
  myDartSupportEnabledInitial=!myModulesWithDartSdkLibAttachedInitial.isEmpty();
  myEnableDartSupportCheckBox.setSelected(myDartSupportEnabledInitial);
  mySdkPathTextWithBrowse.setText(mySdkInitial == null ? "" : FileUtilRt.toSystemDependentName(mySdkInitial.getHomePath()));
  if (DartSdkGlobalLibUtil.isIdeWithMultipleModuleSupport()) {
    final CheckedTreeNode rootNode=(CheckedTreeNode)myModulesCheckboxTree.getModel().getRoot();
    rootNode.setChecked(false);
    final Enumeration children=rootNode.children();
    while (children.hasMoreElements()) {
      final CheckedTreeNode node=(CheckedTreeNode)children.nextElement();
      node.setChecked(myModulesWithDartSdkLibAttachedInitial.contains((Module)node.getUserObject()));
    }
  }
  updateControlsEnabledState();
  updateSdkVersionLabel();
  updateErrorLabel();
}
